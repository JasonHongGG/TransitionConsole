{
  "system": "ActivityManagementPlatform",
  "version": "2.0",
  "generatedAt": "2026-02-18T00:00:00.000Z",
  "inputs": {
    "specPath": "StateTranstionDiagram/spec.md",
    "transitionPath": "StateTranstionDiagram/transition.md"
  },
  "spec": {
    "raw": null,
    "summary": {
      "productName": "社團活動管理平台",
      "goals": [
        "瀏覽即將舉辦的活動（僅顯示可公開活動）",
        "查看活動詳情（包含剩餘名額與自身報名狀態）",
        "報名活動 / 取消報名活動（受活動狀態與截止時間限制）",
        "查看「我的活動」清單（只顯示自己已報名的活動）",
        "管理員建立/編輯/下架活動、手動關閉報名、查看報名名單並匯出 CSV"
      ],
      "roles": [
        {
          "id": "guest",
          "label": "Guest"
        },
        {
          "id": "member",
          "label": "Member"
        },
        {
          "id": "admin",
          "label": "Admin"
        }
      ]
    }
  },
  "diagrams": [
    {
      "id": "page_entry",
      "name": "Entry",
      "level": "page",
      "parentDiagramId": null,
      "roles": [],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "① Entry State Machine",
        "order": 1
      },
      "groups": [],
      "states": [
        {
          "id": "page.Entry.Init",
          "label": "Entry.Init",
          "type": "start",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_entry",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "Entry.Init"
            }
          }
        }
      ],
      "transitions": [
        
      ],
      "connectors": [
        {
          "id": "c.page_entry.invokes.page_activity_list_guest.s.page_Entry_Init.to.page_ActivityListPage_guest_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_entry",
            "stateId": "page.Entry.Init"
          },
          "to": {
            "diagramId": "page_activity_list_guest",
            "stateId": null
          },
          "narrative": {
            "summary": "以訪客身分前往活動列表",
            "taskDescription": "在 Entry.Init 觸發 continueAsGuest 導航到 /activities，並成功進入 ActivityListPage.Guest.Init。"
          },
          "validations": [
            {
              "id": "v.c.page_entry.invokes.page_activity_list_guest.01",
              "type": "url-equals",
              "description": "導向 `/activities` 並顯示公開活動列表；Header 僅顯示「活動/登入/註冊」，不顯示「我的活動/管理後台/登出」。",
              "expected": "/activities"
            }
          ],
          "meta": {
            "reason": "continueAsGuest | navigate /activities",
            "action": "continueAsGuest",
            "navigateTarget": "/activities"
          }
        },
        {
          "id": "c.page_entry.invokes.page_login.s.page_Entry_Init.to.page_LoginPage_guest_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_entry",
            "stateId": "page.Entry.Init"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": null
          },
          "narrative": {
            "summary": "前往登入頁",
            "taskDescription": "在 Entry.Init 觸發 chooseLogin 導航到 /login，並成功進入 LoginPage.Init。"
          },
          "validations": [
            {
              "id": "v.c.page_entry.invokes.page_login.01",
              "type": "url-equals",
              "description": "導向 `/login` 並顯示登入表單；Header 不應同時重複出現第二個登入入口（避免 Header + Page 重複 CTA）。",
              "expected": "/login"
            }
          ],
          "meta": {
            "reason": "chooseLogin | navigate /login",
            "action": "chooseLogin",
            "navigateTarget": "/login"
          }
        },
        {
          "id": "c.page_entry.invokes.page_register.s.page_Entry_Init.to.page_RegisterPage_guest_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_entry",
            "stateId": "page.Entry.Init"
          },
          "to": {
            "diagramId": "page_register",
            "stateId": null
          },
          "narrative": {
            "summary": "前往註冊頁",
            "taskDescription": "在 Entry.Init 觸發 chooseRegister 導航到 /register，並成功進入 RegisterPage.Init。"
          },
          "validations": [
            {
              "id": "v.c.page_entry.invokes.page_register.01",
              "type": "url-equals",
              "description": "導向 `/register` 並顯示註冊表單（僅建立 Member）；Header 不應同時重複出現第二個註冊入口（避免 Header + Page 重複 CTA）。",
              "expected": "/register"
            }
          ],
          "meta": {
            "reason": "chooseRegister | navigate /register",
            "action": "chooseRegister",
            "navigateTarget": "/register"
          }
        },
        {
          "id": "c.page_entry.contains.page_login",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_login",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.page_register",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_register",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.page_activity_list_guest",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_activity_list_guest",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.page_activity_list_member",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_activity_list_member",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.page_activity_list_admin",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_activity_list_admin",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.page_activity_detail_guest",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_activity_detail_guest",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.page_activity_detail_member",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_activity_detail_member",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.page_activity_detail_admin",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_activity_detail_admin",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.page_my_activities_member",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_my_activities_member",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.page_my_activities_admin",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_my_activities_admin",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.page_admin_activity_list",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.page_admin_activity_create",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_admin_activity_create",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.page_admin_activity_edit",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_admin_activity_edit",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.page_admin_activity_registrations",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_admin_activity_registrations",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.feature_auth_login",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "feature_auth_login",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.feature_auth_register",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "feature_auth_register",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.feature_logout",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "feature_logout",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.feature_register_for_activity",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "feature_register_for_activity",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.feature_cancel_registration",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "feature_cancel_registration",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.feature_admin_create_activity",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "feature_admin_create_activity",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.feature_admin_update_activity",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "feature_admin_update_activity",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.feature_admin_change_activity_status",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "feature_admin_change_activity_status",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.feature_admin_export_registrations_csv",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "feature_admin_export_registrations_csv",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": "Entry",
        "featureName": null,
        "entryStateId": "page.Entry.Init"
      }
    },
    {
      "id": "page_login",
      "name": "Login Page",
      "level": "page",
      "parentDiagramId": "page_entry",
      "roles": [
        "guest"
      ],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "② Login Page",
        "order": 2
      },
      "groups": [],
      "states": [
        {
          "id": "page.LoginPage.guest.Init",
          "label": "LoginPage.Init",
          "type": "start",
          "groupId": null,
          "tags": [
            "page",
            "guest"
          ],
          "meta": {
            "diagramId": "page_login",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "LoginPage.Init"
            }
          }
        },
        {
          "id": "page.LoginPage.guest.Ready",
          "label": "LoginPage.Ready",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page",
            "guest"
          ],
          "meta": {
            "diagramId": "page_login",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "LoginPage.Ready"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.page_login.0002",
          "from": "page.LoginPage.guest.Init",
          "to": "page.LoginPage.guest.Ready",
          "event": "showLoginForm",
          "roles": [
            "guest"
          ],
          "narrative": {
            "summary": "顯示登入表單",
            "taskDescription": "在 LoginPage.Init 顯示登入表單並進入 Ready，可輸入 Email/密碼並準備送出。"
          },
          "validations": [
            {
              "id": "v.t.page_login.0002.01",
              "type": "element-visible",
              "description": "登入表單包含 Email/密碼欄位；送出前按鈕可用；表單區域不與 Header 重複顯示登入按鈕。",
              "expected": null
            }
          ],
          "intent": {
            "category": "action",
            "summary": "showLoginForm"
          },
          "meta": {
            "diagramId": "page_login",
            "source": {
              "raw": "LoginPage.Init --> LoginPage.Ready : showLoginForm"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_entry.invokes.page_login.s.page_Entry_Init.to.page_LoginPage_guest_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_entry",
            "stateId": "page.Entry.Init"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.guest.Init"
          },
          "narrative": {
            "summary": "前往登入頁",
            "taskDescription": "在 Entry.Init 觸發 chooseLogin 導航到 /login，並成功進入 LoginPage.Init。"
          },
          "validations": [
            {
              "id": "v.c.page_entry.invokes.page_login.01",
              "type": "url-equals",
              "description": "導向 `/login` 並顯示登入表單；Header 不應同時重複出現第二個登入入口（避免 Header + Page 重複 CTA）。",
              "expected": "/login"
            }
          ],
          "meta": {
            "reason": "chooseLogin | navigate /login",
            "action": "chooseLogin",
            "navigateTarget": "/login"
          }
        },
        {
          "id": "c.page_login.invokes.feature_auth_login.s.page_LoginPage_guest_Ready.to.feature_AuthLoginFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.guest.Ready"
          },
          "to": {
            "diagramId": "feature_auth_login",
            "stateId": null
          },
          "narrative": {
            "summary": "送出登入並進入登入功能流程",
            "taskDescription": "在 LoginPage.Ready 送出登入（submitLogin），導入 AuthLoginFeature.Init 並開始登入流程。"
          },
          "validations": [
            {
              "id": "v.c.page_login.invokes.feature_auth_login.01",
              "type": "semantic-check",
              "description": "送出時 UI 顯示 loading 並禁用提交，避免重複送出；API 呼叫登入端點，成功回應會建立可驗證身分的 token/session 並回傳角色資訊。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "submitLogin | navigate AuthLoginFeature",
            "action": "submitLogin",
            "navigateTarget": "AuthLoginFeature"
          }
        },
        {
          "id": "c.page_login.invokes.page_register.s.page_LoginPage_guest_Ready.to.page_RegisterPage_guest_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.guest.Ready"
          },
          "to": {
            "diagramId": "page_register",
            "stateId": null
          },
          "narrative": {
            "summary": "由登入頁前往註冊頁",
            "taskDescription": "在 LoginPage.Ready 觸發 chooseRegister 導航到 /register，並進入 RegisterPage.Init。"
          },
          "validations": [
            {
              "id": "v.c.page_login.invokes.page_register.01",
              "type": "url-equals",
              "description": "導向 `/register` 並保留 returnTo（若有）；UI 不遺失使用者原本想前往的目標頁資訊。",
              "expected": "/register"
            }
          ],
          "meta": {
            "reason": "chooseRegister | navigate /register",
            "action": "chooseRegister",
            "navigateTarget": "/register"
          }
        },
        {
          "id": "c.page_login.invokes.page_activity_list_guest.s.page_LoginPage_guest_Ready.to.page_ActivityListPage_guest_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.guest.Ready"
          },
          "to": {
            "diagramId": "page_activity_list_guest",
            "stateId": null
          },
          "narrative": {
            "summary": "取消登入並回到活動列表（訪客）",
            "taskDescription": "在 LoginPage.Ready 觸發 cancelLogin 導航到 /activities，並回到訪客活動列表初始狀態。"
          },
          "validations": [
            {
              "id": "v.c.page_login.invokes.page_activity_list_guest.01",
              "type": "url-equals",
              "description": "導回 `/activities` 並仍以 Guest 身分呈現；Header 仍僅顯示「活動/登入/註冊」。",
              "expected": "/activities"
            }
          ],
          "meta": {
            "reason": "cancelLogin | navigate /activities",
            "action": "cancelLogin",
            "navigateTarget": "/activities"
          }
        },
        {
          "id": "c.page_register.invokes.page_login.s.page_RegisterPage_guest_Ready.to.page_LoginPage_guest_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_register",
            "stateId": null
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.guest.Init"
          },
          "narrative": {
            "summary": "由註冊頁前往登入頁",
            "taskDescription": "在 RegisterPage.Ready 觸發 chooseLogin 導航到 /login，並進入 LoginPage.Init。"
          },
          "validations": [
            {
              "id": "v.c.page_register.invokes.page_login.01",
              "type": "url-equals",
              "description": "導向 `/login` 並保留 returnTo（若有）；不新增不必要的頁面或流程。",
              "expected": "/login"
            }
          ],
          "meta": {
            "reason": "chooseLogin | navigate /login",
            "action": "chooseLogin",
            "navigateTarget": "/login"
          }
        },
        {
          "id": "c.feature_auth_login.invokes.page_login.s.feature_AuthLoginFeature_Failed.to.page_LoginPage_guest_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_login",
            "stateId": null
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.guest.Init"
          },
          "narrative": {
            "summary": "登入失敗後回到登入頁",
            "taskDescription": "在 AuthLoginFeature.Failed 觸發 backToLogin 導航到 /login，並回到登入頁初始狀態以便重試。"
          },
          "validations": [
            {
              "id": "v.c.feature_auth_login.invokes.page_login.01",
              "type": "url-equals",
              "description": "回到登入頁並保留使用者已輸入資訊（若產品允許）；錯誤提示可見且可再次嘗試。",
              "expected": "/login"
            }
          ],
          "meta": {
            "reason": "backToLogin | navigate /login",
            "action": "backToLogin",
            "navigateTarget": "/login"
          }
        },
        {
          "id": "c.feature_auth_login.invokes.page_login.s.feature_AuthLoginFeature_Canceled.to.page_LoginPage_guest_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_login",
            "stateId": null
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.guest.Init"
          },
          "narrative": {
            "summary": "取消登入後回到登入頁",
            "taskDescription": "在 AuthLoginFeature.Canceled 觸發 backToLogin 導航到 /login，並回到登入頁初始狀態。"
          },
          "validations": [
            {
              "id": "v.c.feature_auth_login.invokes.page_login.02",
              "type": "url-equals",
              "description": "回到登入頁；不建立登入狀態。",
              "expected": "/login"
            }
          ],
          "meta": {
            "reason": "backToLogin | navigate /login",
            "action": "backToLogin",
            "navigateTarget": "/login"
          }
        },
        {
          "id": "c.page_entry.contains.page_login",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_login",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": "LoginPage",
        "featureName": null,
        "entryStateId": "page.LoginPage.guest.Init"
      }
    },
    {
      "id": "page_register",
      "name": "Register Page",
      "level": "page",
      "parentDiagramId": "page_entry",
      "roles": [
        "guest"
      ],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "③ Register Page",
        "order": 3
      },
      "groups": [],
      "states": [
        {
          "id": "page.RegisterPage.guest.Init",
          "label": "RegisterPage.Init",
          "type": "start",
          "groupId": null,
          "tags": [
            "page",
            "guest"
          ],
          "meta": {
            "diagramId": "page_register",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "RegisterPage.Init"
            }
          }
        },
        {
          "id": "page.RegisterPage.guest.Ready",
          "label": "RegisterPage.Ready",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page",
            "guest"
          ],
          "meta": {
            "diagramId": "page_register",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "RegisterPage.Ready"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.page_register.0002",
          "from": "page.RegisterPage.guest.Init",
          "to": "page.RegisterPage.guest.Ready",
          "event": "showRegisterForm",
          "roles": [
            "guest"
          ],
          "narrative": {
            "summary": "顯示註冊表單",
            "taskDescription": "在 RegisterPage.Init 顯示註冊表單並進入 Ready，可輸入必要欄位並準備送出。"
          },
          "validations": [
            {
              "id": "v.t.page_register.0002.01",
              "type": "element-visible",
              "description": "註冊表單至少包含 name/email/密碼欄位；送出前按鈕可用；不與 Header 重複顯示註冊入口。",
              "expected": null
            }
          ],
          "intent": {
            "category": "action",
            "summary": "showRegisterForm"
          },
          "meta": {
            "diagramId": "page_register",
            "source": {
              "raw": "RegisterPage.Init --> RegisterPage.Ready : showRegisterForm"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_entry.invokes.page_register.s.page_Entry_Init.to.page_RegisterPage_guest_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_entry",
            "stateId": "page.Entry.Init"
          },
          "to": {
            "diagramId": "page_register",
            "stateId": "page.RegisterPage.guest.Init"
          },
          "narrative": {
            "summary": "前往註冊頁",
            "taskDescription": "在 Entry.Init 觸發 chooseRegister 導航到 /register，並成功進入 RegisterPage.Init。"
          },
          "validations": [
            {
              "id": "v.c.page_entry.invokes.page_register.01",
              "type": "url-equals",
              "description": "導向 `/register` 並顯示註冊表單（僅建立 Member）；Header 不應同時重複出現第二個註冊入口（避免 Header + Page 重複 CTA）。",
              "expected": "/register"
            }
          ],
          "meta": {
            "reason": "chooseRegister | navigate /register",
            "action": "chooseRegister",
            "navigateTarget": "/register"
          }
        },
        {
          "id": "c.page_register.invokes.feature_auth_register.s.page_RegisterPage_guest_Ready.to.feature_AuthRegisterFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_register",
            "stateId": "page.RegisterPage.guest.Ready"
          },
          "to": {
            "diagramId": "feature_auth_register",
            "stateId": null
          },
          "narrative": {
            "summary": "送出註冊並進入註冊功能流程",
            "taskDescription": "在 RegisterPage.Ready 送出註冊（submitRegister），導入 AuthRegisterFeature.Init 並開始註冊流程。"
          },
          "validations": [
            {
              "id": "v.c.page_register.invokes.feature_auth_register.01",
              "type": "semantic-check",
              "description": "送出時 UI 顯示 loading 並禁用提交；API 成功回應會建立 Member 帳號並產生 token/session；伺服器端以安全雜湊儲存密碼。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "submitRegister | navigate AuthRegisterFeature",
            "action": "submitRegister",
            "navigateTarget": "AuthRegisterFeature"
          }
        },
        {
          "id": "c.page_register.invokes.page_login.s.page_RegisterPage_guest_Ready.to.page_LoginPage_guest_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_register",
            "stateId": "page.RegisterPage.guest.Ready"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.guest.Init"
          },
          "narrative": {
            "summary": "由註冊頁前往登入頁",
            "taskDescription": "在 RegisterPage.Ready 觸發 chooseLogin 導航到 /login，並進入 LoginPage.Init。"
          },
          "validations": [
            {
              "id": "v.c.page_register.invokes.page_login.01",
              "type": "url-equals",
              "description": "導向 `/login` 並保留 returnTo（若有）；不新增不必要的頁面或流程。",
              "expected": "/login"
            }
          ],
          "meta": {
            "reason": "chooseLogin | navigate /login",
            "action": "chooseLogin",
            "navigateTarget": "/login"
          }
        },
        {
          "id": "c.page_register.invokes.page_activity_list_guest.s.page_RegisterPage_guest_Ready.to.page_ActivityListPage_guest_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_register",
            "stateId": "page.RegisterPage.guest.Ready"
          },
          "to": {
            "diagramId": "page_activity_list_guest",
            "stateId": null
          },
          "narrative": {
            "summary": "取消註冊並回到活動列表（訪客）",
            "taskDescription": "在 RegisterPage.Ready 觸發 cancelRegister 導航到 /activities，並回到訪客活動列表初始狀態。"
          },
          "validations": [
            {
              "id": "v.c.page_register.invokes.page_activity_list_guest.01",
              "type": "url-equals",
              "description": "導回 `/activities` 並仍為 Guest；Header 仍僅顯示「活動/登入/註冊」。",
              "expected": "/activities"
            }
          ],
          "meta": {
            "reason": "cancelRegister | navigate /activities",
            "action": "cancelRegister",
            "navigateTarget": "/activities"
          }
        },
        {
          "id": "c.page_login.invokes.page_register.s.page_LoginPage_guest_Ready.to.page_RegisterPage_guest_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.guest.Ready"
          },
          "to": {
            "diagramId": "page_register",
            "stateId": "page.RegisterPage.guest.Init"
          },
          "narrative": {
            "summary": "由登入頁前往註冊頁",
            "taskDescription": "在 LoginPage.Ready 觸發 chooseRegister 導航到 /register，並進入 RegisterPage.Init。"
          },
          "validations": [
            {
              "id": "v.c.page_login.invokes.page_register.01",
              "type": "url-equals",
              "description": "導向 `/register` 並保留 returnTo（若有）；UI 不遺失使用者原本想前往的目標頁資訊。",
              "expected": "/register"
            }
          ],
          "meta": {
            "reason": "chooseRegister | navigate /register",
            "action": "chooseRegister",
            "navigateTarget": "/register"
          }
        },
        {
          "id": "c.feature_auth_register.invokes.page_register.s.feature_AuthRegisterFeature_Failed.to.page_RegisterPage_guest_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_register",
            "stateId": null
          },
          "to": {
            "diagramId": "page_register",
            "stateId": "page.RegisterPage.guest.Init"
          },
          "narrative": {
            "summary": "註冊失敗後回到註冊頁",
            "taskDescription": "在 AuthRegisterFeature.Failed 觸發 backToRegister 導航到 /register，並回到註冊頁以便修正重試。"
          },
          "validations": [
            {
              "id": "v.c.feature_auth_register.invokes.page_register.01",
              "type": "url-equals",
              "description": "回到註冊頁並可修正表單；保留錯誤提示。",
              "expected": "/register"
            }
          ],
          "meta": {
            "reason": "backToRegister | navigate /register",
            "action": "backToRegister",
            "navigateTarget": "/register"
          }
        },
        {
          "id": "c.feature_auth_register.invokes.page_register.s.feature_AuthRegisterFeature_Canceled.to.page_RegisterPage_guest_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_register",
            "stateId": null
          },
          "to": {
            "diagramId": "page_register",
            "stateId": "page.RegisterPage.guest.Init"
          },
          "narrative": {
            "summary": "取消註冊後回到註冊頁",
            "taskDescription": "在 AuthRegisterFeature.Canceled 觸發 backToRegister 導航到 /register，並回到註冊頁。"
          },
          "validations": [
            {
              "id": "v.c.feature_auth_register.invokes.page_register.02",
              "type": "url-equals",
              "description": "回到註冊頁；不建立帳號。",
              "expected": "/register"
            }
          ],
          "meta": {
            "reason": "backToRegister | navigate /register",
            "action": "backToRegister",
            "navigateTarget": "/register"
          }
        },
        {
          "id": "c.page_entry.contains.page_register",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_register",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": "RegisterPage",
        "featureName": null,
        "entryStateId": "page.RegisterPage.guest.Init"
      }
    },
    {
      "id": "page_activity_list_guest",
      "name": "Activity List Page - Guest",
      "level": "page",
      "parentDiagramId": "page_entry",
      "roles": [
        "guest"
      ],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "④ Activity List Page - Guest",
        "order": 4
      },
      "groups": [],
      "states": [
        {
          "id": "page.ActivityListPage.guest.Init",
          "label": "ActivityListPage.Guest.Init",
          "type": "start",
          "groupId": null,
          "tags": [
            "page",
            "guest"
          ],
          "meta": {
            "diagramId": "page_activity_list_guest",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ActivityListPage.Guest.Init"
            }
          }
        },
        {
          "id": "page.ActivityListPage.guest.Ready",
          "label": "ActivityListPage.Guest.Ready",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page",
            "guest"
          ],
          "meta": {
            "diagramId": "page_activity_list_guest",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ActivityListPage.Guest.Ready"
            }
          }
        },
        {
          "id": "page.ActivityListPage.guest.Empty",
          "label": "ActivityListPage.Guest.Empty",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page",
            "guest"
          ],
          "meta": {
            "diagramId": "page_activity_list_guest",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ActivityListPage.Guest.Empty"
            }
          }
        },
        {
          "id": "page.ActivityListPage.guest.Failed",
          "label": "ActivityListPage.Guest.Failed",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page",
            "guest"
          ],
          "meta": {
            "diagramId": "page_activity_list_guest",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ActivityListPage.Guest.Failed"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.page_activity_list_guest.0002",
          "from": "page.ActivityListPage.guest.Init",
          "to": "page.ActivityListPage.guest.Ready",
          "event": "loadActivities",
          "roles": [
            "guest"
          ],
          "narrative": {
            "summary": "載入活動列表（Guest）",
            "taskDescription": "呼叫活動列表 API 並在成功後進入 Ready。"
          },
          "validations": [
            {
              "id": "v.t.page_activity_list_guest.0002.01",
              "type": "network-success",
              "description": "API 成功回傳活動列表且只包含 `published` 與 `full`；UI 顯示活動名稱/日期/地點/目前報名人數與容量；Guest 不顯示「已報名」狀態。",
              "expected": "HTTP 200"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "loadActivities"
          },
          "meta": {
            "diagramId": "page_activity_list_guest",
            "source": {
              "raw": "ActivityListPage.Guest.Init --> ActivityListPage.Guest.Ready : loadActivities"
            }
          }
        },
        {
          "id": "t.page_activity_list_guest.0003",
          "from": "page.ActivityListPage.guest.Init",
          "to": "page.ActivityListPage.guest.Empty",
          "event": "loadEmpty",
          "roles": [
            "guest"
          ],
          "narrative": {
            "summary": "活動列表為空（Guest）",
            "taskDescription": "API 成功但無資料時進入 Empty。"
          },
          "validations": [
            {
              "id": "v.t.page_activity_list_guest.0003.01",
              "type": "network-success",
              "description": "API 成功但無資料時顯示 Empty 狀態（例如「目前沒有可公開活動」）；仍可透過 Header 進行登入/註冊。",
              "expected": "HTTP 200 (empty list)"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "loadEmpty"
          },
          "meta": {
            "diagramId": "page_activity_list_guest",
            "source": {
              "raw": "ActivityListPage.Guest.Init --> ActivityListPage.Guest.Empty : loadEmpty"
            }
          }
        },
        {
          "id": "t.page_activity_list_guest.0004",
          "from": "page.ActivityListPage.guest.Init",
          "to": "page.ActivityListPage.guest.Failed",
          "event": "loadFailed",
          "roles": [
            "guest"
          ],
          "narrative": {
            "summary": "載入活動列表失敗（Guest）",
            "taskDescription": "活動列表 API 失敗時進入 Failed，顯示錯誤並提供重試。"
          },
          "validations": [
            {
              "id": "v.t.page_activity_list_guest.0004.01",
              "type": "network-failed",
              "description": "API 失敗時顯示 Failed 狀態與可重試入口；錯誤訊息不可含糊，且不暴露不必要的技術細節。",
              "expected": "HTTP 5xx"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "loadFailed"
          },
          "meta": {
            "diagramId": "page_activity_list_guest",
            "source": {
              "raw": "ActivityListPage.Guest.Init --> ActivityListPage.Guest.Failed : loadFailed"
            }
          }
        },
        {
          "id": "t.page_activity_list_guest.0005",
          "from": "page.ActivityListPage.guest.Empty",
          "to": "page.ActivityListPage.guest.Init",
          "event": "refresh",
          "roles": [
            "guest"
          ],
          "narrative": {
            "summary": "重新載入活動列表（Guest）",
            "taskDescription": "在 Empty 狀態觸發 refresh，回到 Init 並重新載入。"
          },
          "validations": [
            {
              "id": "v.t.page_activity_list_guest.0005.01",
              "type": "url-equals",
              "description": "觸發重新載入並回到列表載入流程；UI 會顯示 loading。",
              "expected": "/activities"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "refresh"
          },
          "meta": {
            "diagramId": "page_activity_list_guest",
            "source": {
              "raw": "ActivityListPage.Guest.Empty --> ActivityListPage.Guest.Init : refresh | navigate /activities"
            }
          }
        },
        {
          "id": "t.page_activity_list_guest.0006",
          "from": "page.ActivityListPage.guest.Failed",
          "to": "page.ActivityListPage.guest.Init",
          "event": "retryLoad",
          "roles": [
            "guest"
          ],
          "narrative": {
            "summary": "重試載入活動列表（Guest）",
            "taskDescription": "在 Failed 狀態觸發 retryLoad，回到 Init 並重新載入。"
          },
          "validations": [
            {
              "id": "v.t.page_activity_list_guest.0006.01",
              "type": "semantic-check",
              "description": "重試會再次呼叫列表 API；若成功則轉入 Ready/Empty；若失敗則回到 Failed。",
              "expected": null
            }
          ],
          "intent": {
            "category": "action",
            "summary": "retryLoad"
          },
          "meta": {
            "diagramId": "page_activity_list_guest",
            "source": {
              "raw": "ActivityListPage.Guest.Failed --> ActivityListPage.Guest.Init : retryLoad | navigate /activities"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_entry.invokes.page_activity_list_guest.s.page_Entry_Init.to.page_ActivityListPage_guest_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_entry",
            "stateId": "page.Entry.Init"
          },
          "to": {
            "diagramId": "page_activity_list_guest",
            "stateId": "page.ActivityListPage.guest.Init"
          },
          "narrative": {
            "summary": "以訪客身分前往活動列表",
            "taskDescription": "在 Entry.Init 觸發 continueAsGuest 導航到 /activities，並成功進入 ActivityListPage.Guest.Init。"
          },
          "validations": [
            {
              "id": "v.c.page_entry.invokes.page_activity_list_guest.01",
              "type": "url-equals",
              "description": "導向 `/activities` 並顯示公開活動列表；Header 僅顯示「活動/登入/註冊」，不顯示「我的活動/管理後台/登出」。",
              "expected": "/activities"
            }
          ],
          "meta": {
            "reason": "continueAsGuest | navigate /activities",
            "action": "continueAsGuest",
            "navigateTarget": "/activities"
          }
        },
        {
          "id": "c.page_login.invokes.page_activity_list_guest.s.page_LoginPage_guest_Ready.to.page_ActivityListPage_guest_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.guest.Ready"
          },
          "to": {
            "diagramId": "page_activity_list_guest",
            "stateId": "page.ActivityListPage.guest.Init"
          },
          "narrative": {
            "summary": "取消登入並回到活動列表（訪客）",
            "taskDescription": "在 LoginPage.Ready 觸發 cancelLogin 導航到 /activities，並回到訪客活動列表初始狀態。"
          },
          "validations": [
            {
              "id": "v.c.page_login.invokes.page_activity_list_guest.01",
              "type": "url-equals",
              "description": "導回 `/activities` 並仍以 Guest 身分呈現；Header 仍僅顯示「活動/登入/註冊」。",
              "expected": "/activities"
            }
          ],
          "meta": {
            "reason": "cancelLogin | navigate /activities",
            "action": "cancelLogin",
            "navigateTarget": "/activities"
          }
        },
        {
          "id": "c.page_register.invokes.page_activity_list_guest.s.page_RegisterPage_guest_Ready.to.page_ActivityListPage_guest_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_register",
            "stateId": "page.RegisterPage.guest.Ready"
          },
          "to": {
            "diagramId": "page_activity_list_guest",
            "stateId": "page.ActivityListPage.guest.Init"
          },
          "narrative": {
            "summary": "取消註冊並回到活動列表（訪客）",
            "taskDescription": "在 RegisterPage.Ready 觸發 cancelRegister 導航到 /activities，並回到訪客活動列表初始狀態。"
          },
          "validations": [
            {
              "id": "v.c.page_register.invokes.page_activity_list_guest.01",
              "type": "url-equals",
              "description": "導回 `/activities` 並仍為 Guest；Header 仍僅顯示「活動/登入/註冊」。",
              "expected": "/activities"
            }
          ],
          "meta": {
            "reason": "cancelRegister | navigate /activities",
            "action": "cancelRegister",
            "navigateTarget": "/activities"
          }
        },
        {
          "id": "c.page_activity_list_guest.invokes.page_activity_detail_guest.s.page_ActivityListPage_guest_Ready.to.page_ActivityDetailPage_guest_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list_guest",
            "stateId": "page.ActivityListPage.guest.Ready"
          },
          "to": {
            "diagramId": "page_activity_detail_guest",
            "stateId": null
          },
          "narrative": {
            "summary": "由列表進入活動詳情（Guest）",
            "taskDescription": "在列表 Ready 點擊活動，導向 /activities/:activityId 並進入詳情頁 Init。"
          },
          "validations": [
            {
              "id": "v.c.page_activity_list_guest.invokes.page_activity_detail_guest.01",
              "type": "url-equals",
              "description": "點擊活動後導向對應詳情路由；ActivityId 參數正確；UI 進入詳情載入流程。",
              "expected": "/activities/:activityId"
            }
          ],
          "meta": {
            "reason": "openActivity | navigate /activities/:activityId",
            "action": "openActivity",
            "navigateTarget": "/activities/:activityId"
          }
        },
        {
          "id": "c.page_activity_list_guest.invokes.page_login.s.page_ActivityListPage_guest_Ready.to.page_LoginPage_guest_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list_guest",
            "stateId": "page.ActivityListPage.guest.Ready"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.guest.Init"
          },
          "narrative": {
            "summary": "由活動列表前往登入頁（Guest）",
            "taskDescription": "在列表 Ready 觸發 chooseLogin 導向 /login。"
          },
          "validations": [
            {
              "id": "v.c.page_activity_list_guest.invokes.page_login.01",
              "type": "url-equals",
              "description": "導向登入頁並維持 Guest 導覽可見性規則；Header 不出現 Member/Admin 專屬選項。",
              "expected": "/login"
            }
          ],
          "meta": {
            "reason": "chooseLogin | navigate /login",
            "action": "chooseLogin",
            "navigateTarget": "/login"
          }
        },
        {
          "id": "c.page_activity_list_guest.invokes.page_register.s.page_ActivityListPage_guest_Ready.to.page_RegisterPage_guest_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list_guest",
            "stateId": "page.ActivityListPage.guest.Ready"
          },
          "to": {
            "diagramId": "page_register",
            "stateId": "page.RegisterPage.guest.Init"
          },
          "narrative": {
            "summary": "由活動列表前往註冊頁（Guest）",
            "taskDescription": "在列表 Ready 觸發 chooseRegister 導向 /register。"
          },
          "validations": [
            {
              "id": "v.c.page_activity_list_guest.invokes.page_register.01",
              "type": "url-equals",
              "description": "導向註冊頁；不提供建立 Admin。",
              "expected": "/register"
            }
          ],
          "meta": {
            "reason": "chooseRegister | navigate /register",
            "action": "chooseRegister",
            "navigateTarget": "/register"
          }
        },
        {
          "id": "c.page_activity_list_guest.invokes.page_login.s.page_ActivityListPage_guest_Empty.to.page_LoginPage_guest_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list_guest",
            "stateId": "page.ActivityListPage.guest.Empty"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.guest.Init"
          },
          "narrative": {
            "summary": "Empty 狀態下前往登入頁（Guest）",
            "taskDescription": "在列表 Empty 觸發 chooseLogin 導向 /login。"
          },
          "validations": [
            {
              "id": "v.c.page_activity_list_guest.invokes.page_login.02",
              "type": "url-equals",
              "description": "Empty 狀態下仍可進入登入頁；導覽規則一致。",
              "expected": "/login"
            }
          ],
          "meta": {
            "reason": "chooseLogin | navigate /login",
            "action": "chooseLogin",
            "navigateTarget": "/login"
          }
        },
        {
          "id": "c.page_activity_list_guest.invokes.page_register.s.page_ActivityListPage_guest_Empty.to.page_RegisterPage_guest_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list_guest",
            "stateId": "page.ActivityListPage.guest.Empty"
          },
          "to": {
            "diagramId": "page_register",
            "stateId": "page.RegisterPage.guest.Init"
          },
          "narrative": {
            "summary": "Empty 狀態下前往註冊頁（Guest）",
            "taskDescription": "在列表 Empty 觸發 chooseRegister 導向 /register。"
          },
          "validations": [
            {
              "id": "v.c.page_activity_list_guest.invokes.page_register.02",
              "type": "url-equals",
              "description": "Empty 狀態下仍可進入註冊頁；註冊僅建立 Member。",
              "expected": "/register"
            }
          ],
          "meta": {
            "reason": "chooseRegister | navigate /register",
            "action": "chooseRegister",
            "navigateTarget": "/register"
          }
        },
        {
          "id": "c.feature_logout.invokes.page_activity_list_guest.s.feature_LogoutFeature_Done.to.page_ActivityListPage_guest_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_logout",
            "stateId": "feature.LogoutFeature.Done"
          },
          "to": {
            "diagramId": "page_activity_list_guest",
            "stateId": "page.ActivityListPage.guest.Init"
          },
          "narrative": {
            "summary": "登出完成回到訪客活動列表",
            "taskDescription": "登出成功後導回 /activities 並回到 Guest 活動列表初始狀態。"
          },
          "validations": [
            {
              "id": "v.c.feature_logout.invokes.page_activity_list_guest.01",
              "type": "url-equals",
              "description": "回到 Guest 活動列表；不顯示我的活動/管理後台/登出。",
              "expected": "/activities"
            }
          ],
          "meta": {
            "reason": "returnToGuestList | navigate /activities",
            "action": "returnToGuestList",
            "navigateTarget": "/activities"
          }
        },
        {
          "id": "c.page_entry.contains.page_activity_list_guest",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_activity_list_guest",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": "ActivityListPage",
        "featureName": null,
        "entryStateId": "page.ActivityListPage.guest.Init"
      }
    },
    {
      "id": "page_activity_list_member",
      "name": "Activity List Page - Member",
      "level": "page",
      "parentDiagramId": "page_entry",
      "roles": [
        "member"
      ],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "⑤ Activity List Page - Member",
        "order": 5
      },
      "groups": [],
      "states": [
        {
          "id": "page.ActivityListPage.member.Init",
          "label": "ActivityListPage.Member.Init",
          "type": "start",
          "groupId": null,
          "tags": [
            "page",
            "member"
          ],
          "meta": {
            "diagramId": "page_activity_list_member",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ActivityListPage.Member.Init"
            }
          }
        },
        {
          "id": "page.ActivityListPage.member.Ready",
          "label": "ActivityListPage.Member.Ready",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page",
            "member"
          ],
          "meta": {
            "diagramId": "page_activity_list_member",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ActivityListPage.Member.Ready"
            }
          }
        },
        {
          "id": "page.ActivityListPage.member.Empty",
          "label": "ActivityListPage.Member.Empty",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page",
            "member"
          ],
          "meta": {
            "diagramId": "page_activity_list_member",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ActivityListPage.Member.Empty"
            }
          }
        },
        {
          "id": "page.ActivityListPage.member.Failed",
          "label": "ActivityListPage.Member.Failed",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page",
            "member"
          ],
          "meta": {
            "diagramId": "page_activity_list_member",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ActivityListPage.Member.Failed"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.page_activity_list_member.0002",
          "from": "page.ActivityListPage.member.Init",
          "to": "page.ActivityListPage.member.Ready",
          "event": "loadActivities",
          "roles": [
            "member"
          ],
          "narrative": {
            "summary": "載入活動列表（Member）",
            "taskDescription": "呼叫活動列表 API，成功後顯示活動與報名狀態並進入 Ready。"
          },
          "validations": [
            {
              "id": "v.t.page_activity_list_member.0002.01",
              "type": "network-success",
              "description": "API 成功回傳 `published/full` 活動；UI 顯示每個活動的報名狀態（可報名/已報名/額滿）；「已報名」需與使用者實際 Registration 一致。",
              "expected": "HTTP 200"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "loadActivities"
          },
          "meta": {
            "diagramId": "page_activity_list_member",
            "source": {
              "raw": "ActivityListPage.Member.Init --> ActivityListPage.Member.Ready : loadActivities"
            }
          }
        },
        {
          "id": "t.page_activity_list_member.0003",
          "from": "page.ActivityListPage.member.Init",
          "to": "page.ActivityListPage.member.Empty",
          "event": "loadEmpty",
          "roles": [
            "member"
          ],
          "narrative": {
            "summary": "活動列表為空（Member）",
            "taskDescription": "API 成功但無資料時進入 Empty。"
          },
          "validations": [
            {
              "id": "v.t.page_activity_list_member.0003.01",
              "type": "network-success",
              "description": "Empty 狀態顯示明確空畫面文案；Header 仍維持 Member 導覽規則。",
              "expected": "HTTP 200 (empty list)"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "loadEmpty"
          },
          "meta": {
            "diagramId": "page_activity_list_member",
            "source": {
              "raw": "ActivityListPage.Member.Init --> ActivityListPage.Member.Empty : loadEmpty"
            }
          }
        },
        {
          "id": "t.page_activity_list_member.0004",
          "from": "page.ActivityListPage.member.Init",
          "to": "page.ActivityListPage.member.Failed",
          "event": "loadFailed",
          "roles": [
            "member"
          ],
          "narrative": {
            "summary": "載入活動列表失敗（Member）",
            "taskDescription": "活動列表 API 失敗時進入 Failed，顯示錯誤並提供重試。"
          },
          "validations": [
            {
              "id": "v.t.page_activity_list_member.0004.01",
              "type": "network-failed",
              "description": "Failed 狀態顯示錯誤與重試入口；不顯示 Guest 專屬 CTA（登入/註冊）。",
              "expected": "HTTP 5xx"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "loadFailed"
          },
          "meta": {
            "diagramId": "page_activity_list_member",
            "source": {
              "raw": "ActivityListPage.Member.Init --> ActivityListPage.Member.Failed : loadFailed"
            }
          }
        },
        {
          "id": "t.page_activity_list_member.0005",
          "from": "page.ActivityListPage.member.Empty",
          "to": "page.ActivityListPage.member.Init",
          "event": "refresh",
          "roles": [
            "member"
          ],
          "narrative": {
            "summary": "重新載入活動列表（Member）",
            "taskDescription": "在 Empty 狀態觸發 refresh，回到 Init 並重新載入。"
          },
          "validations": [
            {
              "id": "v.t.page_activity_list_member.0005.01",
              "type": "semantic-check",
              "description": "重新載入列表；成功後顯示 Ready/Empty。",
              "expected": null
            }
          ],
          "intent": {
            "category": "action",
            "summary": "refresh"
          },
          "meta": {
            "diagramId": "page_activity_list_member",
            "source": {
              "raw": "ActivityListPage.Member.Empty --> ActivityListPage.Member.Init : refresh | navigate /activities"
            }
          }
        },
        {
          "id": "t.page_activity_list_member.0006",
          "from": "page.ActivityListPage.member.Failed",
          "to": "page.ActivityListPage.member.Init",
          "event": "retryLoad",
          "roles": [
            "member"
          ],
          "narrative": {
            "summary": "重試載入活動列表（Member）",
            "taskDescription": "在 Failed 狀態觸發 retryLoad，回到 Init 並重新載入。"
          },
          "validations": [
            {
              "id": "v.t.page_activity_list_member.0006.01",
              "type": "semantic-check",
              "description": "重試會重新呼叫 API；錯誤狀態可恢復。",
              "expected": null
            }
          ],
          "intent": {
            "category": "action",
            "summary": "retryLoad"
          },
          "meta": {
            "diagramId": "page_activity_list_member",
            "source": {
              "raw": "ActivityListPage.Member.Failed --> ActivityListPage.Member.Init : retryLoad | navigate /activities"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.feature_auth_login.invokes.page_activity_list_member.s.feature_AuthLoginFeature_Done.to.page_ActivityListPage_member_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_login",
            "stateId": null
          },
          "to": {
            "diagramId": "page_activity_list_member",
            "stateId": "page.ActivityListPage.member.Init"
          },
          "narrative": {
            "summary": "登入成功後導向活動列表（Member）",
            "taskDescription": "在 AuthLoginFeature.Done 觸發 loginSucceededMemberDefault 導航到 /activities，並進入 Member 視角的 ActivityListPage.Init。"
          },
          "validations": [
            {
              "id": "v.c.feature_auth_login.invokes.page_activity_list_member.01",
              "type": "url-equals",
              "description": "若角色為 Member 且無 returnTo，導向 Member 視角的活動列表；Header 顯示「活動/我的活動/登出」，不顯示管理後台。",
              "expected": "/activities"
            }
          ],
          "meta": {
            "reason": "loginSucceededMemberDefault | navigate /activities",
            "action": "loginSucceededMemberDefault",
            "navigateTarget": "/activities"
          }
        },
        {
          "id": "c.feature_auth_register.invokes.page_activity_list_member.s.feature_AuthRegisterFeature_Done.to.page_ActivityListPage_member_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_register",
            "stateId": null
          },
          "to": {
            "diagramId": "page_activity_list_member",
            "stateId": "page.ActivityListPage.member.Init"
          },
          "narrative": {
            "summary": "註冊成功後導向活動列表（Member）",
            "taskDescription": "在 AuthRegisterFeature.Done 觸發 registerSucceededDefault 導航到 /activities，並進入 Member 視角的 ActivityListPage.Init。"
          },
          "validations": [
            {
              "id": "v.c.feature_auth_register.invokes.page_activity_list_member.01",
              "type": "url-equals",
              "description": "無 returnTo 時導向 Member 活動列表；Header 顯示 Member 導覽。",
              "expected": "/activities"
            }
          ],
          "meta": {
            "reason": "registerSucceededDefault | navigate /activities",
            "action": "registerSucceededDefault",
            "navigateTarget": "/activities"
          }
        },
        {
          "id": "c.page_activity_list_member.invokes.page_activity_detail_member.s.page_ActivityListPage_member_Ready.to.page_ActivityDetailPage_member_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list_member",
            "stateId": "page.ActivityListPage.member.Ready"
          },
          "to": {
            "diagramId": "page_activity_detail_member",
            "stateId": null
          },
          "narrative": {
            "summary": "由列表進入活動詳情（Member）",
            "taskDescription": "在列表 Ready 點擊活動，導向 /activities/:activityId 並進入 Member 詳情頁 Init。"
          },
          "validations": [
            {
              "id": "v.c.page_activity_list_member.invokes.page_activity_detail_member.01",
              "type": "url-equals",
              "description": "導向詳情；進入後能顯示「已報名/可報名/額滿」並與資料一致。",
              "expected": "/activities/:activityId"
            }
          ],
          "meta": {
            "reason": "openActivity | navigate /activities/:activityId",
            "action": "openActivity",
            "navigateTarget": "/activities/:activityId"
          }
        },
        {
          "id": "c.page_activity_list_member.invokes.page_my_activities_member.s.page_ActivityListPage_member_Ready.to.page_MyActivitiesPage_member_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list_member",
            "stateId": "page.ActivityListPage.member.Ready"
          },
          "to": {
            "diagramId": "page_my_activities_member",
            "stateId": null
          },
          "narrative": {
            "summary": "前往我的活動（Member）",
            "taskDescription": "在列表 Ready 觸發 openMyActivities 導向 /my-activities，並進入我的活動 Init。"
          },
          "validations": [
            {
              "id": "v.c.page_activity_list_member.invokes.page_my_activities_member.01",
              "type": "url-equals",
              "description": "導向 `/my-activities`；API 若回傳未授權則不應發生（因已登入）；UI 顯示我的活動載入狀態。",
              "expected": "/my-activities"
            }
          ],
          "meta": {
            "reason": "openMyActivities | navigate /my-activities",
            "action": "openMyActivities",
            "navigateTarget": "/my-activities"
          }
        },
        {
          "id": "c.page_activity_list_member.invokes.feature_logout.s.page_ActivityListPage_member_Ready.to.feature_LogoutFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list_member",
            "stateId": "page.ActivityListPage.member.Ready"
          },
          "to": {
            "diagramId": "feature_logout",
            "stateId": "feature.LogoutFeature.Init"
          },
          "narrative": {
            "summary": "由列表觸發登出（Member）",
            "taskDescription": "在列表 Ready 觸發 chooseLogout，進入 LogoutFeature.Init 執行登出流程。"
          },
          "validations": [
            {
              "id": "v.c.page_activity_list_member.invokes.feature_logout.01",
              "type": "semantic-check",
              "description": "觸發登出流程；登出完成後 token/session 失效。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "chooseLogout | navigate LogoutFeature",
            "action": "chooseLogout",
            "navigateTarget": "LogoutFeature"
          }
        },
        {
          "id": "c.page_activity_list_member.invokes.page_my_activities_member.s.page_ActivityListPage_member_Empty.to.page_MyActivitiesPage_member_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list_member",
            "stateId": "page.ActivityListPage.member.Empty"
          },
          "to": {
            "diagramId": "page_my_activities_member",
            "stateId": null
          },
          "narrative": {
            "summary": "Empty 狀態下前往我的活動（Member）",
            "taskDescription": "在列表 Empty 觸發 openMyActivities 導向 /my-activities。"
          },
          "validations": [
            {
              "id": "v.c.page_activity_list_member.invokes.page_my_activities_member.02",
              "type": "url-equals",
              "description": "Empty 狀態下仍可導向我的活動；導覽規則一致。",
              "expected": "/my-activities"
            }
          ],
          "meta": {
            "reason": "openMyActivities | navigate /my-activities",
            "action": "openMyActivities",
            "navigateTarget": "/my-activities"
          }
        },
        {
          "id": "c.page_activity_list_member.invokes.feature_logout.s.page_ActivityListPage_member_Empty.to.feature_LogoutFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list_member",
            "stateId": "page.ActivityListPage.member.Empty"
          },
          "to": {
            "diagramId": "feature_logout",
            "stateId": "feature.LogoutFeature.Init"
          },
          "narrative": {
            "summary": "Empty 狀態下登出（Member）",
            "taskDescription": "在列表 Empty 觸發 chooseLogout，進入 LogoutFeature.Init。"
          },
          "validations": [
            {
              "id": "v.c.page_activity_list_member.invokes.feature_logout.02",
              "type": "semantic-check",
              "description": "Empty 狀態下仍可登出並回到 Guest 導覽規則。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "chooseLogout | navigate LogoutFeature",
            "action": "chooseLogout",
            "navigateTarget": "LogoutFeature"
          }
        },
        {
          "id": "c.page_entry.contains.page_activity_list_member",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_activity_list_member",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": "ActivityListPage",
        "featureName": null,
        "entryStateId": "page.ActivityListPage.member.Init"
      }
    },
    {
      "id": "page_activity_list_admin",
      "name": "Activity List Page - Admin",
      "level": "page",
      "parentDiagramId": "page_entry",
      "roles": [
        "admin"
      ],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "⑥ Activity List Page - Admin",
        "order": 6
      },
      "groups": [],
      "states": [
        {
          "id": "page.ActivityListPage.admin.Init",
          "label": "ActivityListPage.Admin.Init",
          "type": "start",
          "groupId": null,
          "tags": [
            "page",
            "admin"
          ],
          "meta": {
            "diagramId": "page_activity_list_admin",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ActivityListPage.Admin.Init"
            }
          }
        },
        {
          "id": "page.ActivityListPage.admin.Ready",
          "label": "ActivityListPage.Admin.Ready",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page",
            "admin"
          ],
          "meta": {
            "diagramId": "page_activity_list_admin",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ActivityListPage.Admin.Ready"
            }
          }
        },
        {
          "id": "page.ActivityListPage.admin.Empty",
          "label": "ActivityListPage.Admin.Empty",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page",
            "admin"
          ],
          "meta": {
            "diagramId": "page_activity_list_admin",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ActivityListPage.Admin.Empty"
            }
          }
        },
        {
          "id": "page.ActivityListPage.admin.Failed",
          "label": "ActivityListPage.Admin.Failed",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page",
            "admin"
          ],
          "meta": {
            "diagramId": "page_activity_list_admin",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ActivityListPage.Admin.Failed"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.page_activity_list_admin.0002",
          "from": "page.ActivityListPage.admin.Init",
          "to": "page.ActivityListPage.admin.Ready",
          "event": "loadActivities",
          "roles": [
            "admin"
          ],
          "narrative": {
            "summary": "載入活動列表（Admin）",
            "taskDescription": "呼叫活動列表 API，成功後顯示活動與報名狀態並進入 Ready。"
          },
          "validations": [
            {
              "id": "v.t.page_activity_list_admin.0002.01",
              "type": "network-success",
              "description": "API 成功回傳 `published/full` 活動；UI 顯示報名狀態（可報名/已報名/額滿）且與資料一致。",
              "expected": "HTTP 200"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "loadActivities"
          },
          "meta": {
            "diagramId": "page_activity_list_admin",
            "source": {
              "raw": "ActivityListPage.Admin.Init --> ActivityListPage.Admin.Ready : loadActivities"
            }
          }
        },
        {
          "id": "t.page_activity_list_admin.0003",
          "from": "page.ActivityListPage.admin.Init",
          "to": "page.ActivityListPage.admin.Empty",
          "event": "loadEmpty",
          "roles": [
            "admin"
          ],
          "narrative": {
            "summary": "活動列表為空（Admin）",
            "taskDescription": "API 成功但無資料時進入 Empty。"
          },
          "validations": [
            {
              "id": "v.t.page_activity_list_admin.0003.01",
              "type": "network-success",
              "description": "Empty 狀態仍顯示管理後台入口；導覽規則一致。",
              "expected": "HTTP 200 (empty list)"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "loadEmpty"
          },
          "meta": {
            "diagramId": "page_activity_list_admin",
            "source": {
              "raw": "ActivityListPage.Admin.Init --> ActivityListPage.Admin.Empty : loadEmpty"
            }
          }
        },
        {
          "id": "t.page_activity_list_admin.0004",
          "from": "page.ActivityListPage.admin.Init",
          "to": "page.ActivityListPage.admin.Failed",
          "event": "loadFailed",
          "roles": [
            "admin"
          ],
          "narrative": {
            "summary": "載入活動列表失敗（Admin）",
            "taskDescription": "活動列表 API 失敗時進入 Failed，顯示錯誤並提供重試。"
          },
          "validations": [
            {
              "id": "v.t.page_activity_list_admin.0004.01",
              "type": "network-failed",
              "description": "Failed 狀態顯示錯誤與重試入口；仍可前往管理後台。",
              "expected": "HTTP 5xx"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "loadFailed"
          },
          "meta": {
            "diagramId": "page_activity_list_admin",
            "source": {
              "raw": "ActivityListPage.Admin.Init --> ActivityListPage.Admin.Failed : loadFailed"
            }
          }
        },
        {
          "id": "t.page_activity_list_admin.0005",
          "from": "page.ActivityListPage.admin.Empty",
          "to": "page.ActivityListPage.admin.Init",
          "event": "refresh",
          "roles": [
            "admin"
          ],
          "narrative": {
            "summary": "重新載入活動列表（Admin）",
            "taskDescription": "在 Empty 狀態觸發 refresh，回到 Init 並重新載入。"
          },
          "validations": [
            {
              "id": "v.t.page_activity_list_admin.0005.01",
              "type": "semantic-check",
              "description": "重新載入列表。",
              "expected": null
            }
          ],
          "intent": {
            "category": "action",
            "summary": "refresh"
          },
          "meta": {
            "diagramId": "page_activity_list_admin",
            "source": {
              "raw": "ActivityListPage.Admin.Empty --> ActivityListPage.Admin.Init : refresh | navigate /activities"
            }
          }
        },
        {
          "id": "t.page_activity_list_admin.0006",
          "from": "page.ActivityListPage.admin.Failed",
          "to": "page.ActivityListPage.admin.Init",
          "event": "retryLoad",
          "roles": [
            "admin"
          ],
          "narrative": {
            "summary": "重試載入活動列表（Admin）",
            "taskDescription": "在 Failed 狀態觸發 retryLoad，回到 Init 並重新載入。"
          },
          "validations": [
            {
              "id": "v.t.page_activity_list_admin.0006.01",
              "type": "semantic-check",
              "description": "重試可恢復。",
              "expected": null
            }
          ],
          "intent": {
            "category": "action",
            "summary": "retryLoad"
          },
          "meta": {
            "diagramId": "page_activity_list_admin",
            "source": {
              "raw": "ActivityListPage.Admin.Failed --> ActivityListPage.Admin.Init : retryLoad | navigate /activities"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.feature_auth_login.invokes.page_activity_list_admin.s.feature_AuthLoginFeature_Done.to.page_ActivityListPage_admin_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_login",
            "stateId": null
          },
          "to": {
            "diagramId": "page_activity_list_admin",
            "stateId": "page.ActivityListPage.admin.Init"
          },
          "narrative": {
            "summary": "登入成功後導向活動列表（Admin）",
            "taskDescription": "在 AuthLoginFeature.Done 觸發 loginSucceededAdminDefault 導航到 /activities，並進入 Admin 視角的 ActivityListPage.Init。"
          },
          "validations": [
            {
              "id": "v.c.feature_auth_login.invokes.page_activity_list_admin.01",
              "type": "url-equals",
              "description": "若角色為 Admin 且無 returnTo，導向 Admin 視角的活動列表；Header 顯示管理後台入口。",
              "expected": "/activities"
            }
          ],
          "meta": {
            "reason": "loginSucceededAdminDefault | navigate /activities",
            "action": "loginSucceededAdminDefault",
            "navigateTarget": "/activities"
          }
        },
        {
          "id": "c.page_activity_list_admin.invokes.page_activity_detail_admin.s.page_ActivityListPage_admin_Ready.to.page_ActivityDetailPage_admin_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list_admin",
            "stateId": "page.ActivityListPage.admin.Ready"
          },
          "to": {
            "diagramId": "page_activity_detail_admin",
            "stateId": null
          },
          "narrative": {
            "summary": "由列表進入活動詳情（Admin）",
            "taskDescription": "在列表 Ready 點擊活動，導向 /activities/:activityId 並進入 Admin 詳情頁 Init。"
          },
          "validations": [
            {
              "id": "v.c.page_activity_list_admin.invokes.page_activity_detail_admin.01",
              "type": "url-equals",
              "description": "導向詳情；Admin 在詳情頁可進行報名/取消（若規則允許）。",
              "expected": "/activities/:activityId"
            }
          ],
          "meta": {
            "reason": "openActivity | navigate /activities/:activityId",
            "action": "openActivity",
            "navigateTarget": "/activities/:activityId"
          }
        },
        {
          "id": "c.page_activity_list_admin.invokes.page_my_activities_admin.s.page_ActivityListPage_admin_Ready.to.page_MyActivitiesPage_admin_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list_admin",
            "stateId": "page.ActivityListPage.admin.Ready"
          },
          "to": {
            "diagramId": "page_my_activities_admin",
            "stateId": null
          },
          "narrative": {
            "summary": "前往我的活動（Admin）",
            "taskDescription": "在列表 Ready 觸發 openMyActivities 導向 /my-activities，並進入 Admin 我的活動 Init。"
          },
          "validations": [
            {
              "id": "v.c.page_activity_list_admin.invokes.page_my_activities_admin.01",
              "type": "url-equals",
              "description": "導向我的活動並顯示已報名清單；資料一致。",
              "expected": "/my-activities"
            }
          ],
          "meta": {
            "reason": "openMyActivities | navigate /my-activities",
            "action": "openMyActivities",
            "navigateTarget": "/my-activities"
          }
        },
        {
          "id": "c.page_activity_list_admin.invokes.page_admin_activity_list.s.page_ActivityListPage_admin_Ready.to.page_AdminActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list_admin",
            "stateId": "page.ActivityListPage.admin.Ready"
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": null
          },
          "narrative": {
            "summary": "前往管理後台（Admin）",
            "taskDescription": "在列表 Ready 觸發 openAdminPanel 導向 /admin/activities，並進入後台列表 Init。"
          },
          "validations": [
            {
              "id": "v.c.page_activity_list_admin.invokes.page_admin_activity_list.01",
              "type": "url-equals",
              "description": "導向後台活動列表；若 token/session 失效則會在後台頁入口被導回登入（401）。",
              "expected": "/admin/activities"
            }
          ],
          "meta": {
            "reason": "openAdminPanel | navigate /admin/activities",
            "action": "openAdminPanel",
            "navigateTarget": "/admin/activities"
          }
        },
        {
          "id": "c.page_activity_list_admin.invokes.feature_logout.s.page_ActivityListPage_admin_Ready.to.feature_LogoutFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list_admin",
            "stateId": "page.ActivityListPage.admin.Ready"
          },
          "to": {
            "diagramId": "feature_logout",
            "stateId": "feature.LogoutFeature.Init"
          },
          "narrative": {
            "summary": "由列表觸發登出（Admin）",
            "taskDescription": "在列表 Ready 觸發 chooseLogout，進入 LogoutFeature.Init 執行登出流程。"
          },
          "validations": [
            {
              "id": "v.c.page_activity_list_admin.invokes.feature_logout.01",
              "type": "semantic-check",
              "description": "觸發登出，完成後回到 Guest 列表與 Guest 導覽。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "chooseLogout | navigate LogoutFeature",
            "action": "chooseLogout",
            "navigateTarget": "LogoutFeature"
          }
        },
        {
          "id": "c.page_activity_list_admin.invokes.page_admin_activity_list.s.page_ActivityListPage_admin_Empty.to.page_AdminActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list_admin",
            "stateId": "page.ActivityListPage.admin.Empty"
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": null
          },
          "narrative": {
            "summary": "Empty 狀態下前往後台（Admin）",
            "taskDescription": "在列表 Empty 觸發 openAdminPanel 導向 /admin/activities。"
          },
          "validations": [
            {
              "id": "v.c.page_activity_list_admin.invokes.page_admin_activity_list.02",
              "type": "url-equals",
              "description": "Empty 狀態下仍可進後台；權限需在後台入口再驗證。",
              "expected": "/admin/activities"
            }
          ],
          "meta": {
            "reason": "openAdminPanel | navigate /admin/activities",
            "action": "openAdminPanel",
            "navigateTarget": "/admin/activities"
          }
        },
        {
          "id": "c.page_activity_list_admin.invokes.feature_logout.s.page_ActivityListPage_admin_Empty.to.feature_LogoutFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list_admin",
            "stateId": "page.ActivityListPage.admin.Empty"
          },
          "to": {
            "diagramId": "feature_logout",
            "stateId": "feature.LogoutFeature.Init"
          },
          "narrative": {
            "summary": "Empty 狀態下登出（Admin）",
            "taskDescription": "在列表 Empty 觸發 chooseLogout 進入 LogoutFeature.Init。"
          },
          "validations": [
            {
              "id": "v.c.page_activity_list_admin.invokes.feature_logout.02",
              "type": "semantic-check",
              "description": "Empty 狀態下登出後回到 Guest。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "chooseLogout | navigate LogoutFeature",
            "action": "chooseLogout",
            "navigateTarget": "LogoutFeature"
          }
        },
        {
          "id": "c.page_entry.contains.page_activity_list_admin",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_activity_list_admin",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": "ActivityListPage",
        "featureName": null,
        "entryStateId": "page.ActivityListPage.admin.Init"
      }
    },
    {
      "id": "page_activity_detail_guest",
      "name": "Activity Detail Page - Guest",
      "level": "page",
      "parentDiagramId": "page_entry",
      "roles": [
        "guest"
      ],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "⑦ Activity Detail Page - Guest",
        "order": 7
      },
      "groups": [],
      "states": [
        {
          "id": "page.ActivityDetailPage.guest.Init",
          "label": "ActivityDetailPage.Guest.Init",
          "type": "start",
          "groupId": null,
          "tags": [
            "page",
            "guest"
          ],
          "meta": {
            "diagramId": "page_activity_detail_guest",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ActivityDetailPage.Guest.Init"
            }
          }
        },
        {
          "id": "page.ActivityDetailPage.guest.Ready",
          "label": "ActivityDetailPage.Guest.Ready",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page",
            "guest"
          ],
          "meta": {
            "diagramId": "page_activity_detail_guest",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ActivityDetailPage.Guest.Ready"
            }
          }
        },
        {
          "id": "page.ActivityDetailPage.guest.NotFound",
          "label": "ActivityDetailPage.Guest.NotFound",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page",
            "guest"
          ],
          "meta": {
            "diagramId": "page_activity_detail_guest",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ActivityDetailPage.Guest.NotFound"
            }
          }
        },
        {
          "id": "page.ActivityDetailPage.guest.Failed",
          "label": "ActivityDetailPage.Guest.Failed",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page",
            "guest"
          ],
          "meta": {
            "diagramId": "page_activity_detail_guest",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ActivityDetailPage.Guest.Failed"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.page_activity_detail_guest.0002",
          "from": "page.ActivityDetailPage.guest.Init",
          "to": "page.ActivityDetailPage.guest.Ready",
          "event": "loadActivity",
          "roles": [
            "guest"
          ],
          "narrative": {
            "summary": "載入活動詳情成功（Guest）",
            "taskDescription": "活動詳情 API 成功時進入 Ready。"
          },
          "validations": [
            {
              "id": "v.t.page_activity_detail_guest.0002.01",
              "type": "network-success",
              "description": "API 成功回傳活動詳情；UI 顯示 title/description/date/location/deadline/capacity/目前報名人數/status/剩餘名額；若 status=full 顯示「已額滿」。",
              "expected": "HTTP 200"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "loadActivity"
          },
          "meta": {
            "diagramId": "page_activity_detail_guest",
            "source": {
              "raw": "ActivityDetailPage.Guest.Init --> ActivityDetailPage.Guest.Ready : loadActivity"
            }
          }
        },
        {
          "id": "t.page_activity_detail_guest.0003",
          "from": "page.ActivityDetailPage.guest.Init",
          "to": "page.ActivityDetailPage.guest.NotFound",
          "event": "loadNotFound",
          "roles": [
            "guest"
          ],
          "narrative": {
            "summary": "活動不存在（Guest）",
            "taskDescription": "API 回 404 時進入 NotFound。"
          },
          "validations": [
            {
              "id": "v.t.page_activity_detail_guest.0003.01",
              "type": "network-failed",
              "description": "API 回傳 404（活動不存在）；UI 顯示找不到活動的明確訊息。",
              "expected": "HTTP 404"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "loadNotFound"
          },
          "meta": {
            "diagramId": "page_activity_detail_guest",
            "source": {
              "raw": "ActivityDetailPage.Guest.Init --> ActivityDetailPage.Guest.NotFound : loadNotFound"
            }
          }
        },
        {
          "id": "t.page_activity_detail_guest.0004",
          "from": "page.ActivityDetailPage.guest.Init",
          "to": "page.ActivityDetailPage.guest.Failed",
          "event": "loadFailed",
          "roles": [
            "guest"
          ],
          "narrative": {
            "summary": "載入活動詳情失敗（Guest）",
            "taskDescription": "API 失敗時進入 Failed，提供重試。"
          },
          "validations": [
            {
              "id": "v.t.page_activity_detail_guest.0004.01",
              "type": "network-failed",
              "description": "API 失敗（例如 5xx）時顯示 Failed 狀態與可重試入口。",
              "expected": "HTTP 5xx"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "loadFailed"
          },
          "meta": {
            "diagramId": "page_activity_detail_guest",
            "source": {
              "raw": "ActivityDetailPage.Guest.Init --> ActivityDetailPage.Guest.Failed : loadFailed"
            }
          }
        },
        {
          "id": "t.page_activity_detail_guest.0005",
          "from": "page.ActivityDetailPage.guest.Failed",
          "to": "page.ActivityDetailPage.guest.Init",
          "event": "retryLoad",
          "roles": [
            "guest"
          ],
          "narrative": {
            "summary": "重試載入詳情（Guest）",
            "taskDescription": "在 Failed 觸發 retryLoad，回到 Init 重新載入。"
          },
          "validations": [
            {
              "id": "v.t.page_activity_detail_guest.0005.01",
              "type": "semantic-check",
              "description": "重試會重新呼叫詳情 API；成功後進入 Ready/NotFound。",
              "expected": null
            }
          ],
          "intent": {
            "category": "action",
            "summary": "retryLoad"
          },
          "meta": {
            "diagramId": "page_activity_detail_guest",
            "source": {
              "raw": "ActivityDetailPage.Guest.Failed --> ActivityDetailPage.Guest.Init : retryLoad | navigate /activities/:activityId"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_activity_detail_guest.invokes.page_activity_list_guest.s.page_ActivityDetailPage_guest_Ready.to.page_ActivityListPage_guest_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail_guest",
            "stateId": "page.ActivityDetailPage.guest.Ready"
          },
          "to": {
            "diagramId": "page_activity_list_guest",
            "stateId": "page.ActivityListPage.guest.Init"
          },
          "narrative": {
            "summary": "從詳情返回列表（Guest）",
            "taskDescription": "詳情 Ready 觸發 backToList 導向 /activities，回到列表 Init。"
          },
          "validations": [
            {
              "id": "v.c.page_activity_detail_guest.invokes.page_activity_list_guest.01",
              "type": "url-equals",
              "description": "返回列表後仍以 Guest 呈現；Header 不出現 Member/Admin 專屬入口。",
              "expected": "/activities"
            }
          ],
          "meta": {
            "reason": "backToList | navigate /activities",
            "action": "backToList",
            "navigateTarget": "/activities"
          }
        },
        {
          "id": "c.page_activity_detail_guest.invokes.page_login.s.page_ActivityDetailPage_guest_Ready.to.page_LoginPage_guest_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail_guest",
            "stateId": "page.ActivityDetailPage.guest.Ready"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.guest.Init"
          },
          "narrative": {
            "summary": "需要登入並返回詳情（Guest）",
            "taskDescription": "在詳情 Ready 觸發 requireLoginReturnToDetail 導向 /login，並保留 returnTo=/activities/:activityId。"
          },
          "validations": [
            {
              "id": "v.c.page_activity_detail_guest.invokes.page_login.01",
              "type": "url-equals",
              "description": "導向 `/login` 並保留 returnTo=`/activities/:activityId`；未登入下嘗試報名 API 需回 401。",
              "expected": "/login"
            }
          ],
          "meta": {
            "reason": "requireLoginReturnToDetail | navigate /login",
            "action": "requireLoginReturnToDetail",
            "navigateTarget": "/login",
            "returnTo": "/activities/:activityId"
          }
        },
        {
          "id": "c.page_activity_detail_guest.invokes.page_activity_list_guest.s.page_ActivityDetailPage_guest_NotFound.to.page_ActivityListPage_guest_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail_guest",
            "stateId": "page.ActivityDetailPage.guest.NotFound"
          },
          "to": {
            "diagramId": "page_activity_list_guest",
            "stateId": "page.ActivityListPage.guest.Init"
          },
          "narrative": {
            "summary": "NotFound 返回列表（Guest）",
            "taskDescription": "NotFound 狀態觸發 backToList 導向 /activities。"
          },
          "validations": [
            {
              "id": "v.c.page_activity_detail_guest.invokes.page_activity_list_guest.02",
              "type": "url-equals",
              "description": "NotFound 狀態下可返回列表；避免停留在不可操作狀態。",
              "expected": "/activities"
            }
          ],
          "meta": {
            "reason": "backToList | navigate /activities",
            "action": "backToList",
            "navigateTarget": "/activities"
          }
        },
        {
          "id": "c.page_entry.contains.page_activity_detail_guest",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_activity_detail_guest",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": "ActivityDetailPage",
        "featureName": null,
        "entryStateId": "page.ActivityDetailPage.guest.Init"
      }
    },
    {
      "id": "page_activity_detail_member",
      "name": "Activity Detail Page - Member",
      "level": "page",
      "parentDiagramId": "page_entry",
      "roles": [
        "member"
      ],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "⑧ Activity Detail Page - Member",
        "order": 8
      },
      "groups": [],
      "states": [
        {
          "id": "page.ActivityDetailPage.member.Init",
          "label": "ActivityDetailPage.Member.Init",
          "type": "start",
          "groupId": null,
          "tags": [
            "page",
            "member"
          ],
          "meta": {
            "diagramId": "page_activity_detail_member",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ActivityDetailPage.Member.Init"
            }
          }
        },
        {
          "id": "page.ActivityDetailPage.member.Ready",
          "label": "ActivityDetailPage.Member.Ready",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page",
            "member"
          ],
          "meta": {
            "diagramId": "page_activity_detail_member",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ActivityDetailPage.Member.Ready"
            }
          }
        },
        {
          "id": "page.ActivityDetailPage.member.NotFound",
          "label": "ActivityDetailPage.Member.NotFound",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page",
            "member"
          ],
          "meta": {
            "diagramId": "page_activity_detail_member",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ActivityDetailPage.Member.NotFound"
            }
          }
        },
        {
          "id": "page.ActivityDetailPage.member.Failed",
          "label": "ActivityDetailPage.Member.Failed",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page",
            "member"
          ],
          "meta": {
            "diagramId": "page_activity_detail_member",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ActivityDetailPage.Member.Failed"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.page_activity_detail_member.0002",
          "from": "page.ActivityDetailPage.member.Init",
          "to": "page.ActivityDetailPage.member.Ready",
          "event": "loadActivity",
          "roles": [
            "member"
          ],
          "narrative": {
            "summary": "載入活動詳情成功（Member）",
            "taskDescription": "載入詳情與報名狀態後進入 Ready。"
          },
          "validations": [
            {
              "id": "v.t.page_activity_detail_member.0002.01",
              "type": "network-success",
              "description": "API 成功回傳詳情與使用者報名狀態；UI 顯示剩餘名額與是否已報名；若 `now > deadline` 禁止報名/取消並顯示原因。",
              "expected": "HTTP 200"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "loadActivity"
          },
          "meta": {
            "diagramId": "page_activity_detail_member",
            "source": {
              "raw": "ActivityDetailPage.Member.Init --> ActivityDetailPage.Member.Ready : loadActivity"
            }
          }
        },
        {
          "id": "t.page_activity_detail_member.0003",
          "from": "page.ActivityDetailPage.member.Init",
          "to": "page.ActivityDetailPage.member.NotFound",
          "event": "loadNotFound",
          "roles": [
            "member"
          ],
          "narrative": {
            "summary": "活動不存在（Member）",
            "taskDescription": "API 回 404 時進入 NotFound。"
          },
          "validations": [
            {
              "id": "v.t.page_activity_detail_member.0003.01",
              "type": "network-failed",
              "description": "API 回 404；UI 顯示找不到活動。",
              "expected": "HTTP 404"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "loadNotFound"
          },
          "meta": {
            "diagramId": "page_activity_detail_member",
            "source": {
              "raw": "ActivityDetailPage.Member.Init --> ActivityDetailPage.Member.NotFound : loadNotFound"
            }
          }
        },
        {
          "id": "t.page_activity_detail_member.0004",
          "from": "page.ActivityDetailPage.member.Init",
          "to": "page.ActivityDetailPage.member.Failed",
          "event": "loadFailed",
          "roles": [
            "member"
          ],
          "narrative": {
            "summary": "載入活動詳情失敗（Member）",
            "taskDescription": "API 失敗時進入 Failed。"
          },
          "validations": [
            {
              "id": "v.t.page_activity_detail_member.0004.01",
              "type": "network-failed",
              "description": "API 失敗顯示 Failed 與重試入口。",
              "expected": "HTTP 5xx"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "loadFailed"
          },
          "meta": {
            "diagramId": "page_activity_detail_member",
            "source": {
              "raw": "ActivityDetailPage.Member.Init --> ActivityDetailPage.Member.Failed : loadFailed"
            }
          }
        },
        {
          "id": "t.page_activity_detail_member.0005",
          "from": "page.ActivityDetailPage.member.Failed",
          "to": "page.ActivityDetailPage.member.Init",
          "event": "retryLoad",
          "roles": [
            "member"
          ],
          "narrative": {
            "summary": "重試載入詳情（Member）",
            "taskDescription": "Failed 觸發 retryLoad 回到 Init。"
          },
          "validations": [
            {
              "id": "v.t.page_activity_detail_member.0005.01",
              "type": "semantic-check",
              "description": "重試可恢復。",
              "expected": null
            }
          ],
          "intent": {
            "category": "action",
            "summary": "retryLoad"
          },
          "meta": {
            "diagramId": "page_activity_detail_member",
            "source": {
              "raw": "ActivityDetailPage.Member.Failed --> ActivityDetailPage.Member.Init : retryLoad | navigate /activities/:activityId"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_activity_detail_member.invokes.page_activity_list_member.s.page_ActivityDetailPage_member_Ready.to.page_ActivityListPage_member_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail_member",
            "stateId": "page.ActivityDetailPage.member.Ready"
          },
          "to": {
            "diagramId": "page_activity_list_member",
            "stateId": "page.ActivityListPage.member.Init"
          },
          "narrative": {
            "summary": "從詳情返回列表（Member）",
            "taskDescription": "詳情 Ready 觸發 backToList 導向 /activities。"
          },
          "validations": [
            {
              "id": "v.c.page_activity_detail_member.invokes.page_activity_list_member.01",
              "type": "url-equals",
              "description": "返回列表後仍為 Member；列表顯示「已報名/額滿/可報名」一致。",
              "expected": "/activities"
            }
          ],
          "meta": {
            "reason": "backToList | navigate /activities",
            "action": "backToList",
            "navigateTarget": "/activities"
          }
        },
        {
          "id": "c.page_activity_detail_member.invokes.feature_register_for_activity.s.page_ActivityDetailPage_member_Ready.to.feature_RegisterForActivityFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail_member",
            "stateId": "page.ActivityDetailPage.member.Ready"
          },
          "to": {
            "diagramId": "feature_register_for_activity",
            "stateId": "feature.RegisterForActivityFeature.Init"
          },
          "narrative": {
            "summary": "在詳情點擊報名（Member）",
            "taskDescription": "在符合條件時點擊報名，進入 RegisterForActivityFeature.Init。"
          },
          "validations": [
            {
              "id": "v.c.page_activity_detail_member.invokes.feature_register_for_activity.01",
              "type": "semantic-check",
              "description": "只有在活動 `status=published`、`now<=deadline`、未額滿且未報名時顯示可點擊的「報名」；送出後 UI 禁用按鈕避免重複送出。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "clickRegister | navigate RegisterForActivityFeature",
            "action": "clickRegister",
            "navigateTarget": "RegisterForActivityFeature"
          }
        },
        {
          "id": "c.feature_register_for_activity.invokes.page_activity_detail_member.s.feature_RegisterForActivityFeature_DonePublished.to.page_ActivityDetailPage_member_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_register_for_activity",
            "stateId": "feature.RegisterForActivityFeature.DonePublished"
          },
          "to": {
            "diagramId": "page_activity_detail_member",
            "stateId": "page.ActivityDetailPage.member.Init"
          },
          "narrative": {
            "summary": "報名成功返回詳情（Member）",
            "taskDescription": "報名成功後導回 /activities/:activityId 並重新載入詳情。"
          },
          "validations": [
            {
              "id": "v.c.feature_register_for_activity.invokes.page_activity_detail_member.01",
              "type": "url-equals",
              "description": "回到 Member 詳情重新載入；顯示「已報名」且資料一致。",
              "expected": "/activities/:activityId"
            }
          ],
          "meta": {
            "reason": "returnToDetailMember | navigate /activities/:activityId",
            "action": "returnToDetailMember",
            "navigateTarget": "/activities/:activityId"
          }
        },
        {
          "id": "c.feature_register_for_activity.invokes.page_activity_detail_member.s.feature_RegisterForActivityFeature_DoneFull.to.page_ActivityDetailPage_member_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_register_for_activity",
            "stateId": "feature.RegisterForActivityFeature.DoneFull"
          },
          "to": {
            "diagramId": "page_activity_detail_member",
            "stateId": "page.ActivityDetailPage.member.Init"
          },
          "narrative": {
            "summary": "報名成功且額滿返回詳情（Member）",
            "taskDescription": "報名成功且活動額滿後導回詳情並顯示 full 狀態。"
          },
          "validations": [
            {
              "id": "v.c.feature_register_for_activity.invokes.page_activity_detail_member.02",
              "type": "url-equals",
              "description": "回到詳情後活動顯示 full；報名按鈕不可用；顯示額滿提示。",
              "expected": "/activities/:activityId"
            }
          ],
          "meta": {
            "reason": "returnToDetailMember | navigate /activities/:activityId",
            "action": "returnToDetailMember",
            "navigateTarget": "/activities/:activityId"
          }
        },
        {
          "id": "c.feature_register_for_activity.invokes.page_activity_detail_member.s.feature_RegisterForActivityFeature_Failed.to.page_ActivityDetailPage_member_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_register_for_activity",
            "stateId": "feature.RegisterForActivityFeature.Failed"
          },
          "to": {
            "diagramId": "page_activity_detail_member",
            "stateId": "page.ActivityDetailPage.member.Init"
          },
          "narrative": {
            "summary": "報名失敗返回詳情（Member）",
            "taskDescription": "報名失敗後導回詳情並顯示錯誤提示。"
          },
          "validations": [
            {
              "id": "v.c.feature_register_for_activity.invokes.page_activity_detail_member.03",
              "type": "url-equals",
              "description": "回到詳情後顯示錯誤提示；資料一致。",
              "expected": "/activities/:activityId"
            }
          ],
          "meta": {
            "reason": "returnToDetailMember | navigate /activities/:activityId",
            "action": "returnToDetailMember",
            "navigateTarget": "/activities/:activityId"
          }
        },
        {
          "id": "c.feature_register_for_activity.invokes.page_activity_detail_member.s.feature_RegisterForActivityFeature_Canceled.to.page_ActivityDetailPage_member_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_register_for_activity",
            "stateId": "feature.RegisterForActivityFeature.Canceled"
          },
          "to": {
            "diagramId": "page_activity_detail_member",
            "stateId": "page.ActivityDetailPage.member.Init"
          },
          "narrative": {
            "summary": "取消報名流程返回詳情（Member）",
            "taskDescription": "取消後回到詳情不變更資料。"
          },
          "validations": [
            {
              "id": "v.c.feature_register_for_activity.invokes.page_activity_detail_member.04",
              "type": "url-equals",
              "description": "回到詳情不變更資料。",
              "expected": "/activities/:activityId"
            }
          ],
          "meta": {
            "reason": "returnToDetailMember | navigate /activities/:activityId",
            "action": "returnToDetailMember",
            "navigateTarget": "/activities/:activityId"
          }
        },
        {
          "id": "c.page_activity_detail_member.invokes.feature_cancel_registration.s.page_ActivityDetailPage_member_Ready.to.feature_CancelRegistrationFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail_member",
            "stateId": "page.ActivityDetailPage.member.Ready"
          },
          "to": {
            "diagramId": "feature_cancel_registration",
            "stateId": "feature.CancelRegistrationFeature.Init"
          },
          "narrative": {
            "summary": "在詳情點擊取消報名（Member）",
            "taskDescription": "在符合條件時點擊取消，進入 CancelRegistrationFeature.Init。"
          },
          "validations": [
            {
              "id": "v.c.page_activity_detail_member.invokes.feature_cancel_registration.01",
              "type": "semantic-check",
              "description": "只有在已報名且 `now<=deadline` 且 `now<=date` 時顯示可點擊的「取消報名」；送出後 UI 禁用按鈕避免重複送出。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "clickCancelRegistration | navigate CancelRegistrationFeature",
            "action": "clickCancelRegistration",
            "navigateTarget": "CancelRegistrationFeature"
          }
        },
        {
          "id": "c.feature_cancel_registration.invokes.page_activity_detail_member.s.feature_CancelRegistrationFeature_DonePublished.to.page_ActivityDetailPage_member_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_cancel_registration",
            "stateId": "feature.CancelRegistrationFeature.DonePublished"
          },
          "to": {
            "diagramId": "page_activity_detail_member",
            "stateId": "page.ActivityDetailPage.member.Init"
          },
          "narrative": {
            "summary": "取消成功返回詳情（Member）",
            "taskDescription": "取消成功後導回 /activities/:activityId 並重新載入詳情。"
          },
          "validations": [
            {
              "id": "v.c.feature_cancel_registration.invokes.page_activity_detail_member.01",
              "type": "url-equals",
              "description": "回到 Member 詳情後顯示未報名狀態與更新後名額；重複取消請求需 idempotent（回 200 且狀態不變）。",
              "expected": "/activities/:activityId"
            }
          ],
          "meta": {
            "reason": "returnToDetailMember | navigate /activities/:activityId",
            "action": "returnToDetailMember",
            "navigateTarget": "/activities/:activityId"
          }
        },
        {
          "id": "c.feature_cancel_registration.invokes.page_activity_detail_admin.s.feature_CancelRegistrationFeature_DonePublished.to.page_ActivityDetailPage_admin_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_cancel_registration",
            "stateId": "feature.CancelRegistrationFeature.DonePublished"
          },
          "to": {
            "diagramId": "page_activity_detail_admin",
            "stateId": "page.ActivityDetailPage.admin.Init"
          },
          "narrative": {
            "summary": "取消成功返回詳情（Admin）",
            "taskDescription": "取消成功後導回 /activities/:activityId 並重新載入詳情（Admin）。"
          },
          "validations": [
            {
              "id": "v.c.feature_cancel_registration.invokes.page_activity_detail_admin.01",
              "type": "url-equals",
              "description": "回到 Admin 詳情後顯示更新後名額與狀態。",
              "expected": "/activities/:activityId"
            }
          ],
          "meta": {
            "reason": "returnToDetailAdmin | navigate /activities/:activityId",
            "action": "returnToDetailAdmin",
            "navigateTarget": "/activities/:activityId"
          }
        },
        {
          "id": "c.feature_cancel_registration.invokes.page_activity_detail_member.s.feature_CancelRegistrationFeature_DoneClosedOrArchived.to.page_ActivityDetailPage_member_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_cancel_registration",
            "stateId": "feature.CancelRegistrationFeature.DoneClosedOrArchived"
          },
          "to": {
            "diagramId": "page_activity_detail_member",
            "stateId": "page.ActivityDetailPage.member.Init"
          },
          "narrative": {
            "summary": "取消成功但不可回復返回詳情（Member）",
            "taskDescription": "取消成功但活動為 closed/archived（或不允許回復）後導回詳情。"
          },
          "validations": [
            {
              "id": "v.c.feature_cancel_registration.invokes.page_activity_detail_member.02",
              "type": "url-equals",
              "description": "回到詳情後活動仍不可報名；顯示關閉/下架提示（若 UI 有）。",
              "expected": "/activities/:activityId"
            }
          ],
          "meta": {
            "reason": "returnToDetailMember | navigate /activities/:activityId",
            "action": "returnToDetailMember",
            "navigateTarget": "/activities/:activityId"
          }
        },
        {
          "id": "c.feature_cancel_registration.invokes.page_activity_detail_admin.s.feature_CancelRegistrationFeature_DoneClosedOrArchived.to.page_ActivityDetailPage_admin_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_cancel_registration",
            "stateId": "feature.CancelRegistrationFeature.DoneClosedOrArchived"
          },
          "to": {
            "diagramId": "page_activity_detail_admin",
            "stateId": "page.ActivityDetailPage.admin.Init"
          },
          "narrative": {
            "summary": "取消成功但不可回復返回詳情（Admin）",
            "taskDescription": "取消成功但活動維持 closed/archived 後導回 Admin 詳情。"
          },
          "validations": [
            {
              "id": "v.c.feature_cancel_registration.invokes.page_activity_detail_admin.02",
              "type": "url-equals",
              "description": "回到詳情後活動仍維持 closed/archived。",
              "expected": "/activities/:activityId"
            }
          ],
          "meta": {
            "reason": "returnToDetailAdmin | navigate /activities/:activityId",
            "action": "returnToDetailAdmin",
            "navigateTarget": "/activities/:activityId"
          }
        },
        {
          "id": "c.feature_cancel_registration.invokes.page_activity_detail_member.s.feature_CancelRegistrationFeature_Failed.to.page_ActivityDetailPage_member_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_cancel_registration",
            "stateId": "feature.CancelRegistrationFeature.Failed"
          },
          "to": {
            "diagramId": "page_activity_detail_member",
            "stateId": "page.ActivityDetailPage.member.Init"
          },
          "narrative": {
            "summary": "取消失敗返回詳情（Member）",
            "taskDescription": "取消失敗後導回詳情並顯示錯誤提示。"
          },
          "validations": [
            {
              "id": "v.c.feature_cancel_registration.invokes.page_activity_detail_member.03",
              "type": "url-equals",
              "description": "回到詳情顯示錯誤提示且資料一致。",
              "expected": "/activities/:activityId"
            }
          ],
          "meta": {
            "reason": "returnToDetailMember | navigate /activities/:activityId",
            "action": "returnToDetailMember",
            "navigateTarget": "/activities/:activityId"
          }
        },
        {
          "id": "c.feature_cancel_registration.invokes.page_activity_detail_admin.s.feature_CancelRegistrationFeature_Failed.to.page_ActivityDetailPage_admin_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_cancel_registration",
            "stateId": "feature.CancelRegistrationFeature.Failed"
          },
          "to": {
            "diagramId": "page_activity_detail_admin",
            "stateId": "page.ActivityDetailPage.admin.Init"
          },
          "narrative": {
            "summary": "取消失敗返回詳情（Admin）",
            "taskDescription": "取消失敗後導回 Admin 詳情並顯示錯誤提示。"
          },
          "validations": [
            {
              "id": "v.c.feature_cancel_registration.invokes.page_activity_detail_admin.03",
              "type": "url-equals",
              "description": "回到詳情顯示錯誤提示且資料一致。",
              "expected": "/activities/:activityId"
            }
          ],
          "meta": {
            "reason": "returnToDetailAdmin | navigate /activities/:activityId",
            "action": "returnToDetailAdmin",
            "navigateTarget": "/activities/:activityId"
          }
        },
        {
          "id": "c.feature_cancel_registration.invokes.page_activity_detail_member.s.feature_CancelRegistrationFeature_Canceled.to.page_ActivityDetailPage_member_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_cancel_registration",
            "stateId": "feature.CancelRegistrationFeature.Canceled"
          },
          "to": {
            "diagramId": "page_activity_detail_member",
            "stateId": "page.ActivityDetailPage.member.Init"
          },
          "narrative": {
            "summary": "取消流程返回詳情（Member）",
            "taskDescription": "取消流程後回到詳情不變更資料。"
          },
          "validations": [
            {
              "id": "v.c.feature_cancel_registration.invokes.page_activity_detail_member.04",
              "type": "url-equals",
              "description": "回到詳情不變更資料。",
              "expected": "/activities/:activityId"
            }
          ],
          "meta": {
            "reason": "returnToDetailMember | navigate /activities/:activityId",
            "action": "returnToDetailMember",
            "navigateTarget": "/activities/:activityId"
          }
        },
        {
          "id": "c.feature_cancel_registration.invokes.page_activity_detail_admin.s.feature_CancelRegistrationFeature_Canceled.to.page_ActivityDetailPage_admin_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_cancel_registration",
            "stateId": "feature.CancelRegistrationFeature.Canceled"
          },
          "to": {
            "diagramId": "page_activity_detail_admin",
            "stateId": "page.ActivityDetailPage.admin.Init"
          },
          "narrative": {
            "summary": "取消流程返回詳情（Admin）",
            "taskDescription": "取消流程後回到詳情不變更資料（Admin）。"
          },
          "validations": [
            {
              "id": "v.c.feature_cancel_registration.invokes.page_activity_detail_admin.04",
              "type": "url-equals",
              "description": "回到詳情不變更資料。",
              "expected": "/activities/:activityId"
            }
          ],
          "meta": {
            "reason": "returnToDetailAdmin | navigate /activities/:activityId",
            "action": "returnToDetailAdmin",
            "navigateTarget": "/activities/:activityId"
          }
        },
        {
          "id": "c.page_activity_detail_member.invokes.feature_logout.s.page_ActivityDetailPage_member_Ready.to.feature_LogoutFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail_member",
            "stateId": "page.ActivityDetailPage.member.Ready"
          },
          "to": {
            "diagramId": "feature_logout",
            "stateId": "feature.LogoutFeature.Init"
          },
          "narrative": {
            "summary": "在詳情登出（Member）",
            "taskDescription": "詳情 Ready 觸發 chooseLogout 進入 LogoutFeature.Init。"
          },
          "validations": [
            {
              "id": "v.c.page_activity_detail_member.invokes.feature_logout.01",
              "type": "semantic-check",
              "description": "登出後回到 Guest；不再顯示「取消報名」等登入後功能。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "chooseLogout | navigate LogoutFeature",
            "action": "chooseLogout",
            "navigateTarget": "LogoutFeature"
          }
        },
        {
          "id": "c.page_activity_detail_member.invokes.page_activity_list_member.s.page_ActivityDetailPage_member_NotFound.to.page_ActivityListPage_member_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail_member",
            "stateId": "page.ActivityDetailPage.member.NotFound"
          },
          "to": {
            "diagramId": "page_activity_list_member",
            "stateId": "page.ActivityListPage.member.Init"
          },
          "narrative": {
            "summary": "NotFound 返回列表（Member）",
            "taskDescription": "NotFound 狀態觸發 backToList 導向 /activities。"
          },
          "validations": [
            {
              "id": "v.c.page_activity_detail_member.invokes.page_activity_list_member.02",
              "type": "url-equals",
              "description": "NotFound 狀態下可回列表。",
              "expected": "/activities"
            }
          ],
          "meta": {
            "reason": "backToList | navigate /activities",
            "action": "backToList",
            "navigateTarget": "/activities"
          }
        },
        {
          "id": "c.feature_auth_login.invokes.page_activity_detail_member.s.feature_AuthLoginFeature_Done.to.page_ActivityDetailPage_member_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_login",
            "stateId": null
          },
          "to": {
            "diagramId": "page_activity_detail_member",
            "stateId": "page.ActivityDetailPage.member.Init"
          },
          "narrative": {
            "summary": "登入成功後導回活動詳情（Member）",
            "taskDescription": "在 AuthLoginFeature.Done 觸發 loginSucceededReturnToActivityDetailMember 導航到 /activities/:activityId，並進入 Member 詳情頁初始狀態。"
          },
          "validations": [
            {
              "id": "v.c.feature_auth_login.invokes.page_activity_detail_member.01",
              "type": "url-equals",
              "description": "returnTo 指向活動詳情且角色為 Member 時導回該詳情；詳情頁顯示報名/取消等 CTA 依規則呈現。",
              "expected": "/activities/:activityId"
            }
          ],
          "meta": {
            "reason": "loginSucceededReturnToActivityDetailMember | navigate /activities/:activityId",
            "action": "loginSucceededReturnToActivityDetailMember",
            "navigateTarget": "/activities/:activityId"
          }
        },
        {
          "id": "c.feature_auth_register.invokes.page_activity_detail_member.s.feature_AuthRegisterFeature_Done.to.page_ActivityDetailPage_member_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_register",
            "stateId": null
          },
          "to": {
            "diagramId": "page_activity_detail_member",
            "stateId": "page.ActivityDetailPage.member.Init"
          },
          "narrative": {
            "summary": "註冊成功後導回活動詳情（Member）",
            "taskDescription": "在 AuthRegisterFeature.Done 觸發 registerSucceededReturnToActivityDetail 導航到 /activities/:activityId，並進入 Member 詳情頁初始狀態。"
          },
          "validations": [
            {
              "id": "v.c.feature_auth_register.invokes.page_activity_detail_member.01",
              "type": "url-equals",
              "description": "returnTo 為活動詳情時導回；詳情頁 CTA 依規則顯示。",
              "expected": "/activities/:activityId"
            }
          ],
          "meta": {
            "reason": "registerSucceededReturnToActivityDetail | navigate /activities/:activityId",
            "action": "registerSucceededReturnToActivityDetail",
            "navigateTarget": "/activities/:activityId"
          }
        },
        {
          "id": "c.page_entry.contains.page_activity_detail_member",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_activity_detail_member",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": "ActivityDetailPage",
        "featureName": null,
        "entryStateId": "page.ActivityDetailPage.member.Init"
      }
    },
    {
      "id": "page_activity_detail_admin",
      "name": "Activity Detail Page - Admin",
      "level": "page",
      "parentDiagramId": "page_entry",
      "roles": [
        "admin"
      ],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "⑨ Activity Detail Page - Admin",
        "order": 9
      },
      "groups": [],
      "states": [
        {
          "id": "page.ActivityDetailPage.admin.Init",
          "label": "ActivityDetailPage.Admin.Init",
          "type": "start",
          "groupId": null,
          "tags": [
            "page",
            "admin"
          ],
          "meta": {
            "diagramId": "page_activity_detail_admin",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ActivityDetailPage.Admin.Init"
            }
          }
        },
        {
          "id": "page.ActivityDetailPage.admin.Ready",
          "label": "ActivityDetailPage.Admin.Ready",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page",
            "admin"
          ],
          "meta": {
            "diagramId": "page_activity_detail_admin",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ActivityDetailPage.Admin.Ready"
            }
          }
        },
        {
          "id": "page.ActivityDetailPage.admin.NotFound",
          "label": "ActivityDetailPage.Admin.NotFound",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page",
            "admin"
          ],
          "meta": {
            "diagramId": "page_activity_detail_admin",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ActivityDetailPage.Admin.NotFound"
            }
          }
        },
        {
          "id": "page.ActivityDetailPage.admin.Failed",
          "label": "ActivityDetailPage.Admin.Failed",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page",
            "admin"
          ],
          "meta": {
            "diagramId": "page_activity_detail_admin",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ActivityDetailPage.Admin.Failed"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.page_activity_detail_admin.0002",
          "from": "page.ActivityDetailPage.admin.Init",
          "to": "page.ActivityDetailPage.admin.Ready",
          "event": "loadActivity",
          "roles": [
            "admin"
          ],
          "narrative": {
            "summary": "載入活動詳情成功（Admin）",
            "taskDescription": "載入詳情與報名狀態後進入 Ready。"
          },
          "validations": [
            {
              "id": "v.t.page_activity_detail_admin.0002.01",
              "type": "network-success",
              "description": "API 成功回傳詳情與 Admin 的報名狀態；UI 顯示剩餘名額與是否已報名。",
              "expected": "HTTP 200"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "loadActivity"
          },
          "meta": {
            "diagramId": "page_activity_detail_admin",
            "source": {
              "raw": "ActivityDetailPage.Admin.Init --> ActivityDetailPage.Admin.Ready : loadActivity"
            }
          }
        },
        {
          "id": "t.page_activity_detail_admin.0003",
          "from": "page.ActivityDetailPage.admin.Init",
          "to": "page.ActivityDetailPage.admin.NotFound",
          "event": "loadNotFound",
          "roles": [
            "admin"
          ],
          "narrative": {
            "summary": "活動不存在（Admin）",
            "taskDescription": "API 回 404 時進入 NotFound。"
          },
          "validations": [
            {
              "id": "v.t.page_activity_detail_admin.0003.01",
              "type": "network-failed",
              "description": "API 回 404；UI 顯示找不到活動。",
              "expected": "HTTP 404"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "loadNotFound"
          },
          "meta": {
            "diagramId": "page_activity_detail_admin",
            "source": {
              "raw": "ActivityDetailPage.Admin.Init --> ActivityDetailPage.Admin.NotFound : loadNotFound"
            }
          }
        },
        {
          "id": "t.page_activity_detail_admin.0004",
          "from": "page.ActivityDetailPage.admin.Init",
          "to": "page.ActivityDetailPage.admin.Failed",
          "event": "loadFailed",
          "roles": [
            "admin"
          ],
          "narrative": {
            "summary": "載入活動詳情失敗（Admin）",
            "taskDescription": "API 失敗時進入 Failed。"
          },
          "validations": [
            {
              "id": "v.t.page_activity_detail_admin.0004.01",
              "type": "network-failed",
              "description": "API 失敗顯示 Failed。",
              "expected": "HTTP 5xx"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "loadFailed"
          },
          "meta": {
            "diagramId": "page_activity_detail_admin",
            "source": {
              "raw": "ActivityDetailPage.Admin.Init --> ActivityDetailPage.Admin.Failed : loadFailed"
            }
          }
        },
        {
          "id": "t.page_activity_detail_admin.0005",
          "from": "page.ActivityDetailPage.admin.Failed",
          "to": "page.ActivityDetailPage.admin.Init",
          "event": "retryLoad",
          "roles": [
            "admin"
          ],
          "narrative": {
            "summary": "重試載入詳情（Admin）",
            "taskDescription": "Failed 觸發 retryLoad 回到 Init。"
          },
          "validations": [
            {
              "id": "v.t.page_activity_detail_admin.0005.01",
              "type": "semantic-check",
              "description": "重試可恢復。",
              "expected": null
            }
          ],
          "intent": {
            "category": "action",
            "summary": "retryLoad"
          },
          "meta": {
            "diagramId": "page_activity_detail_admin",
            "source": {
              "raw": "ActivityDetailPage.Admin.Failed --> ActivityDetailPage.Admin.Init : retryLoad | navigate /activities/:activityId"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_activity_detail_admin.invokes.page_activity_list_admin.s.page_ActivityDetailPage_admin_Ready.to.page_ActivityListPage_admin_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail_admin",
            "stateId": "page.ActivityDetailPage.admin.Ready"
          },
          "to": {
            "diagramId": "page_activity_list_admin",
            "stateId": "page.ActivityListPage.admin.Init"
          },
          "narrative": {
            "summary": "從詳情返回列表（Admin）",
            "taskDescription": "詳情 Ready 觸發 backToList 導向 /activities。"
          },
          "validations": [
            {
              "id": "v.c.page_activity_detail_admin.invokes.page_activity_list_admin.01",
              "type": "url-equals",
              "description": "返回列表仍為 Admin。",
              "expected": "/activities"
            }
          ],
          "meta": {
            "reason": "backToList | navigate /activities",
            "action": "backToList",
            "navigateTarget": "/activities"
          }
        },
        {
          "id": "c.page_activity_detail_admin.invokes.feature_register_for_activity.s.page_ActivityDetailPage_admin_Ready.to.feature_RegisterForActivityFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail_admin",
            "stateId": "page.ActivityDetailPage.admin.Ready"
          },
          "to": {
            "diagramId": "feature_register_for_activity",
            "stateId": "feature.RegisterForActivityFeature.Init"
          },
          "narrative": {
            "summary": "在詳情點擊報名（Admin）",
            "taskDescription": "符合條件下點擊報名，進入 RegisterForActivityFeature.Init。"
          },
          "validations": [
            {
              "id": "v.c.page_activity_detail_admin.invokes.feature_register_for_activity.01",
              "type": "semantic-check",
              "description": "僅在符合 published/未截止/未額滿/未報名時可點擊；送出後禁用，避免重複。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "clickRegister | navigate RegisterForActivityFeature",
            "action": "clickRegister",
            "navigateTarget": "RegisterForActivityFeature"
          }
        },
        {
          "id": "c.feature_register_for_activity.invokes.page_activity_detail_admin.s.feature_RegisterForActivityFeature_DonePublished.to.page_ActivityDetailPage_admin_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_register_for_activity",
            "stateId": "feature.RegisterForActivityFeature.DonePublished"
          },
          "to": {
            "diagramId": "page_activity_detail_admin",
            "stateId": "page.ActivityDetailPage.admin.Init"
          },
          "narrative": {
            "summary": "報名成功返回詳情（Admin）",
            "taskDescription": "報名成功後導回 /activities/:activityId 並重新載入詳情（Admin）。"
          },
          "validations": [
            {
              "id": "v.c.feature_register_for_activity.invokes.page_activity_detail_admin.01",
              "type": "url-equals",
              "description": "回到 Admin 詳情重新載入；顯示「已報名」且資料一致。",
              "expected": "/activities/:activityId"
            }
          ],
          "meta": {
            "reason": "returnToDetailAdmin | navigate /activities/:activityId",
            "action": "returnToDetailAdmin",
            "navigateTarget": "/activities/:activityId"
          }
        },
        {
          "id": "c.feature_register_for_activity.invokes.page_activity_detail_admin.s.feature_RegisterForActivityFeature_DoneFull.to.page_ActivityDetailPage_admin_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_register_for_activity",
            "stateId": "feature.RegisterForActivityFeature.DoneFull"
          },
          "to": {
            "diagramId": "page_activity_detail_admin",
            "stateId": "page.ActivityDetailPage.admin.Init"
          },
          "narrative": {
            "summary": "報名成功且額滿返回詳情（Admin）",
            "taskDescription": "報名成功且活動額滿後導回詳情並顯示 full 狀態（Admin）。"
          },
          "validations": [
            {
              "id": "v.c.feature_register_for_activity.invokes.page_activity_detail_admin.02",
              "type": "url-equals",
              "description": "回到詳情後活動顯示 full；額滿提示可見。",
              "expected": "/activities/:activityId"
            }
          ],
          "meta": {
            "reason": "returnToDetailAdmin | navigate /activities/:activityId",
            "action": "returnToDetailAdmin",
            "navigateTarget": "/activities/:activityId"
          }
        },
        {
          "id": "c.feature_register_for_activity.invokes.page_activity_detail_admin.s.feature_RegisterForActivityFeature_Failed.to.page_ActivityDetailPage_admin_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_register_for_activity",
            "stateId": "feature.RegisterForActivityFeature.Failed"
          },
          "to": {
            "diagramId": "page_activity_detail_admin",
            "stateId": "page.ActivityDetailPage.admin.Init"
          },
          "narrative": {
            "summary": "報名失敗返回詳情（Admin）",
            "taskDescription": "報名失敗後導回 Admin 詳情並顯示錯誤提示。"
          },
          "validations": [
            {
              "id": "v.c.feature_register_for_activity.invokes.page_activity_detail_admin.03",
              "type": "url-equals",
              "description": "回到 Admin 詳情後顯示錯誤提示；資料一致。",
              "expected": "/activities/:activityId"
            }
          ],
          "meta": {
            "reason": "returnToDetailAdmin | navigate /activities/:activityId",
            "action": "returnToDetailAdmin",
            "navigateTarget": "/activities/:activityId"
          }
        },
        {
          "id": "c.feature_register_for_activity.invokes.page_activity_detail_admin.s.feature_RegisterForActivityFeature_Canceled.to.page_ActivityDetailPage_admin_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_register_for_activity",
            "stateId": "feature.RegisterForActivityFeature.Canceled"
          },
          "to": {
            "diagramId": "page_activity_detail_admin",
            "stateId": "page.ActivityDetailPage.admin.Init"
          },
          "narrative": {
            "summary": "取消報名流程返回詳情（Admin）",
            "taskDescription": "取消後回到詳情不變更資料（Admin）。"
          },
          "validations": [
            {
              "id": "v.c.feature_register_for_activity.invokes.page_activity_detail_admin.04",
              "type": "url-equals",
              "description": "回到詳情不變更資料。",
              "expected": "/activities/:activityId"
            }
          ],
          "meta": {
            "reason": "returnToDetailAdmin | navigate /activities/:activityId",
            "action": "returnToDetailAdmin",
            "navigateTarget": "/activities/:activityId"
          }
        },
        {
          "id": "c.page_activity_detail_admin.invokes.feature_cancel_registration.s.page_ActivityDetailPage_admin_Ready.to.feature_CancelRegistrationFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail_admin",
            "stateId": "page.ActivityDetailPage.admin.Ready"
          },
          "to": {
            "diagramId": "feature_cancel_registration",
            "stateId": "feature.CancelRegistrationFeature.Init"
          },
          "narrative": {
            "summary": "在詳情點擊取消報名（Admin）",
            "taskDescription": "符合條件下點擊取消，進入 CancelRegistrationFeature.Init。"
          },
          "validations": [
            {
              "id": "v.c.page_activity_detail_admin.invokes.feature_cancel_registration.01",
              "type": "semantic-check",
              "description": "僅在符合可取消規則時可點擊；送出後禁用。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "clickCancelRegistration | navigate CancelRegistrationFeature",
            "action": "clickCancelRegistration",
            "navigateTarget": "CancelRegistrationFeature"
          }
        },
        {
          "id": "c.page_activity_detail_admin.invokes.page_admin_activity_list.s.page_ActivityDetailPage_admin_Ready.to.page_AdminActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail_admin",
            "stateId": "page.ActivityDetailPage.admin.Ready"
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": null
          },
          "narrative": {
            "summary": "由詳情前往後台（Admin）",
            "taskDescription": "詳情 Ready 觸發 openAdminPanel 導向 /admin/activities。"
          },
          "validations": [
            {
              "id": "v.c.page_activity_detail_admin.invokes.page_admin_activity_list.01",
              "type": "url-equals",
              "description": "導向 `/admin/activities`；後台入口需再次驗證 Admin 權限。",
              "expected": "/admin/activities"
            }
          ],
          "meta": {
            "reason": "openAdminPanel | navigate /admin/activities",
            "action": "openAdminPanel",
            "navigateTarget": "/admin/activities"
          }
        },
        {
          "id": "c.page_activity_detail_admin.invokes.feature_logout.s.page_ActivityDetailPage_admin_Ready.to.feature_LogoutFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail_admin",
            "stateId": "page.ActivityDetailPage.admin.Ready"
          },
          "to": {
            "diagramId": "feature_logout",
            "stateId": "feature.LogoutFeature.Init"
          },
          "narrative": {
            "summary": "在詳情登出（Admin）",
            "taskDescription": "詳情 Ready 觸發 chooseLogout 進入 LogoutFeature.Init。"
          },
          "validations": [
            {
              "id": "v.c.page_activity_detail_admin.invokes.feature_logout.01",
              "type": "semantic-check",
              "description": "登出後回到 Guest。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "chooseLogout | navigate LogoutFeature",
            "action": "chooseLogout",
            "navigateTarget": "LogoutFeature"
          }
        },
        {
          "id": "c.page_activity_detail_admin.invokes.page_activity_list_admin.s.page_ActivityDetailPage_admin_NotFound.to.page_ActivityListPage_admin_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail_admin",
            "stateId": "page.ActivityDetailPage.admin.NotFound"
          },
          "to": {
            "diagramId": "page_activity_list_admin",
            "stateId": "page.ActivityListPage.admin.Init"
          },
          "narrative": {
            "summary": "NotFound 返回列表（Admin）",
            "taskDescription": "NotFound 可回列表。"
          },
          "validations": [
            {
              "id": "v.c.page_activity_detail_admin.invokes.page_activity_list_admin.02",
              "type": "url-equals",
              "description": "NotFound 可回列表。",
              "expected": "/activities"
            }
          ],
          "meta": {
            "reason": "backToList | navigate /activities",
            "action": "backToList",
            "navigateTarget": "/activities"
          }
        },
        {
          "id": "c.feature_auth_login.invokes.page_activity_detail_admin.s.feature_AuthLoginFeature_Done.to.page_ActivityDetailPage_admin_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_login",
            "stateId": null
          },
          "to": {
            "diagramId": "page_activity_detail_admin",
            "stateId": "page.ActivityDetailPage.admin.Init"
          },
          "narrative": {
            "summary": "登入成功後導回活動詳情（Admin）",
            "taskDescription": "在 AuthLoginFeature.Done 觸發 loginSucceededReturnToActivityDetailAdmin 導航到 /activities/:activityId，並進入 Admin 詳情頁初始狀態。"
          },
          "validations": [
            {
              "id": "v.c.feature_auth_login.invokes.page_activity_detail_admin.01",
              "type": "url-equals",
              "description": "returnTo 指向活動詳情且角色為 Admin 時導回該詳情；Header 顯示管理後台入口。",
              "expected": "/activities/:activityId"
            }
          ],
          "meta": {
            "reason": "loginSucceededReturnToActivityDetailAdmin | navigate /activities/:activityId",
            "action": "loginSucceededReturnToActivityDetailAdmin",
            "navigateTarget": "/activities/:activityId"
          }
        },
        {
          "id": "c.page_entry.contains.page_activity_detail_admin",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_activity_detail_admin",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": "ActivityDetailPage",
        "featureName": null,
        "entryStateId": "page.ActivityDetailPage.admin.Init"
      }
    },
    {
      "id": "page_my_activities_member",
      "name": "My Activities Page - Member",
      "level": "page",
      "parentDiagramId": "page_entry",
      "roles": [
        "member"
      ],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "⑩ My Activities Page - Member",
        "order": 10
      },
      "groups": [],
      "states": [
        {
          "id": "page.MyActivitiesPage.member.Init",
          "label": "MyActivitiesPage.Member.Init",
          "type": "start",
          "groupId": null,
          "tags": [
            "page",
            "member"
          ],
          "meta": {
            "diagramId": "page_my_activities_member",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "MyActivitiesPage.Member.Init"
            }
          }
        },
        {
          "id": "page.MyActivitiesPage.member.Ready",
          "label": "MyActivitiesPage.Member.Ready",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page",
            "member"
          ],
          "meta": {
            "diagramId": "page_my_activities_member",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "MyActivitiesPage.Member.Ready"
            }
          }
        },
        {
          "id": "page.MyActivitiesPage.member.Empty",
          "label": "MyActivitiesPage.Member.Empty",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page",
            "member"
          ],
          "meta": {
            "diagramId": "page_my_activities_member",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "MyActivitiesPage.Member.Empty"
            }
          }
        },
        {
          "id": "page.MyActivitiesPage.member.Failed",
          "label": "MyActivitiesPage.Member.Failed",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page",
            "member"
          ],
          "meta": {
            "diagramId": "page_my_activities_member",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "MyActivitiesPage.Member.Failed"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.page_my_activities_member.0002",
          "from": "page.MyActivitiesPage.member.Init",
          "to": "page.MyActivitiesPage.member.Ready",
          "event": "loadMyActivities",
          "roles": [
            "member"
          ],
          "narrative": {
            "summary": "載入我的活動成功（Member）",
            "taskDescription": "API 成功回傳有效報名清單後進入 Ready。"
          },
          "validations": [
            {
              "id": "v.t.page_my_activities_member.0002.01",
              "type": "network-success",
              "description": "API 成功回傳「有效報名」活動清單（`canceled_at IS NULL`）；依活動日期排序；每筆顯示「即將開始/已結束」。",
              "expected": "HTTP 200"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "loadMyActivities"
          },
          "meta": {
            "diagramId": "page_my_activities_member",
            "source": {
              "raw": "MyActivitiesPage.Member.Init --> MyActivitiesPage.Member.Ready : loadMyActivities"
            }
          }
        },
        {
          "id": "t.page_my_activities_member.0003",
          "from": "page.MyActivitiesPage.member.Init",
          "to": "page.MyActivitiesPage.member.Empty",
          "event": "loadEmpty",
          "roles": [
            "member"
          ],
          "narrative": {
            "summary": "我的活動為空（Member）",
            "taskDescription": "API 成功但無資料時進入 Empty。"
          },
          "validations": [
            {
              "id": "v.t.page_my_activities_member.0003.01",
              "type": "network-success",
              "description": "API 成功但無資料時顯示 Empty（例如「尚未報名任何活動」）。",
              "expected": "HTTP 200 (empty list)"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "loadEmpty"
          },
          "meta": {
            "diagramId": "page_my_activities_member",
            "source": {
              "raw": "MyActivitiesPage.Member.Init --> MyActivitiesPage.Member.Empty : loadEmpty"
            }
          }
        },
        {
          "id": "t.page_my_activities_member.0004",
          "from": "page.MyActivitiesPage.member.Init",
          "to": "page.MyActivitiesPage.member.Failed",
          "event": "loadFailed",
          "roles": [
            "member"
          ],
          "narrative": {
            "summary": "載入我的活動失敗（Member）",
            "taskDescription": "API 失敗時進入 Failed。"
          },
          "validations": [
            {
              "id": "v.t.page_my_activities_member.0004.01",
              "type": "network-failed",
              "description": "API 失敗顯示 Failed 與重試入口。",
              "expected": "HTTP 5xx"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "loadFailed"
          },
          "meta": {
            "diagramId": "page_my_activities_member",
            "source": {
              "raw": "MyActivitiesPage.Member.Init --> MyActivitiesPage.Member.Failed : loadFailed"
            }
          }
        },
        {
          "id": "t.page_my_activities_member.0005",
          "from": "page.MyActivitiesPage.member.Failed",
          "to": "page.MyActivitiesPage.member.Init",
          "event": "retryLoad",
          "roles": [
            "member"
          ],
          "narrative": {
            "summary": "重試載入我的活動（Member）",
            "taskDescription": "Failed 觸發 retryLoad，回到 Init 重新載入。"
          },
          "validations": [
            {
              "id": "v.t.page_my_activities_member.0005.01",
              "type": "semantic-check",
              "description": "重試重新載入。",
              "expected": null
            }
          ],
          "intent": {
            "category": "action",
            "summary": "retryLoad"
          },
          "meta": {
            "diagramId": "page_my_activities_member",
            "source": {
              "raw": "MyActivitiesPage.Member.Failed --> MyActivitiesPage.Member.Init : retryLoad | navigate /my-activities"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_my_activities_member.invokes.page_login.s.page_MyActivitiesPage_member_Init.to.page_LoginPage_guest_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_my_activities_member",
            "stateId": "page.MyActivitiesPage.member.Init"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.guest.Init"
          },
          "narrative": {
            "summary": "需要登入並返回我的活動（Member）",
            "taskDescription": "Guest 進入 /my-activities 時導向 /login 並保留 returnTo=/my-activities。"
          },
          "validations": [
            {
              "id": "v.c.page_my_activities_member.invokes.page_login.01",
              "type": "url-equals",
              "description": "Guest 進入此路由時導向 `/login`；登入成功後可回到 `/my-activities`（透過 AuthLoginFeature 的 returnTo transitions）。",
              "expected": "/login"
            }
          ],
          "meta": {
            "reason": "requireLoginReturnToMyActivities | navigate /login",
            "action": "requireLoginReturnToMyActivities",
            "navigateTarget": "/login",
            "returnTo": "/my-activities"
          }
        },
        {
          "id": "c.page_my_activities_member.invokes.page_activity_detail_member.s.page_MyActivitiesPage_member_Ready.to.page_ActivityDetailPage_member_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_my_activities_member",
            "stateId": "page.MyActivitiesPage.member.Ready"
          },
          "to": {
            "diagramId": "page_activity_detail_member",
            "stateId": "page.ActivityDetailPage.member.Init"
          },
          "narrative": {
            "summary": "由我的活動進入詳情（Member）",
            "taskDescription": "點擊活動導向 /activities/:activityId。"
          },
          "validations": [
            {
              "id": "v.c.page_my_activities_member.invokes.page_activity_detail_member.01",
              "type": "url-equals",
              "description": "點擊後導向詳情並維持 Member 身分；詳情顯示報名狀態一致。",
              "expected": "/activities/:activityId"
            }
          ],
          "meta": {
            "reason": "openActivity | navigate /activities/:activityId",
            "action": "openActivity",
            "navigateTarget": "/activities/:activityId"
          }
        },
        {
          "id": "c.page_my_activities_member.invokes.page_activity_list_member.s.page_MyActivitiesPage_member_Ready.to.page_ActivityListPage_member_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_my_activities_member",
            "stateId": "page.MyActivitiesPage.member.Ready"
          },
          "to": {
            "diagramId": "page_activity_list_member",
            "stateId": "page.ActivityListPage.member.Init"
          },
          "narrative": {
            "summary": "由我的活動返回列表（Member）",
            "taskDescription": "Ready 觸發 backToList 導向 /activities。"
          },
          "validations": [
            {
              "id": "v.c.page_my_activities_member.invokes.page_activity_list_member.01",
              "type": "url-equals",
              "description": "返回公開列表（已登入視角）。",
              "expected": "/activities"
            }
          ],
          "meta": {
            "reason": "backToList | navigate /activities",
            "action": "backToList",
            "navigateTarget": "/activities"
          }
        },
        {
          "id": "c.page_my_activities_member.invokes.feature_logout.s.page_MyActivitiesPage_member_Ready.to.feature_LogoutFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_my_activities_member",
            "stateId": "page.MyActivitiesPage.member.Ready"
          },
          "to": {
            "diagramId": "feature_logout",
            "stateId": "feature.LogoutFeature.Init"
          },
          "narrative": {
            "summary": "由我的活動登出（Member）",
            "taskDescription": "Ready 觸發 chooseLogout 進入 LogoutFeature.Init。"
          },
          "validations": [
            {
              "id": "v.c.page_my_activities_member.invokes.feature_logout.01",
              "type": "semantic-check",
              "description": "登出後回到 Guest；再進 `/my-activities` 會被導向登入。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "chooseLogout | navigate LogoutFeature",
            "action": "chooseLogout",
            "navigateTarget": "LogoutFeature"
          }
        },
        {
          "id": "c.page_my_activities_member.invokes.page_activity_list_member.s.page_MyActivitiesPage_member_Empty.to.page_ActivityListPage_member_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_my_activities_member",
            "stateId": "page.MyActivitiesPage.member.Empty"
          },
          "to": {
            "diagramId": "page_activity_list_member",
            "stateId": "page.ActivityListPage.member.Init"
          },
          "narrative": {
            "summary": "Empty 返回列表（Member）",
            "taskDescription": "Empty 觸發 backToList。"
          },
          "validations": [
            {
              "id": "v.c.page_my_activities_member.invokes.page_activity_list_member.02",
              "type": "url-equals",
              "description": "Empty 狀態可回列表。",
              "expected": "/activities"
            }
          ],
          "meta": {
            "reason": "backToList | navigate /activities",
            "action": "backToList",
            "navigateTarget": "/activities"
          }
        },
        {
          "id": "c.page_my_activities_member.invokes.feature_logout.s.page_MyActivitiesPage_member_Empty.to.feature_LogoutFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_my_activities_member",
            "stateId": "page.MyActivitiesPage.member.Empty"
          },
          "to": {
            "diagramId": "feature_logout",
            "stateId": "feature.LogoutFeature.Init"
          },
          "narrative": {
            "summary": "Empty 下登出（Member）",
            "taskDescription": "Empty 觸發 chooseLogout。"
          },
          "validations": [
            {
              "id": "v.c.page_my_activities_member.invokes.feature_logout.02",
              "type": "semantic-check",
              "description": "Empty 狀態可登出。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "chooseLogout | navigate LogoutFeature",
            "action": "chooseLogout",
            "navigateTarget": "LogoutFeature"
          }
        },
        {
          "id": "c.feature_auth_login.invokes.page_my_activities_member.s.feature_AuthLoginFeature_Done.to.page_MyActivitiesPage_member_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_login",
            "stateId": null
          },
          "to": {
            "diagramId": "page_my_activities_member",
            "stateId": "page.MyActivitiesPage.member.Init"
          },
          "narrative": {
            "summary": "登入成功後導回我的活動（Member）",
            "taskDescription": "在 AuthLoginFeature.Done 觸發 loginSucceededReturnToMyActivitiesMember 導航到 /my-activities，並進入 Member 我的活動頁初始狀態。"
          },
          "validations": [
            {
              "id": "v.c.feature_auth_login.invokes.page_my_activities_member.01",
              "type": "url-equals",
              "description": "returnTo 指向我的活動且角色為 Member 時導回；API 回 200 並顯示清單。",
              "expected": "/my-activities"
            }
          ],
          "meta": {
            "reason": "loginSucceededReturnToMyActivitiesMember | navigate /my-activities",
            "action": "loginSucceededReturnToMyActivitiesMember",
            "navigateTarget": "/my-activities"
          }
        },
        {
          "id": "c.feature_auth_register.invokes.page_my_activities_member.s.feature_AuthRegisterFeature_Done.to.page_MyActivitiesPage_member_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_register",
            "stateId": null
          },
          "to": {
            "diagramId": "page_my_activities_member",
            "stateId": "page.MyActivitiesPage.member.Init"
          },
          "narrative": {
            "summary": "註冊成功後導回我的活動（Member）",
            "taskDescription": "在 AuthRegisterFeature.Done 觸發 registerSucceededReturnToMyActivities 導航到 /my-activities，並進入 Member 我的活動頁初始狀態。"
          },
          "validations": [
            {
              "id": "v.c.feature_auth_register.invokes.page_my_activities_member.01",
              "type": "url-equals",
              "description": "returnTo 為我的活動時導回；初次通常為 Empty 狀態。",
              "expected": "/my-activities"
            }
          ],
          "meta": {
            "reason": "registerSucceededReturnToMyActivities | navigate /my-activities",
            "action": "registerSucceededReturnToMyActivities",
            "navigateTarget": "/my-activities"
          }
        },
        {
          "id": "c.page_entry.contains.page_my_activities_member",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_my_activities_member",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": "MyActivitiesPage",
        "featureName": null,
        "entryStateId": "page.MyActivitiesPage.member.Init"
      }
    },
    {
      "id": "page_my_activities_admin",
      "name": "My Activities Page - Admin",
      "level": "page",
      "parentDiagramId": "page_entry",
      "roles": [
        "admin"
      ],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "⑪ My Activities Page - Admin",
        "order": 11
      },
      "groups": [],
      "states": [
        {
          "id": "page.MyActivitiesPage.admin.Init",
          "label": "MyActivitiesPage.Admin.Init",
          "type": "start",
          "groupId": null,
          "tags": [
            "page",
            "admin"
          ],
          "meta": {
            "diagramId": "page_my_activities_admin",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "MyActivitiesPage.Admin.Init"
            }
          }
        },
        {
          "id": "page.MyActivitiesPage.admin.Ready",
          "label": "MyActivitiesPage.Admin.Ready",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page",
            "admin"
          ],
          "meta": {
            "diagramId": "page_my_activities_admin",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "MyActivitiesPage.Admin.Ready"
            }
          }
        },
        {
          "id": "page.MyActivitiesPage.admin.Empty",
          "label": "MyActivitiesPage.Admin.Empty",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page",
            "admin"
          ],
          "meta": {
            "diagramId": "page_my_activities_admin",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "MyActivitiesPage.Admin.Empty"
            }
          }
        },
        {
          "id": "page.MyActivitiesPage.admin.Failed",
          "label": "MyActivitiesPage.Admin.Failed",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page",
            "admin"
          ],
          "meta": {
            "diagramId": "page_my_activities_admin",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "MyActivitiesPage.Admin.Failed"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.page_my_activities_admin.0002",
          "from": "page.MyActivitiesPage.admin.Init",
          "to": "page.MyActivitiesPage.admin.Ready",
          "event": "loadMyActivities",
          "roles": [
            "admin"
          ],
          "narrative": {
            "summary": "載入我的活動成功（Admin）",
            "taskDescription": "API 成功回傳有效報名清單後進入 Ready。"
          },
          "validations": [
            {
              "id": "v.t.page_my_activities_admin.0002.01",
              "type": "network-success",
              "description": "API 成功回傳有效報名清單並排序；顯示即將開始/已結束；資料一致。",
              "expected": "HTTP 200"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "loadMyActivities"
          },
          "meta": {
            "diagramId": "page_my_activities_admin",
            "source": {
              "raw": "MyActivitiesPage.Admin.Init --> MyActivitiesPage.Admin.Ready : loadMyActivities"
            }
          }
        },
        {
          "id": "t.page_my_activities_admin.0003",
          "from": "page.MyActivitiesPage.admin.Init",
          "to": "page.MyActivitiesPage.admin.Empty",
          "event": "loadEmpty",
          "roles": [
            "admin"
          ],
          "narrative": {
            "summary": "我的活動為空（Admin）",
            "taskDescription": "API 成功但無資料時進入 Empty。"
          },
          "validations": [
            {
              "id": "v.t.page_my_activities_admin.0003.01",
              "type": "network-success",
              "description": "Empty 顯示明確提示。",
              "expected": "HTTP 200 (empty list)"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "loadEmpty"
          },
          "meta": {
            "diagramId": "page_my_activities_admin",
            "source": {
              "raw": "MyActivitiesPage.Admin.Init --> MyActivitiesPage.Admin.Empty : loadEmpty"
            }
          }
        },
        {
          "id": "t.page_my_activities_admin.0004",
          "from": "page.MyActivitiesPage.admin.Init",
          "to": "page.MyActivitiesPage.admin.Failed",
          "event": "loadFailed",
          "roles": [
            "admin"
          ],
          "narrative": {
            "summary": "載入我的活動失敗（Admin）",
            "taskDescription": "API 失敗時進入 Failed。"
          },
          "validations": [
            {
              "id": "v.t.page_my_activities_admin.0004.01",
              "type": "network-failed",
              "description": "Failed 顯示錯誤與重試。",
              "expected": "HTTP 5xx"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "loadFailed"
          },
          "meta": {
            "diagramId": "page_my_activities_admin",
            "source": {
              "raw": "MyActivitiesPage.Admin.Init --> MyActivitiesPage.Admin.Failed : loadFailed"
            }
          }
        },
        {
          "id": "t.page_my_activities_admin.0005",
          "from": "page.MyActivitiesPage.admin.Failed",
          "to": "page.MyActivitiesPage.admin.Init",
          "event": "retryLoad",
          "roles": [
            "admin"
          ],
          "narrative": {
            "summary": "重試載入我的活動（Admin）",
            "taskDescription": "Failed 觸發 retryLoad，回到 Init。"
          },
          "validations": [
            {
              "id": "v.t.page_my_activities_admin.0005.01",
              "type": "semantic-check",
              "description": "重試重新載入。",
              "expected": null
            }
          ],
          "intent": {
            "category": "action",
            "summary": "retryLoad"
          },
          "meta": {
            "diagramId": "page_my_activities_admin",
            "source": {
              "raw": "MyActivitiesPage.Admin.Failed --> MyActivitiesPage.Admin.Init : retryLoad | navigate /my-activities"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_my_activities_admin.invokes.page_login.s.page_MyActivitiesPage_admin_Init.to.page_LoginPage_guest_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_my_activities_admin",
            "stateId": "page.MyActivitiesPage.admin.Init"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.guest.Init"
          },
          "narrative": {
            "summary": "需要登入並返回我的活動（Admin）",
            "taskDescription": "Guest 進入此路由導向登入並保留 returnTo。"
          },
          "validations": [
            {
              "id": "v.c.page_my_activities_admin.invokes.page_login.01",
              "type": "url-equals",
              "description": "Guest 進入此路由導向登入；登入成功後可回到 `/my-activities`。",
              "expected": "/login"
            }
          ],
          "meta": {
            "reason": "requireLoginReturnToMyActivities | navigate /login",
            "action": "requireLoginReturnToMyActivities",
            "navigateTarget": "/login",
            "returnTo": "/my-activities"
          }
        },
        {
          "id": "c.page_my_activities_admin.invokes.page_activity_detail_admin.s.page_MyActivitiesPage_admin_Ready.to.page_ActivityDetailPage_admin_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_my_activities_admin",
            "stateId": "page.MyActivitiesPage.admin.Ready"
          },
          "to": {
            "diagramId": "page_activity_detail_admin",
            "stateId": "page.ActivityDetailPage.admin.Init"
          },
          "narrative": {
            "summary": "由我的活動進入詳情（Admin）",
            "taskDescription": "點擊活動導向 /activities/:activityId。"
          },
          "validations": [
            {
              "id": "v.c.page_my_activities_admin.invokes.page_activity_detail_admin.01",
              "type": "url-equals",
              "description": "進入詳情仍為 Admin 視角。",
              "expected": "/activities/:activityId"
            }
          ],
          "meta": {
            "reason": "openActivity | navigate /activities/:activityId",
            "action": "openActivity",
            "navigateTarget": "/activities/:activityId"
          }
        },
        {
          "id": "c.page_my_activities_admin.invokes.page_activity_list_admin.s.page_MyActivitiesPage_admin_Ready.to.page_ActivityListPage_admin_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_my_activities_admin",
            "stateId": "page.MyActivitiesPage.admin.Ready"
          },
          "to": {
            "diagramId": "page_activity_list_admin",
            "stateId": "page.ActivityListPage.admin.Init"
          },
          "narrative": {
            "summary": "由我的活動返回列表（Admin）",
            "taskDescription": "Ready 觸發 backToList 導向 /activities。"
          },
          "validations": [
            {
              "id": "v.c.page_my_activities_admin.invokes.page_activity_list_admin.01",
              "type": "url-equals",
              "description": "返回列表仍為 Admin。",
              "expected": "/activities"
            }
          ],
          "meta": {
            "reason": "backToList | navigate /activities",
            "action": "backToList",
            "navigateTarget": "/activities"
          }
        },
        {
          "id": "c.page_my_activities_admin.invokes.page_admin_activity_list.s.page_MyActivitiesPage_admin_Ready.to.page_AdminActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_my_activities_admin",
            "stateId": "page.MyActivitiesPage.admin.Ready"
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": null
          },
          "narrative": {
            "summary": "由我的活動進入後台（Admin）",
            "taskDescription": "Ready 觸發 openAdminPanel 導向 /admin/activities。"
          },
          "validations": [
            {
              "id": "v.c.page_my_activities_admin.invokes.page_admin_activity_list.01",
              "type": "url-equals",
              "description": "導向後台活動列表；若非 Admin（不應發生）需在後台入口被拒絕。",
              "expected": "/admin/activities"
            }
          ],
          "meta": {
            "reason": "openAdminPanel | navigate /admin/activities",
            "action": "openAdminPanel",
            "navigateTarget": "/admin/activities"
          }
        },
        {
          "id": "c.page_my_activities_admin.invokes.feature_logout.s.page_MyActivitiesPage_admin_Ready.to.feature_LogoutFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_my_activities_admin",
            "stateId": "page.MyActivitiesPage.admin.Ready"
          },
          "to": {
            "diagramId": "feature_logout",
            "stateId": "feature.LogoutFeature.Init"
          },
          "narrative": {
            "summary": "由我的活動登出（Admin）",
            "taskDescription": "Ready 觸發 chooseLogout 進入 LogoutFeature.Init。"
          },
          "validations": [
            {
              "id": "v.c.page_my_activities_admin.invokes.feature_logout.01",
              "type": "semantic-check",
              "description": "登出後回到 Guest。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "chooseLogout | navigate LogoutFeature",
            "action": "chooseLogout",
            "navigateTarget": "LogoutFeature"
          }
        },
        {
          "id": "c.page_my_activities_admin.invokes.page_activity_list_admin.s.page_MyActivitiesPage_admin_Empty.to.page_ActivityListPage_admin_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_my_activities_admin",
            "stateId": "page.MyActivitiesPage.admin.Empty"
          },
          "to": {
            "diagramId": "page_activity_list_admin",
            "stateId": "page.ActivityListPage.admin.Init"
          },
          "narrative": {
            "summary": "Empty 返回列表（Admin）",
            "taskDescription": "Empty 可回列表。"
          },
          "validations": [
            {
              "id": "v.c.page_my_activities_admin.invokes.page_activity_list_admin.02",
              "type": "url-equals",
              "description": "Empty 可回列表。",
              "expected": "/activities"
            }
          ],
          "meta": {
            "reason": "backToList | navigate /activities",
            "action": "backToList",
            "navigateTarget": "/activities"
          }
        },
        {
          "id": "c.page_my_activities_admin.invokes.page_admin_activity_list.s.page_MyActivitiesPage_admin_Empty.to.page_AdminActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_my_activities_admin",
            "stateId": "page.MyActivitiesPage.admin.Empty"
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": null
          },
          "narrative": {
            "summary": "Empty 下進後台（Admin）",
            "taskDescription": "Empty 下仍可進後台。"
          },
          "validations": [
            {
              "id": "v.c.page_my_activities_admin.invokes.page_admin_activity_list.02",
              "type": "url-equals",
              "description": "Empty 下仍可進後台。",
              "expected": "/admin/activities"
            }
          ],
          "meta": {
            "reason": "openAdminPanel | navigate /admin/activities",
            "action": "openAdminPanel",
            "navigateTarget": "/admin/activities"
          }
        },
        {
          "id": "c.page_my_activities_admin.invokes.feature_logout.s.page_MyActivitiesPage_admin_Empty.to.feature_LogoutFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_my_activities_admin",
            "stateId": "page.MyActivitiesPage.admin.Empty"
          },
          "to": {
            "diagramId": "feature_logout",
            "stateId": "feature.LogoutFeature.Init"
          },
          "narrative": {
            "summary": "Empty 下登出（Admin）",
            "taskDescription": "Empty 可登出。"
          },
          "validations": [
            {
              "id": "v.c.page_my_activities_admin.invokes.feature_logout.02",
              "type": "semantic-check",
              "description": "Empty 可登出。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "chooseLogout | navigate LogoutFeature",
            "action": "chooseLogout",
            "navigateTarget": "LogoutFeature"
          }
        },
        {
          "id": "c.feature_auth_login.invokes.page_my_activities_admin.s.feature_AuthLoginFeature_Done.to.page_MyActivitiesPage_admin_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_login",
            "stateId": null
          },
          "to": {
            "diagramId": "page_my_activities_admin",
            "stateId": "page.MyActivitiesPage.admin.Init"
          },
          "narrative": {
            "summary": "登入成功後導回我的活動（Admin）",
            "taskDescription": "在 AuthLoginFeature.Done 觸發 loginSucceededReturnToMyActivitiesAdmin 導航到 /my-activities，並進入 Admin 我的活動頁初始狀態。"
          },
          "validations": [
            {
              "id": "v.c.feature_auth_login.invokes.page_my_activities_admin.01",
              "type": "url-equals",
              "description": "returnTo 指向我的活動且角色為 Admin 時導回；顯示 Admin 導覽。",
              "expected": "/my-activities"
            }
          ],
          "meta": {
            "reason": "loginSucceededReturnToMyActivitiesAdmin | navigate /my-activities",
            "action": "loginSucceededReturnToMyActivitiesAdmin",
            "navigateTarget": "/my-activities"
          }
        },
        {
          "id": "c.page_entry.contains.page_my_activities_admin",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_my_activities_admin",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": "MyActivitiesPage",
        "featureName": null,
        "entryStateId": "page.MyActivitiesPage.admin.Init"
      }
    },
    {
      "id": "page_admin_activity_list",
      "name": "Admin Activity List Page",
      "level": "page",
      "parentDiagramId": "page_entry",
      "roles": [],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "⑫ Admin Activity List Page",
        "order": 12
      },
      "groups": [],
      "states": [
        {
          "id": "page.AdminActivityListPage.Init",
          "label": "AdminActivityListPage.Init",
          "type": "start",
          "groupId": null,
          "tags": [
            "page",
            "admin"
          ],
          "meta": {
            "diagramId": "page_admin_activity_list",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminActivityListPage.Init"
            }
          }
        },
        {
          "id": "page.AdminActivityListPage.Ready",
          "label": "AdminActivityListPage.Ready",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page",
            "admin"
          ],
          "meta": {
            "diagramId": "page_admin_activity_list",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminActivityListPage.Ready"
            }
          }
        },
        {
          "id": "page.AdminActivityListPage.Empty",
          "label": "AdminActivityListPage.Empty",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page",
            "admin"
          ],
          "meta": {
            "diagramId": "page_admin_activity_list",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminActivityListPage.Empty"
            }
          }
        },
        {
          "id": "page.AdminActivityListPage.Failed",
          "label": "AdminActivityListPage.Failed",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page",
            "admin"
          ],
          "meta": {
            "diagramId": "page_admin_activity_list",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminActivityListPage.Failed"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.page_admin_activity_list.0002",
          "from": "page.AdminActivityListPage.Init",
          "to": "page.AdminActivityListPage.Ready",
          "event": "loadAdminActivities",
          "roles": [],
          "narrative": {
            "summary": "載入後台活動列表成功",
            "taskDescription": "Admin 載入成功後進入 Ready。"
          },
          "validations": [
            {
              "id": "v.t.page_admin_activity_list.0002.01",
              "type": "network-success",
              "description": "Admin 可成功載入後台活動列表；UI 顯示活動狀態（draft/published/full/closed/archived）與可用操作入口（建立/編輯/查看名單）。",
              "expected": "HTTP 200"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "loadAdminActivities"
          },
          "meta": {
            "diagramId": "page_admin_activity_list",
            "source": {
              "raw": "AdminActivityListPage.Init --> AdminActivityListPage.Ready : loadAdminActivities"
            }
          }
        },
        {
          "id": "t.page_admin_activity_list.0003",
          "from": "page.AdminActivityListPage.Init",
          "to": "page.AdminActivityListPage.Empty",
          "event": "loadEmpty",
          "roles": [],
          "narrative": {
            "summary": "後台活動列表為空",
            "taskDescription": "無活動時進入 Empty。"
          },
          "validations": [
            {
              "id": "v.t.page_admin_activity_list.0003.01",
              "type": "network-success",
              "description": "無活動時顯示 Empty；仍提供建立活動入口。",
              "expected": "HTTP 200 (empty list)"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "loadEmpty"
          },
          "meta": {
            "diagramId": "page_admin_activity_list",
            "source": {
              "raw": "AdminActivityListPage.Init --> AdminActivityListPage.Empty : loadEmpty"
            }
          }
        },
        {
          "id": "t.page_admin_activity_list.0004",
          "from": "page.AdminActivityListPage.Init",
          "to": "page.AdminActivityListPage.Failed",
          "event": "loadFailed",
          "roles": [],
          "narrative": {
            "summary": "載入後台活動列表失敗",
            "taskDescription": "載入失敗時進入 Failed。"
          },
          "validations": [
            {
              "id": "v.t.page_admin_activity_list.0004.01",
              "type": "network-failed",
              "description": "載入失敗顯示 Failed 與重試。",
              "expected": "HTTP 5xx"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "loadFailed"
          },
          "meta": {
            "diagramId": "page_admin_activity_list",
            "source": {
              "raw": "AdminActivityListPage.Init --> AdminActivityListPage.Failed : loadFailed"
            }
          }
        },
        {
          "id": "t.page_admin_activity_list.0005",
          "from": "page.AdminActivityListPage.Failed",
          "to": "page.AdminActivityListPage.Init",
          "event": "retryLoad",
          "roles": [],
          "narrative": {
            "summary": "重試載入後台列表",
            "taskDescription": "Failed 觸發 retryLoad 回到 Init。"
          },
          "validations": [
            {
              "id": "v.t.page_admin_activity_list.0005.01",
              "type": "semantic-check",
              "description": "重試重新載入。",
              "expected": null
            }
          ],
          "intent": {
            "category": "action",
            "summary": "retryLoad"
          },
          "meta": {
            "diagramId": "page_admin_activity_list",
            "source": {
              "raw": "AdminActivityListPage.Failed --> AdminActivityListPage.Init : retryLoad | navigate /admin/activities"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_admin_activity_list.invokes.page_login.s.page_AdminActivityListPage_Init.to.page_LoginPage_guest_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Init"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.guest.Init"
          },
          "narrative": {
            "summary": "後台需登入",
            "taskDescription": "Guest 進入後台路由導向 /login 並保留 returnTo=/admin/activities。"
          },
          "validations": [
            {
              "id": "v.c.page_admin_activity_list.invokes.page_login.01",
              "type": "url-equals",
              "description": "Guest 進入後台路由時 API 回 401；前端導向 `/login` 並保留 returnTo=`/admin/activities`。",
              "expected": "/login"
            }
          ],
          "meta": {
            "reason": "requireLoginReturnToAdminActivities | navigate /login",
            "action": "requireLoginReturnToAdminActivities",
            "navigateTarget": "/login",
            "returnTo": "/admin/activities"
          }
        },
        {
          "id": "c.page_admin_activity_list.invokes.page_activity_list_member.s.page_AdminActivityListPage_Init.to.page_ActivityListPage_member_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Init"
          },
          "to": {
            "diagramId": "page_activity_list_member",
            "stateId": "page.ActivityListPage.member.Init"
          },
          "narrative": {
            "summary": "拒絕非 Admin（Member）",
            "taskDescription": "Member 進入後台 API 回 403，前端導回 /activities。"
          },
          "validations": [
            {
              "id": "v.c.page_admin_activity_list.invokes.page_activity_list_member.01",
              "type": "url-equals",
              "description": "Member 進入後台路由時 API 回 403；前端導回 `/activities` 並顯示無權限提示；不反覆導向登入。",
              "expected": "/activities"
            }
          ],
          "meta": {
            "reason": "denyNonAdminReturnToPublic | navigate /activities",
            "action": "denyNonAdminReturnToPublic",
            "navigateTarget": "/activities"
          }
        },
        {
          "id": "c.page_admin_activity_list.invokes.page_admin_activity_create.s.page_AdminActivityListPage_Ready.to.page_AdminActivityCreatePage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Ready"
          },
          "to": {
            "diagramId": "page_admin_activity_create",
            "stateId": null
          },
          "narrative": {
            "summary": "建立活動（後台）",
            "taskDescription": "Ready 點擊建立導向 /admin/activities/new。"
          },
          "validations": [
            {
              "id": "v.c.page_admin_activity_list.invokes.page_admin_activity_create.01",
              "type": "url-equals",
              "description": "導向建立頁；僅 Admin 可達；表單顯示並可輸入必要欄位。",
              "expected": "/admin/activities/new"
            }
          ],
          "meta": {
            "reason": "clickCreate | navigate /admin/activities/new",
            "action": "clickCreate",
            "navigateTarget": "/admin/activities/new"
          }
        },
        {
          "id": "c.page_admin_activity_list.invokes.page_admin_activity_edit.s.page_AdminActivityListPage_Ready.to.page_AdminActivityEditPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Ready"
          },
          "to": {
            "diagramId": "page_admin_activity_edit",
            "stateId": null
          },
          "narrative": {
            "summary": "編輯活動（後台）",
            "taskDescription": "Ready 點擊編輯導向 /admin/activities/:activityId/edit。"
          },
          "validations": [
            {
              "id": "v.c.page_admin_activity_list.invokes.page_admin_activity_edit.01",
              "type": "url-equals",
              "description": "導向編輯頁；ActivityId 正確。",
              "expected": "/admin/activities/:activityId/edit"
            }
          ],
          "meta": {
            "reason": "clickEdit | navigate /admin/activities/:activityId/edit",
            "action": "clickEdit",
            "navigateTarget": "/admin/activities/:activityId/edit"
          }
        },
        {
          "id": "c.page_admin_activity_list.invokes.page_admin_activity_registrations.s.page_AdminActivityListPage_Ready.to.page_AdminActivityRegistrationsPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Ready"
          },
          "to": {
            "diagramId": "page_admin_activity_registrations",
            "stateId": null
          },
          "narrative": {
            "summary": "查看報名名單（後台）",
            "taskDescription": "Ready 開啟名單導向 /admin/activities/:activityId/registrations。"
          },
          "validations": [
            {
              "id": "v.c.page_admin_activity_list.invokes.page_admin_activity_registrations.01",
              "type": "url-equals",
              "description": "導向報名名單頁；僅 Admin 可達。",
              "expected": "/admin/activities/:activityId/registrations"
            }
          ],
          "meta": {
            "reason": "openRegistrations | navigate /admin/activities/:activityId/registrations",
            "action": "openRegistrations",
            "navigateTarget": "/admin/activities/:activityId/registrations"
          }
        },
        {
          "id": "c.page_admin_activity_list.invokes.page_activity_list_admin.s.page_AdminActivityListPage_Ready.to.page_ActivityListPage_admin_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Ready"
          },
          "to": {
            "diagramId": "page_activity_list_admin",
            "stateId": "page.ActivityListPage.admin.Init"
          },
          "narrative": {
            "summary": "返回公開列表（Admin）",
            "taskDescription": "Ready 觸發 backToPublic 導向 /activities。"
          },
          "validations": [
            {
              "id": "v.c.page_admin_activity_list.invokes.page_activity_list_admin.01",
              "type": "url-equals",
              "description": "返回公開列表並保持 Admin 導覽。",
              "expected": "/activities"
            }
          ],
          "meta": {
            "reason": "backToPublic | navigate /activities",
            "action": "backToPublic",
            "navigateTarget": "/activities"
          }
        },
        {
          "id": "c.page_admin_activity_list.invokes.feature_logout.s.page_AdminActivityListPage_Ready.to.feature_LogoutFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Ready"
          },
          "to": {
            "diagramId": "feature_logout",
            "stateId": "feature.LogoutFeature.Init"
          },
          "narrative": {
            "summary": "後台登出",
            "taskDescription": "Ready 觸發 chooseLogout 進入 LogoutFeature.Init。"
          },
          "validations": [
            {
              "id": "v.c.page_admin_activity_list.invokes.feature_logout.01",
              "type": "semantic-check",
              "description": "登出後回到 Guest；再次進後台會被導向登入。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "chooseLogout | navigate LogoutFeature",
            "action": "chooseLogout",
            "navigateTarget": "LogoutFeature"
          }
        },
        {
          "id": "c.page_admin_activity_list.invokes.page_admin_activity_create.s.page_AdminActivityListPage_Empty.to.page_AdminActivityCreatePage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Empty"
          },
          "to": {
            "diagramId": "page_admin_activity_create",
            "stateId": null
          },
          "narrative": {
            "summary": "Empty 下建立活動",
            "taskDescription": "Empty 仍可建立活動。"
          },
          "validations": [
            {
              "id": "v.c.page_admin_activity_list.invokes.page_admin_activity_create.02",
              "type": "url-equals",
              "description": "Empty 仍可建立活動。",
              "expected": "/admin/activities/new"
            }
          ],
          "meta": {
            "reason": "clickCreate | navigate /admin/activities/new",
            "action": "clickCreate",
            "navigateTarget": "/admin/activities/new"
          }
        },
        {
          "id": "c.page_admin_activity_list.invokes.page_activity_list_admin.s.page_AdminActivityListPage_Empty.to.page_ActivityListPage_admin_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Empty"
          },
          "to": {
            "diagramId": "page_activity_list_admin",
            "stateId": "page.ActivityListPage.admin.Init"
          },
          "narrative": {
            "summary": "Empty 返回公開列表",
            "taskDescription": "Empty 返回公開列表。"
          },
          "validations": [
            {
              "id": "v.c.page_admin_activity_list.invokes.page_activity_list_admin.02",
              "type": "url-equals",
              "description": "返回公開列表。",
              "expected": "/activities"
            }
          ],
          "meta": {
            "reason": "backToPublic | navigate /activities",
            "action": "backToPublic",
            "navigateTarget": "/activities"
          }
        },
        {
          "id": "c.page_admin_activity_list.invokes.feature_logout.s.page_AdminActivityListPage_Empty.to.feature_LogoutFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Empty"
          },
          "to": {
            "diagramId": "feature_logout",
            "stateId": "feature.LogoutFeature.Init"
          },
          "narrative": {
            "summary": "Empty 下登出",
            "taskDescription": "Empty 可登出。"
          },
          "validations": [
            {
              "id": "v.c.page_admin_activity_list.invokes.feature_logout.02",
              "type": "semantic-check",
              "description": "Empty 可登出。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "chooseLogout | navigate LogoutFeature",
            "action": "chooseLogout",
            "navigateTarget": "LogoutFeature"
          }
        },
        {
          "id": "c.feature_auth_login.invokes.page_admin_activity_list.s.feature_AuthLoginFeature_Done.to.page_AdminActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_login",
            "stateId": null
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Init"
          },
          "narrative": {
            "summary": "登入成功後導向管理後台活動列表",
            "taskDescription": "在 AuthLoginFeature.Done 觸發 loginSucceededReturnToAdminActivities 導航到 /admin/activities，並進入後台活動列表初始狀態。"
          },
          "validations": [
            {
              "id": "v.c.feature_auth_login.invokes.page_admin_activity_list.01",
              "type": "url-equals",
              "description": "returnTo 指向後台活動列表時：若角色為 Admin 可進入；若角色為 Member 應被後台入口拒絕並以 403 收斂（不應進入後台 Ready）。",
              "expected": "/admin/activities"
            }
          ],
          "meta": {
            "reason": "loginSucceededReturnToAdminActivities | navigate /admin/activities",
            "action": "loginSucceededReturnToAdminActivities",
            "navigateTarget": "/admin/activities"
          }
        },
        {
          "id": "c.feature_admin_create_activity.invokes.page_admin_activity_list.s.feature_AdminCreateActivityFeature_DoneDraft.to.page_AdminActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_create_activity",
            "stateId": "feature.AdminCreateActivityFeature.DoneDraft"
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Init"
          },
          "narrative": {
            "summary": "建立成功（draft）回後台列表",
            "taskDescription": "建立為 draft 後回到 /admin/activities。"
          },
          "validations": [
            {
              "id": "v.c.feature_admin_create_activity.invokes.page_admin_activity_list.01",
              "type": "url-equals",
              "description": "回後台列表可看到新活動且 status=draft。",
              "expected": "/admin/activities"
            }
          ],
          "meta": {
            "reason": "backToAdminList | navigate /admin/activities",
            "action": "backToAdminList",
            "navigateTarget": "/admin/activities"
          }
        },
        {
          "id": "c.feature_admin_create_activity.invokes.page_admin_activity_list.s.feature_AdminCreateActivityFeature_DonePublished.to.page_AdminActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_create_activity",
            "stateId": "feature.AdminCreateActivityFeature.DonePublished"
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Init"
          },
          "narrative": {
            "summary": "建立成功（published）回後台列表",
            "taskDescription": "建立並發佈後回到 /admin/activities。"
          },
          "validations": [
            {
              "id": "v.c.feature_admin_create_activity.invokes.page_admin_activity_list.02",
              "type": "url-equals",
              "description": "回後台列表可看到新活動且 status=published。",
              "expected": "/admin/activities"
            }
          ],
          "meta": {
            "reason": "backToAdminList | navigate /admin/activities",
            "action": "backToAdminList",
            "navigateTarget": "/admin/activities"
          }
        },
        {
          "id": "c.page_entry.contains.page_admin_activity_list",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": "AdminActivityListPage",
        "featureName": null,
        "entryStateId": "page.AdminActivityListPage.Init"
      }
    },
    {
      "id": "page_admin_activity_create",
      "name": "Admin Activity Create Page",
      "level": "page",
      "parentDiagramId": "page_entry",
      "roles": [],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "⑬ Admin Activity Create Page",
        "order": 13
      },
      "groups": [],
      "states": [
        {
          "id": "page.AdminActivityCreatePage.Init",
          "label": "AdminActivityCreatePage.Init",
          "type": "start",
          "groupId": null,
          "tags": [
            "page",
            "admin"
          ],
          "meta": {
            "diagramId": "page_admin_activity_create",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminActivityCreatePage.Init"
            }
          }
        },
        {
          "id": "page.AdminActivityCreatePage.Editing",
          "label": "AdminActivityCreatePage.Editing",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page",
            "admin"
          ],
          "meta": {
            "diagramId": "page_admin_activity_create",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminActivityCreatePage.Editing"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.page_admin_activity_create.0002",
          "from": "page.AdminActivityCreatePage.Init",
          "to": "page.AdminActivityCreatePage.Editing",
          "event": "showCreateForm",
          "roles": [],
          "narrative": {
            "summary": "顯示建立表單",
            "taskDescription": "權限驗證通過後顯示表單並進入 Editing。"
          },
          "validations": [
            {
              "id": "v.t.page_admin_activity_create.0002.01",
              "type": "element-visible",
              "description": "顯示建立表單；需能輸入 title/description/date/location/deadline/capacity；並在前端做基本驗證（capacity 正整數、date>deadline）。",
              "expected": "create form"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "showCreateForm"
          },
          "meta": {
            "diagramId": "page_admin_activity_create",
            "source": {
              "raw": "AdminActivityCreatePage.Init --> AdminActivityCreatePage.Editing : showCreateForm"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_admin_activity_create.invokes.page_login.s.page_AdminActivityCreatePage_Init.to.page_LoginPage_guest_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_create",
            "stateId": "page.AdminActivityCreatePage.Init"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.guest.Init"
          },
          "narrative": {
            "summary": "建立頁需登入",
            "taskDescription": "Guest 進入建立頁導向 /login 並保留 returnTo。"
          },
          "validations": [
            {
              "id": "v.c.page_admin_activity_create.invokes.page_login.01",
              "type": "url-equals",
              "description": "Guest 進入建立頁 API 回 401；導向登入並保留 returnTo。",
              "expected": "/login"
            }
          ],
          "meta": {
            "reason": "requireLoginReturnToAdminCreate | navigate /login",
            "action": "requireLoginReturnToAdminCreate",
            "navigateTarget": "/login",
            "returnTo": "/admin/activities/new"
          }
        },
        {
          "id": "c.page_admin_activity_create.invokes.page_activity_list_member.s.page_AdminActivityCreatePage_Init.to.page_ActivityListPage_member_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_create",
            "stateId": "page.AdminActivityCreatePage.Init"
          },
          "to": {
            "diagramId": "page_activity_list_member",
            "stateId": "page.ActivityListPage.member.Init"
          },
          "narrative": {
            "summary": "拒絕非 Admin（Member）",
            "taskDescription": "Member 進入建立頁導回 /activities。"
          },
          "validations": [
            {
              "id": "v.c.page_admin_activity_create.invokes.page_activity_list_member.01",
              "type": "url-equals",
              "description": "Member 進入建立頁 API 回 403；導回 `/activities` 並提示無權限。",
              "expected": "/activities"
            }
          ],
          "meta": {
            "reason": "denyNonAdminReturnToPublic | navigate /activities",
            "action": "denyNonAdminReturnToPublic",
            "navigateTarget": "/activities"
          }
        },
        {
          "id": "c.page_admin_activity_create.invokes.feature_admin_create_activity.s.page_AdminActivityCreatePage_Editing.to.feature_AdminCreateActivityFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_create",
            "stateId": "page.AdminActivityCreatePage.Editing"
          },
          "to": {
            "diagramId": "feature_admin_create_activity",
            "stateId": "feature.AdminCreateActivityFeature.Init"
          },
          "narrative": {
            "summary": "送出建立活動",
            "taskDescription": "Editing 送出後進入 AdminCreateActivityFeature.Init。"
          },
          "validations": [
            {
              "id": "v.c.page_admin_activity_create.invokes.feature_admin_create_activity.01",
              "type": "semantic-check",
              "description": "送出時 UI 顯示 loading 並禁用提交；API 會在伺服器端再次驗證 date>deadline、capacity>0；成功後建立活動並寫入 audit log。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "submitCreate | navigate AdminCreateActivityFeature",
            "action": "submitCreate",
            "navigateTarget": "AdminCreateActivityFeature"
          }
        },
        {
          "id": "c.page_admin_activity_create.invokes.page_admin_activity_list.s.page_AdminActivityCreatePage_Editing.to.page_AdminActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_create",
            "stateId": "page.AdminActivityCreatePage.Editing"
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Init"
          },
          "narrative": {
            "summary": "取消建立活動",
            "taskDescription": "Editing 取消後回後台列表。"
          },
          "validations": [
            {
              "id": "v.c.page_admin_activity_create.invokes.page_admin_activity_list.01",
              "type": "url-equals",
              "description": "取消後回後台活動列表；未建立活動資料。",
              "expected": "/admin/activities"
            }
          ],
          "meta": {
            "reason": "cancelCreate | navigate /admin/activities",
            "action": "cancelCreate",
            "navigateTarget": "/admin/activities"
          }
        },
        {
          "id": "c.feature_admin_create_activity.invokes.page_admin_activity_create.s.feature_AdminCreateActivityFeature_Failed.to.page_AdminActivityCreatePage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_create_activity",
            "stateId": "feature.AdminCreateActivityFeature.Failed"
          },
          "to": {
            "diagramId": "page_admin_activity_create",
            "stateId": "page.AdminActivityCreatePage.Init"
          },
          "narrative": {
            "summary": "建立失敗回建立頁",
            "taskDescription": "建立失敗後回到 /admin/activities/new。"
          },
          "validations": [
            {
              "id": "v.c.feature_admin_create_activity.invokes.page_admin_activity_create.01",
              "type": "url-equals",
              "description": "回建立頁並保留錯誤提示與可修正欄位。",
              "expected": "/admin/activities/new"
            }
          ],
          "meta": {
            "reason": "backToCreate | navigate /admin/activities/new",
            "action": "backToCreate",
            "navigateTarget": "/admin/activities/new"
          }
        },
        {
          "id": "c.feature_admin_create_activity.invokes.page_admin_activity_create.s.feature_AdminCreateActivityFeature_Canceled.to.page_AdminActivityCreatePage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_create_activity",
            "stateId": "feature.AdminCreateActivityFeature.Canceled"
          },
          "to": {
            "diagramId": "page_admin_activity_create",
            "stateId": "page.AdminActivityCreatePage.Init"
          },
          "narrative": {
            "summary": "取消建立回建立頁",
            "taskDescription": "取消後回到 /admin/activities/new；資料未建立。"
          },
          "validations": [
            {
              "id": "v.c.feature_admin_create_activity.invokes.page_admin_activity_create.02",
              "type": "url-equals",
              "description": "回建立頁；資料未建立。",
              "expected": "/admin/activities/new"
            }
          ],
          "meta": {
            "reason": "backToCreate | navigate /admin/activities/new",
            "action": "backToCreate",
            "navigateTarget": "/admin/activities/new"
          }
        },
        {
          "id": "c.page_entry.contains.page_admin_activity_create",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_admin_activity_create",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": "AdminActivityCreatePage",
        "featureName": null,
        "entryStateId": "page.AdminActivityCreatePage.Init"
      }
    },
    {
      "id": "page_admin_activity_edit",
      "name": "Admin Activity Edit Page",
      "level": "page",
      "parentDiagramId": "page_entry",
      "roles": [],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "⑭ Admin Activity Edit Page",
        "order": 14
      },
      "groups": [],
      "states": [
        {
          "id": "page.AdminActivityEditPage.Init",
          "label": "AdminActivityEditPage.Init",
          "type": "start",
          "groupId": null,
          "tags": [
            "page",
            "admin"
          ],
          "meta": {
            "diagramId": "page_admin_activity_edit",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminActivityEditPage.Init"
            }
          }
        },
        {
          "id": "page.AdminActivityEditPage.Editing",
          "label": "AdminActivityEditPage.Editing",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page",
            "admin"
          ],
          "meta": {
            "diagramId": "page_admin_activity_edit",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminActivityEditPage.Editing"
            }
          }
        },
        {
          "id": "page.AdminActivityEditPage.NotFound",
          "label": "AdminActivityEditPage.NotFound",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page",
            "admin"
          ],
          "meta": {
            "diagramId": "page_admin_activity_edit",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminActivityEditPage.NotFound"
            }
          }
        },
        {
          "id": "page.AdminActivityEditPage.Failed",
          "label": "AdminActivityEditPage.Failed",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page",
            "admin"
          ],
          "meta": {
            "diagramId": "page_admin_activity_edit",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminActivityEditPage.Failed"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.page_admin_activity_edit.0002",
          "from": "page.AdminActivityEditPage.Init",
          "to": "page.AdminActivityEditPage.Editing",
          "event": "loadActivityForEdit",
          "roles": [],
          "narrative": {
            "summary": "載入活動以供編輯",
            "taskDescription": "Admin 載入活動成功後顯示表單，進入 Editing。"
          },
          "validations": [
            {
              "id": "v.t.page_admin_activity_edit.0002.01",
              "type": "network-success",
              "description": "Admin 載入活動資料成功後顯示表單；欄位與 Step 1 Activity 欄位一致。",
              "expected": "HTTP 200"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "loadActivityForEdit"
          },
          "meta": {
            "diagramId": "page_admin_activity_edit",
            "source": {
              "raw": "AdminActivityEditPage.Init --> AdminActivityEditPage.Editing : loadActivityForEdit"
            }
          }
        },
        {
          "id": "t.page_admin_activity_edit.0003",
          "from": "page.AdminActivityEditPage.Init",
          "to": "page.AdminActivityEditPage.NotFound",
          "event": "loadNotFound",
          "roles": [],
          "narrative": {
            "summary": "活動不存在（編輯頁）",
            "taskDescription": "API 回 404 時進入 NotFound。"
          },
          "validations": [
            {
              "id": "v.t.page_admin_activity_edit.0003.01",
              "type": "network-failed",
              "description": "API 回 404（活動不存在）；UI 顯示找不到活動並提供返回後台列表入口。",
              "expected": "HTTP 404"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "loadNotFound"
          },
          "meta": {
            "diagramId": "page_admin_activity_edit",
            "source": {
              "raw": "AdminActivityEditPage.Init --> AdminActivityEditPage.NotFound : loadNotFound"
            }
          }
        },
        {
          "id": "t.page_admin_activity_edit.0004",
          "from": "page.AdminActivityEditPage.Init",
          "to": "page.AdminActivityEditPage.Failed",
          "event": "loadFailed",
          "roles": [],
          "narrative": {
            "summary": "載入失敗（編輯頁）",
            "taskDescription": "API 失敗時進入 Failed。"
          },
          "validations": [
            {
              "id": "v.t.page_admin_activity_edit.0004.01",
              "type": "network-failed",
              "description": "API 失敗顯示 Failed 與重試。",
              "expected": "HTTP 5xx"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "loadFailed"
          },
          "meta": {
            "diagramId": "page_admin_activity_edit",
            "source": {
              "raw": "AdminActivityEditPage.Init --> AdminActivityEditPage.Failed : loadFailed"
            }
          }
        },
        {
          "id": "t.page_admin_activity_edit.0005",
          "from": "page.AdminActivityEditPage.Failed",
          "to": "page.AdminActivityEditPage.Init",
          "event": "retryLoad",
          "roles": [],
          "narrative": {
            "summary": "重試載入（編輯頁）",
            "taskDescription": "Failed 觸發 retryLoad 回到 Init。"
          },
          "validations": [
            {
              "id": "v.t.page_admin_activity_edit.0005.01",
              "type": "semantic-check",
              "description": "重試重新載入。",
              "expected": null
            }
          ],
          "intent": {
            "category": "action",
            "summary": "retryLoad"
          },
          "meta": {
            "diagramId": "page_admin_activity_edit",
            "source": {
              "raw": "AdminActivityEditPage.Failed --> AdminActivityEditPage.Init : retryLoad | navigate /admin/activities/:activityId/edit"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_admin_activity_edit.invokes.page_login.s.page_AdminActivityEditPage_Init.to.page_LoginPage_guest_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_edit",
            "stateId": "page.AdminActivityEditPage.Init"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.guest.Init"
          },
          "narrative": {
            "summary": "編輯頁需登入",
            "taskDescription": "Guest 進入編輯頁導向 /login 並保留 returnTo。"
          },
          "validations": [
            {
              "id": "v.c.page_admin_activity_edit.invokes.page_login.01",
              "type": "url-equals",
              "description": "Guest 進入編輯頁 API 回 401；導向登入並保留 returnTo。",
              "expected": "/login"
            }
          ],
          "meta": {
            "reason": "requireLoginReturnToAdminEdit | navigate /login",
            "action": "requireLoginReturnToAdminEdit",
            "navigateTarget": "/login",
            "returnTo": "/admin/activities/:activityId/edit"
          }
        },
        {
          "id": "c.page_admin_activity_edit.invokes.page_activity_list_member.s.page_AdminActivityEditPage_Init.to.page_ActivityListPage_member_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_edit",
            "stateId": "page.AdminActivityEditPage.Init"
          },
          "to": {
            "diagramId": "page_activity_list_member",
            "stateId": "page.ActivityListPage.member.Init"
          },
          "narrative": {
            "summary": "拒絕非 Admin（Member）",
            "taskDescription": "Member 進入編輯頁導回 /activities。"
          },
          "validations": [
            {
              "id": "v.c.page_admin_activity_edit.invokes.page_activity_list_member.01",
              "type": "url-equals",
              "description": "Member 進入編輯頁 API 回 403；導回 `/activities` 並提示無權限。",
              "expected": "/activities"
            }
          ],
          "meta": {
            "reason": "denyNonAdminReturnToPublic | navigate /activities",
            "action": "denyNonAdminReturnToPublic",
            "navigateTarget": "/activities"
          }
        },
        {
          "id": "c.page_admin_activity_edit.invokes.feature_admin_update_activity.s.page_AdminActivityEditPage_Editing.to.feature_AdminUpdateActivityFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_edit",
            "stateId": "page.AdminActivityEditPage.Editing"
          },
          "to": {
            "diagramId": "feature_admin_update_activity",
            "stateId": "feature.AdminUpdateActivityFeature.Init"
          },
          "narrative": {
            "summary": "送出更新活動",
            "taskDescription": "Editing 送出更新進入 AdminUpdateActivityFeature.Init。"
          },
          "validations": [
            {
              "id": "v.c.page_admin_activity_edit.invokes.feature_admin_update_activity.01",
              "type": "semantic-check",
              "description": "送出更新時 UI 顯示 loading 並禁用提交；伺服器端驗證 date>deadline、capacity>0；成功後更新 updated_at 並寫入 audit log。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "submitUpdate | navigate AdminUpdateActivityFeature",
            "action": "submitUpdate",
            "navigateTarget": "AdminUpdateActivityFeature"
          }
        },
        {
          "id": "c.feature_admin_update_activity.invokes.page_admin_activity_edit.s.feature_AdminUpdateActivityFeature_Done.to.page_AdminActivityEditPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_update_activity",
            "stateId": "feature.AdminUpdateActivityFeature.Done"
          },
          "to": {
            "diagramId": "page_admin_activity_edit",
            "stateId": "page.AdminActivityEditPage.Init"
          },
          "narrative": {
            "summary": "更新成功回編輯頁",
            "taskDescription": "更新成功後回到 /admin/activities/:activityId/edit 並重新載入。"
          },
          "validations": [
            {
              "id": "v.c.feature_admin_update_activity.invokes.page_admin_activity_edit.01",
              "type": "url-equals",
              "description": "回到編輯頁重新載入後顯示最新資料；避免顯示舊值。",
              "expected": "/admin/activities/:activityId/edit"
            }
          ],
          "meta": {
            "reason": "returnToEdit | navigate /admin/activities/:activityId/edit",
            "action": "returnToEdit",
            "navigateTarget": "/admin/activities/:activityId/edit"
          }
        },
        {
          "id": "c.feature_admin_update_activity.invokes.page_admin_activity_edit.s.feature_AdminUpdateActivityFeature_Failed.to.page_AdminActivityEditPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_update_activity",
            "stateId": "feature.AdminUpdateActivityFeature.Failed"
          },
          "to": {
            "diagramId": "page_admin_activity_edit",
            "stateId": "page.AdminActivityEditPage.Init"
          },
          "narrative": {
            "summary": "更新失敗回編輯頁",
            "taskDescription": "更新失敗回到編輯頁顯示錯誤並允許重試。"
          },
          "validations": [
            {
              "id": "v.c.feature_admin_update_activity.invokes.page_admin_activity_edit.02",
              "type": "url-equals",
              "description": "回編輯頁顯示錯誤並允許重試。",
              "expected": "/admin/activities/:activityId/edit"
            }
          ],
          "meta": {
            "reason": "returnToEdit | navigate /admin/activities/:activityId/edit",
            "action": "returnToEdit",
            "navigateTarget": "/admin/activities/:activityId/edit"
          }
        },
        {
          "id": "c.feature_admin_update_activity.invokes.page_admin_activity_edit.s.feature_AdminUpdateActivityFeature_Canceled.to.page_AdminActivityEditPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_update_activity",
            "stateId": "feature.AdminUpdateActivityFeature.Canceled"
          },
          "to": {
            "diagramId": "page_admin_activity_edit",
            "stateId": "page.AdminActivityEditPage.Init"
          },
          "narrative": {
            "summary": "取消更新回編輯頁",
            "taskDescription": "取消後回編輯頁維持未提交狀態。"
          },
          "validations": [
            {
              "id": "v.c.feature_admin_update_activity.invokes.page_admin_activity_edit.03",
              "type": "url-equals",
              "description": "回編輯頁維持未提交狀態。",
              "expected": "/admin/activities/:activityId/edit"
            }
          ],
          "meta": {
            "reason": "returnToEdit | navigate /admin/activities/:activityId/edit",
            "action": "returnToEdit",
            "navigateTarget": "/admin/activities/:activityId/edit"
          }
        },
        {
          "id": "c.page_admin_activity_edit.invokes.feature_admin_change_activity_status.s.page_AdminActivityEditPage_Editing.to.feature_AdminChangeActivityStatusFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_edit",
            "stateId": "page.AdminActivityEditPage.Editing"
          },
          "to": {
            "diagramId": "feature_admin_change_activity_status",
            "stateId": "feature.AdminChangeActivityStatusFeature.Init"
          },
          "narrative": {
            "summary": "變更活動狀態",
            "taskDescription": "Editing 觸發 changeStatus 進入狀態變更 feature。"
          },
          "validations": [
            {
              "id": "v.c.page_admin_activity_edit.invokes.feature_admin_change_activity_status.01",
              "type": "semantic-check",
              "description": "只能提交合法狀態轉換（draft->published、published/full->closed、closed/draft->archived）；非法轉換 API 回 400/409 並在 UI 顯示錯誤。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "changeStatus | navigate AdminChangeActivityStatusFeature",
            "action": "changeStatus",
            "navigateTarget": "AdminChangeActivityStatusFeature"
          }
        },
        {
          "id": "c.feature_admin_change_activity_status.invokes.page_admin_activity_edit.s.feature_AdminChangeActivityStatusFeature_Done.to.page_AdminActivityEditPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_change_activity_status",
            "stateId": "feature.AdminChangeActivityStatusFeature.Done"
          },
          "to": {
            "diagramId": "page_admin_activity_edit",
            "stateId": "page.AdminActivityEditPage.Init"
          },
          "narrative": {
            "summary": "狀態變更成功回編輯頁",
            "taskDescription": "狀態變更成功後回到 /admin/activities/:activityId/edit。"
          },
          "validations": [
            {
              "id": "v.c.feature_admin_change_activity_status.invokes.page_admin_activity_edit.01",
              "type": "url-equals",
              "description": "回編輯頁顯示最新 status；可用操作按合法性呈現。",
              "expected": "/admin/activities/:activityId/edit"
            }
          ],
          "meta": {
            "reason": "returnToEdit | navigate /admin/activities/:activityId/edit",
            "action": "returnToEdit",
            "navigateTarget": "/admin/activities/:activityId/edit"
          }
        },
        {
          "id": "c.feature_admin_change_activity_status.invokes.page_admin_activity_edit.s.feature_AdminChangeActivityStatusFeature_Failed.to.page_AdminActivityEditPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_change_activity_status",
            "stateId": "feature.AdminChangeActivityStatusFeature.Failed"
          },
          "to": {
            "diagramId": "page_admin_activity_edit",
            "stateId": "page.AdminActivityEditPage.Init"
          },
          "narrative": {
            "summary": "狀態變更失敗回編輯頁",
            "taskDescription": "狀態變更失敗回到編輯頁顯示錯誤並允許重試。"
          },
          "validations": [
            {
              "id": "v.c.feature_admin_change_activity_status.invokes.page_admin_activity_edit.02",
              "type": "url-equals",
              "description": "回編輯頁顯示錯誤並允許重試。",
              "expected": "/admin/activities/:activityId/edit"
            }
          ],
          "meta": {
            "reason": "returnToEdit | navigate /admin/activities/:activityId/edit",
            "action": "returnToEdit",
            "navigateTarget": "/admin/activities/:activityId/edit"
          }
        },
        {
          "id": "c.feature_admin_change_activity_status.invokes.page_admin_activity_edit.s.feature_AdminChangeActivityStatusFeature_Canceled.to.page_AdminActivityEditPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_change_activity_status",
            "stateId": "feature.AdminChangeActivityStatusFeature.Canceled"
          },
          "to": {
            "diagramId": "page_admin_activity_edit",
            "stateId": "page.AdminActivityEditPage.Init"
          },
          "narrative": {
            "summary": "取消狀態變更回編輯頁",
            "taskDescription": "取消後回編輯頁不改變狀態。"
          },
          "validations": [
            {
              "id": "v.c.feature_admin_change_activity_status.invokes.page_admin_activity_edit.03",
              "type": "url-equals",
              "description": "回編輯頁不改變狀態。",
              "expected": "/admin/activities/:activityId/edit"
            }
          ],
          "meta": {
            "reason": "returnToEdit | navigate /admin/activities/:activityId/edit",
            "action": "returnToEdit",
            "navigateTarget": "/admin/activities/:activityId/edit"
          }
        },
        {
          "id": "c.page_admin_activity_edit.invokes.page_admin_activity_list.s.page_AdminActivityEditPage_Editing.to.page_AdminActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_edit",
            "stateId": "page.AdminActivityEditPage.Editing"
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Init"
          },
          "narrative": {
            "summary": "返回後台列表（編輯頁）",
            "taskDescription": "Editing 觸發 backToAdminList 導向 /admin/activities。"
          },
          "validations": [
            {
              "id": "v.c.page_admin_activity_edit.invokes.page_admin_activity_list.01",
              "type": "url-equals",
              "description": "返回後台列表。",
              "expected": "/admin/activities"
            }
          ],
          "meta": {
            "reason": "backToAdminList | navigate /admin/activities",
            "action": "backToAdminList",
            "navigateTarget": "/admin/activities"
          }
        },
        {
          "id": "c.page_admin_activity_edit.invokes.page_admin_activity_list.s.page_AdminActivityEditPage_NotFound.to.page_AdminActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_edit",
            "stateId": "page.AdminActivityEditPage.NotFound"
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Init"
          },
          "narrative": {
            "summary": "NotFound 返回後台列表",
            "taskDescription": "NotFound 可回後台列表。"
          },
          "validations": [
            {
              "id": "v.c.page_admin_activity_edit.invokes.page_admin_activity_list.02",
              "type": "url-equals",
              "description": "NotFound 狀態可回後台列表。",
              "expected": "/admin/activities"
            }
          ],
          "meta": {
            "reason": "backToAdminList | navigate /admin/activities",
            "action": "backToAdminList",
            "navigateTarget": "/admin/activities"
          }
        },
        {
          "id": "c.page_entry.contains.page_admin_activity_edit",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_admin_activity_edit",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": "AdminActivityEditPage",
        "featureName": null,
        "entryStateId": "page.AdminActivityEditPage.Init"
      }
    },
    {
      "id": "page_admin_activity_registrations",
      "name": "Admin Activity Registrations Page",
      "level": "page",
      "parentDiagramId": "page_entry",
      "roles": [],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "⑮ Admin Activity Registrations Page",
        "order": 15
      },
      "groups": [],
      "states": [
        {
          "id": "page.AdminActivityRegistrationsPage.Init",
          "label": "AdminActivityRegistrationsPage.Init",
          "type": "start",
          "groupId": null,
          "tags": [
            "page",
            "admin"
          ],
          "meta": {
            "diagramId": "page_admin_activity_registrations",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminActivityRegistrationsPage.Init"
            }
          }
        },
        {
          "id": "page.AdminActivityRegistrationsPage.Ready",
          "label": "AdminActivityRegistrationsPage.Ready",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page",
            "admin"
          ],
          "meta": {
            "diagramId": "page_admin_activity_registrations",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminActivityRegistrationsPage.Ready"
            }
          }
        },
        {
          "id": "page.AdminActivityRegistrationsPage.Empty",
          "label": "AdminActivityRegistrationsPage.Empty",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page",
            "admin"
          ],
          "meta": {
            "diagramId": "page_admin_activity_registrations",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminActivityRegistrationsPage.Empty"
            }
          }
        },
        {
          "id": "page.AdminActivityRegistrationsPage.NotFound",
          "label": "AdminActivityRegistrationsPage.NotFound",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page",
            "admin"
          ],
          "meta": {
            "diagramId": "page_admin_activity_registrations",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminActivityRegistrationsPage.NotFound"
            }
          }
        },
        {
          "id": "page.AdminActivityRegistrationsPage.Failed",
          "label": "AdminActivityRegistrationsPage.Failed",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page",
            "admin"
          ],
          "meta": {
            "diagramId": "page_admin_activity_registrations",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminActivityRegistrationsPage.Failed"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.page_admin_activity_registrations.0002",
          "from": "page.AdminActivityRegistrationsPage.Init",
          "to": "page.AdminActivityRegistrationsPage.Ready",
          "event": "loadRegistrations",
          "roles": [],
          "narrative": {
            "summary": "載入名單成功",
            "taskDescription": "API 成功回傳名單後進入 Ready。"
          },
          "validations": [
            {
              "id": "v.t.page_admin_activity_registrations.0002.01",
              "type": "network-success",
              "description": "API 成功回傳名單；UI 顯示姓名/Email/報名時間；排序規則一致並可重現；資料與 Registration（canceled_at IS NULL）一致。",
              "expected": "HTTP 200"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "loadRegistrations"
          },
          "meta": {
            "diagramId": "page_admin_activity_registrations",
            "source": {
              "raw": "AdminActivityRegistrationsPage.Init --> AdminActivityRegistrationsPage.Ready : loadRegistrations"
            }
          }
        },
        {
          "id": "t.page_admin_activity_registrations.0003",
          "from": "page.AdminActivityRegistrationsPage.Init",
          "to": "page.AdminActivityRegistrationsPage.Empty",
          "event": "loadEmpty",
          "roles": [],
          "narrative": {
            "summary": "名單為空",
            "taskDescription": "無報名時進入 Empty。"
          },
          "validations": [
            {
              "id": "v.t.page_admin_activity_registrations.0003.01",
              "type": "network-success",
              "description": "無報名時顯示 Empty；仍可匯出（匯出內容為空名單）與執行關閉/下架（若規則允許）。",
              "expected": "HTTP 200 (empty list)"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "loadEmpty"
          },
          "meta": {
            "diagramId": "page_admin_activity_registrations",
            "source": {
              "raw": "AdminActivityRegistrationsPage.Init --> AdminActivityRegistrationsPage.Empty : loadEmpty"
            }
          }
        },
        {
          "id": "t.page_admin_activity_registrations.0004",
          "from": "page.AdminActivityRegistrationsPage.Init",
          "to": "page.AdminActivityRegistrationsPage.NotFound",
          "event": "loadNotFound",
          "roles": [],
          "narrative": {
            "summary": "活動不存在（名單頁）",
            "taskDescription": "API 回 404 時進入 NotFound。"
          },
          "validations": [
            {
              "id": "v.t.page_admin_activity_registrations.0004.01",
              "type": "network-failed",
              "description": "活動不存在 API 回 404；UI 顯示找不到活動。",
              "expected": "HTTP 404"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "loadNotFound"
          },
          "meta": {
            "diagramId": "page_admin_activity_registrations",
            "source": {
              "raw": "AdminActivityRegistrationsPage.Init --> AdminActivityRegistrationsPage.NotFound : loadNotFound"
            }
          }
        },
        {
          "id": "t.page_admin_activity_registrations.0005",
          "from": "page.AdminActivityRegistrationsPage.Init",
          "to": "page.AdminActivityRegistrationsPage.Failed",
          "event": "loadFailed",
          "roles": [],
          "narrative": {
            "summary": "載入名單失敗",
            "taskDescription": "API 失敗時進入 Failed。"
          },
          "validations": [
            {
              "id": "v.t.page_admin_activity_registrations.0005.01",
              "type": "network-failed",
              "description": "載入失敗顯示 Failed 與重試。",
              "expected": "HTTP 5xx"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "loadFailed"
          },
          "meta": {
            "diagramId": "page_admin_activity_registrations",
            "source": {
              "raw": "AdminActivityRegistrationsPage.Init --> AdminActivityRegistrationsPage.Failed : loadFailed"
            }
          }
        },
        {
          "id": "t.page_admin_activity_registrations.0006",
          "from": "page.AdminActivityRegistrationsPage.Failed",
          "to": "page.AdminActivityRegistrationsPage.Init",
          "event": "retryLoad",
          "roles": [],
          "narrative": {
            "summary": "重試載入名單",
            "taskDescription": "Failed 觸發 retryLoad 回到 Init。"
          },
          "validations": [
            {
              "id": "v.t.page_admin_activity_registrations.0006.01",
              "type": "semantic-check",
              "description": "重試重新載入。",
              "expected": null
            }
          ],
          "intent": {
            "category": "action",
            "summary": "retryLoad"
          },
          "meta": {
            "diagramId": "page_admin_activity_registrations",
            "source": {
              "raw": "AdminActivityRegistrationsPage.Failed --> AdminActivityRegistrationsPage.Init : retryLoad | navigate /admin/activities/:activityId/registrations"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_admin_activity_registrations.invokes.page_login.s.page_AdminActivityRegistrationsPage_Init.to.page_LoginPage_guest_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_registrations",
            "stateId": "page.AdminActivityRegistrationsPage.Init"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.guest.Init"
          },
          "narrative": {
            "summary": "名單頁需登入",
            "taskDescription": "Guest 進入名單頁導向 /login 並保留 returnTo。"
          },
          "validations": [
            {
              "id": "v.c.page_admin_activity_registrations.invokes.page_login.01",
              "type": "url-equals",
              "description": "Guest 進入名單頁 API 回 401；導向登入並保留 returnTo。",
              "expected": "/login"
            }
          ],
          "meta": {
            "reason": "requireLoginReturnToAdminRegistrations | navigate /login",
            "action": "requireLoginReturnToAdminRegistrations",
            "navigateTarget": "/login",
            "returnTo": "/admin/activities/:activityId/registrations"
          }
        },
        {
          "id": "c.page_admin_activity_registrations.invokes.page_activity_list_member.s.page_AdminActivityRegistrationsPage_Init.to.page_ActivityListPage_member_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_registrations",
            "stateId": "page.AdminActivityRegistrationsPage.Init"
          },
          "to": {
            "diagramId": "page_activity_list_member",
            "stateId": "page.ActivityListPage.member.Init"
          },
          "narrative": {
            "summary": "拒絕非 Admin（Member）",
            "taskDescription": "Member 進入名單頁導回 /activities。"
          },
          "validations": [
            {
              "id": "v.c.page_admin_activity_registrations.invokes.page_activity_list_member.01",
              "type": "url-equals",
              "description": "Member 進入名單頁 API 回 403；導回 `/activities` 並提示無權限。",
              "expected": "/activities"
            }
          ],
          "meta": {
            "reason": "denyNonAdminReturnToPublic | navigate /activities",
            "action": "denyNonAdminReturnToPublic",
            "navigateTarget": "/activities"
          }
        },
        {
          "id": "c.page_admin_activity_registrations.invokes.feature_admin_export_registrations_csv.s.page_AdminActivityRegistrationsPage_Ready.to.feature_AdminExportRegistrationsCsvFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_registrations",
            "stateId": "page.AdminActivityRegistrationsPage.Ready"
          },
          "to": {
            "diagramId": "feature_admin_export_registrations_csv",
            "stateId": "feature.AdminExportRegistrationsCsvFeature.Init"
          },
          "narrative": {
            "summary": "匯出名單 CSV",
            "taskDescription": "Ready 觸發 exportCsv 進入匯出 feature。"
          },
          "validations": [
            {
              "id": "v.c.page_admin_activity_registrations.invokes.feature_admin_export_registrations_csv.01",
              "type": "semantic-check",
              "description": "觸發匯出時 API 回 200 並下載 CSV；CSV 欄位（姓名/Email/報名時間）與畫面一致；資料一致。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "exportCsv | navigate AdminExportRegistrationsCsvFeature",
            "action": "exportCsv",
            "navigateTarget": "AdminExportRegistrationsCsvFeature"
          }
        },
        {
          "id": "c.page_admin_activity_registrations.invokes.feature_admin_change_activity_status.s.page_AdminActivityRegistrationsPage_Ready.to.feature_AdminChangeActivityStatusFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_registrations",
            "stateId": "page.AdminActivityRegistrationsPage.Ready"
          },
          "to": {
            "diagramId": "feature_admin_change_activity_status",
            "stateId": "feature.AdminChangeActivityStatusFeature.Init"
          },
          "narrative": {
            "summary": "關閉或下架活動",
            "taskDescription": "Ready 觸發 closeOrArchive 進入狀態變更 feature。"
          },
          "validations": [
            {
              "id": "v.c.page_admin_activity_registrations.invokes.feature_admin_change_activity_status.01",
              "type": "semantic-check",
              "description": "觸發關閉/下架時需符合合法狀態轉換；成功後活動狀態更新且寫入 audit log。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "closeOrArchive | navigate AdminChangeActivityStatusFeature",
            "action": "closeOrArchive",
            "navigateTarget": "AdminChangeActivityStatusFeature"
          }
        },
        {
          "id": "c.page_admin_activity_registrations.invokes.page_admin_activity_list.s.page_AdminActivityRegistrationsPage_Ready.to.page_AdminActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_registrations",
            "stateId": "page.AdminActivityRegistrationsPage.Ready"
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Init"
          },
          "narrative": {
            "summary": "返回後台列表（名單頁）",
            "taskDescription": "Ready 返回後台列表。"
          },
          "validations": [
            {
              "id": "v.c.page_admin_activity_registrations.invokes.page_admin_activity_list.01",
              "type": "url-equals",
              "description": "返回後台列表。",
              "expected": "/admin/activities"
            }
          ],
          "meta": {
            "reason": "backToAdminList | navigate /admin/activities",
            "action": "backToAdminList",
            "navigateTarget": "/admin/activities"
          }
        },
        {
          "id": "c.page_admin_activity_registrations.invokes.feature_admin_export_registrations_csv.s.page_AdminActivityRegistrationsPage_Empty.to.feature_AdminExportRegistrationsCsvFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_registrations",
            "stateId": "page.AdminActivityRegistrationsPage.Empty"
          },
          "to": {
            "diagramId": "feature_admin_export_registrations_csv",
            "stateId": "feature.AdminExportRegistrationsCsvFeature.Init"
          },
          "narrative": {
            "summary": "匯出空名單 CSV",
            "taskDescription": "Empty 下匯出空名單。"
          },
          "validations": [
            {
              "id": "v.c.page_admin_activity_registrations.invokes.feature_admin_export_registrations_csv.02",
              "type": "semantic-check",
              "description": "匯出空名單時 CSV 仍可下載且內容與 Empty 狀態一致。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "exportCsv | navigate AdminExportRegistrationsCsvFeature",
            "action": "exportCsv",
            "navigateTarget": "AdminExportRegistrationsCsvFeature"
          }
        },
        {
          "id": "c.feature_admin_export_registrations_csv.invokes.page_admin_activity_registrations.s.feature_AdminExportRegistrationsCsvFeature_Done.to.page_AdminActivityRegistrationsPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_export_registrations_csv",
            "stateId": "feature.AdminExportRegistrationsCsvFeature.Done"
          },
          "to": {
            "diagramId": "page_admin_activity_registrations",
            "stateId": "page.AdminActivityRegistrationsPage.Init"
          },
          "narrative": {
            "summary": "匯出成功回名單頁",
            "taskDescription": "匯出成功後回到 /admin/activities/:activityId/registrations。"
          },
          "validations": [
            {
              "id": "v.c.feature_admin_export_registrations_csv.invokes.page_admin_activity_registrations.01",
              "type": "url-equals",
              "description": "回名單頁仍可見資料且不被重置；若需要重載，應顯示 loading。",
              "expected": "/admin/activities/:activityId/registrations"
            }
          ],
          "meta": {
            "reason": "returnToRegistrations | navigate /admin/activities/:activityId/registrations",
            "action": "returnToRegistrations",
            "navigateTarget": "/admin/activities/:activityId/registrations"
          }
        },
        {
          "id": "c.feature_admin_export_registrations_csv.invokes.page_admin_activity_registrations.s.feature_AdminExportRegistrationsCsvFeature_Failed.to.page_AdminActivityRegistrationsPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_export_registrations_csv",
            "stateId": "feature.AdminExportRegistrationsCsvFeature.Failed"
          },
          "to": {
            "diagramId": "page_admin_activity_registrations",
            "stateId": "page.AdminActivityRegistrationsPage.Init"
          },
          "narrative": {
            "summary": "匯出失敗回名單頁",
            "taskDescription": "匯出失敗回名單頁顯示錯誤並允許再次匯出。"
          },
          "validations": [
            {
              "id": "v.c.feature_admin_export_registrations_csv.invokes.page_admin_activity_registrations.02",
              "type": "url-equals",
              "description": "回名單頁顯示錯誤並允許再次匯出。",
              "expected": "/admin/activities/:activityId/registrations"
            }
          ],
          "meta": {
            "reason": "returnToRegistrations | navigate /admin/activities/:activityId/registrations",
            "action": "returnToRegistrations",
            "navigateTarget": "/admin/activities/:activityId/registrations"
          }
        },
        {
          "id": "c.feature_admin_export_registrations_csv.invokes.page_admin_activity_registrations.s.feature_AdminExportRegistrationsCsvFeature_Canceled.to.page_AdminActivityRegistrationsPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_export_registrations_csv",
            "stateId": "feature.AdminExportRegistrationsCsvFeature.Canceled"
          },
          "to": {
            "diagramId": "page_admin_activity_registrations",
            "stateId": "page.AdminActivityRegistrationsPage.Init"
          },
          "narrative": {
            "summary": "取消匯出回名單頁",
            "taskDescription": "取消後回名單頁；不下載任何檔案。"
          },
          "validations": [
            {
              "id": "v.c.feature_admin_export_registrations_csv.invokes.page_admin_activity_registrations.03",
              "type": "url-equals",
              "description": "回名單頁；不下載任何檔案。",
              "expected": "/admin/activities/:activityId/registrations"
            }
          ],
          "meta": {
            "reason": "returnToRegistrations | navigate /admin/activities/:activityId/registrations",
            "action": "returnToRegistrations",
            "navigateTarget": "/admin/activities/:activityId/registrations"
          }
        },
        {
          "id": "c.page_admin_activity_registrations.invokes.feature_admin_change_activity_status.s.page_AdminActivityRegistrationsPage_Empty.to.feature_AdminChangeActivityStatusFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_registrations",
            "stateId": "page.AdminActivityRegistrationsPage.Empty"
          },
          "to": {
            "diagramId": "feature_admin_change_activity_status",
            "stateId": "feature.AdminChangeActivityStatusFeature.Init"
          },
          "narrative": {
            "summary": "Empty 下關閉/下架",
            "taskDescription": "Empty 下仍可關閉/下架（視合法性）。"
          },
          "validations": [
            {
              "id": "v.c.page_admin_activity_registrations.invokes.feature_admin_change_activity_status.02",
              "type": "semantic-check",
              "description": "無報名仍可關閉/下架（視活動狀態合法性）；非法轉換需被拒絕。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "closeOrArchive | navigate AdminChangeActivityStatusFeature",
            "action": "closeOrArchive",
            "navigateTarget": "AdminChangeActivityStatusFeature"
          }
        },
        {
          "id": "c.feature_admin_change_activity_status.invokes.page_admin_activity_registrations.s.feature_AdminChangeActivityStatusFeature_Done.to.page_AdminActivityRegistrationsPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_change_activity_status",
            "stateId": "feature.AdminChangeActivityStatusFeature.Done"
          },
          "to": {
            "diagramId": "page_admin_activity_registrations",
            "stateId": "page.AdminActivityRegistrationsPage.Init"
          },
          "narrative": {
            "summary": "狀態變更成功回名單頁",
            "taskDescription": "狀態變更成功後回到 /admin/activities/:activityId/registrations。"
          },
          "validations": [
            {
              "id": "v.c.feature_admin_change_activity_status.invokes.page_admin_activity_registrations.01",
              "type": "url-equals",
              "description": "回名單頁顯示最新 status；若已 closed/archived，UI 不應提供不合法的操作。",
              "expected": "/admin/activities/:activityId/registrations"
            }
          ],
          "meta": {
            "reason": "returnToRegistrations | navigate /admin/activities/:activityId/registrations",
            "action": "returnToRegistrations",
            "navigateTarget": "/admin/activities/:activityId/registrations"
          }
        },
        {
          "id": "c.feature_admin_change_activity_status.invokes.page_admin_activity_registrations.s.feature_AdminChangeActivityStatusFeature_Failed.to.page_AdminActivityRegistrationsPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_change_activity_status",
            "stateId": "feature.AdminChangeActivityStatusFeature.Failed"
          },
          "to": {
            "diagramId": "page_admin_activity_registrations",
            "stateId": "page.AdminActivityRegistrationsPage.Init"
          },
          "narrative": {
            "summary": "狀態變更失敗回名單頁",
            "taskDescription": "狀態變更失敗回名單頁顯示錯誤並允許重試。"
          },
          "validations": [
            {
              "id": "v.c.feature_admin_change_activity_status.invokes.page_admin_activity_registrations.02",
              "type": "url-equals",
              "description": "回名單頁顯示錯誤並允許重試。",
              "expected": "/admin/activities/:activityId/registrations"
            }
          ],
          "meta": {
            "reason": "returnToRegistrations | navigate /admin/activities/:activityId/registrations",
            "action": "returnToRegistrations",
            "navigateTarget": "/admin/activities/:activityId/registrations"
          }
        },
        {
          "id": "c.feature_admin_change_activity_status.invokes.page_admin_activity_registrations.s.feature_AdminChangeActivityStatusFeature_Canceled.to.page_AdminActivityRegistrationsPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_change_activity_status",
            "stateId": "feature.AdminChangeActivityStatusFeature.Canceled"
          },
          "to": {
            "diagramId": "page_admin_activity_registrations",
            "stateId": "page.AdminActivityRegistrationsPage.Init"
          },
          "narrative": {
            "summary": "取消狀態變更回名單頁",
            "taskDescription": "取消後回名單頁不改變狀態。"
          },
          "validations": [
            {
              "id": "v.c.feature_admin_change_activity_status.invokes.page_admin_activity_registrations.03",
              "type": "url-equals",
              "description": "回名單頁不改變狀態。",
              "expected": "/admin/activities/:activityId/registrations"
            }
          ],
          "meta": {
            "reason": "returnToRegistrations | navigate /admin/activities/:activityId/registrations",
            "action": "returnToRegistrations",
            "navigateTarget": "/admin/activities/:activityId/registrations"
          }
        },
        {
          "id": "c.page_admin_activity_registrations.invokes.page_admin_activity_list.s.page_AdminActivityRegistrationsPage_Empty.to.page_AdminActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_registrations",
            "stateId": "page.AdminActivityRegistrationsPage.Empty"
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Init"
          },
          "narrative": {
            "summary": "Empty 返回後台列表",
            "taskDescription": "Empty 返回後台列表。"
          },
          "validations": [
            {
              "id": "v.c.page_admin_activity_registrations.invokes.page_admin_activity_list.02",
              "type": "url-equals",
              "description": "返回後台列表。",
              "expected": "/admin/activities"
            }
          ],
          "meta": {
            "reason": "backToAdminList | navigate /admin/activities",
            "action": "backToAdminList",
            "navigateTarget": "/admin/activities"
          }
        },
        {
          "id": "c.page_admin_activity_registrations.invokes.page_admin_activity_list.s.page_AdminActivityRegistrationsPage_NotFound.to.page_AdminActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_registrations",
            "stateId": "page.AdminActivityRegistrationsPage.NotFound"
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Init"
          },
          "narrative": {
            "summary": "NotFound 返回後台列表",
            "taskDescription": "NotFound 可回後台列表。"
          },
          "validations": [
            {
              "id": "v.c.page_admin_activity_registrations.invokes.page_admin_activity_list.03",
              "type": "url-equals",
              "description": "NotFound 可回後台列表。",
              "expected": "/admin/activities"
            }
          ],
          "meta": {
            "reason": "backToAdminList | navigate /admin/activities",
            "action": "backToAdminList",
            "navigateTarget": "/admin/activities"
          }
        },
        {
          "id": "c.page_entry.contains.page_admin_activity_registrations",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_admin_activity_registrations",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": "AdminActivityRegistrationsPage",
        "featureName": null,
        "entryStateId": "page.AdminActivityRegistrationsPage.Init"
      }
    },
    {
      "id": "feature_auth_login",
      "name": "Auth Login Feature",
      "level": "feature",
      "parentDiagramId": "page_entry",
      "roles": [],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "⑯ Auth Login Feature",
        "order": 16
      },
      "groups": [],
      "states": [
        {
          "id": "feature.AuthLoginFeature.Init",
          "label": "AuthLoginFeature.Init",
          "type": "start",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_auth_login",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AuthLoginFeature.Init"
            }
          }
        },
        {
          "id": "feature.AuthLoginFeature.Submitting",
          "label": "AuthLoginFeature.Submitting",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_auth_login",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AuthLoginFeature.Submitting"
            }
          }
        },
        {
          "id": "feature.AuthLoginFeature.Done",
          "label": "AuthLoginFeature.Done",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_auth_login",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AuthLoginFeature.Done"
            }
          }
        },
        {
          "id": "feature.AuthLoginFeature.Failed",
          "label": "AuthLoginFeature.Failed",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_auth_login",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AuthLoginFeature.Failed"
            }
          }
        },
        {
          "id": "feature.AuthLoginFeature.Canceled",
          "label": "AuthLoginFeature.Canceled",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_auth_login",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AuthLoginFeature.Canceled"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.feature_auth_login.0002",
          "from": "feature.AuthLoginFeature.Init",
          "to": "feature.AuthLoginFeature.Submitting",
          "event": "submitCredentials",
          "roles": [],
          "narrative": {
            "summary": "提交登入資訊",
            "taskDescription": "觸發 submitCredentials 並送出登入請求，進入 Submitting，UI 維持 loading 並避免重複送出。"
          },
          "validations": [
            {
              "id": "v.t.feature_auth_login.0002.01",
              "type": "semantic-check",
              "description": "API 呼叫登入端點；UI 維持 loading 並禁用重複送出。",
              "expected": null
            }
          ],
          "intent": {
            "category": "action",
            "summary": "submitCredentials"
          },
          "meta": {
            "diagramId": "feature_auth_login",
            "source": {
              "raw": "AuthLoginFeature.Init --> AuthLoginFeature.Submitting : submitCredentials"
            }
          }
        },
        {
          "id": "t.feature_auth_login.0003",
          "from": "feature.AuthLoginFeature.Submitting",
          "to": "feature.AuthLoginFeature.Done",
          "event": "loginSucceeded",
          "roles": [],
          "narrative": {
            "summary": "登入成功",
            "taskDescription": "登入 API 成功回應後進入 Done，建立 token/session 並取得角色資訊。"
          },
          "validations": [
            {
              "id": "v.t.feature_auth_login.0003.01",
              "type": "network-success",
              "description": "API 回 200 並建立可驗證 token/session；回傳使用者角色（member/admin）；伺服器端不回傳密碼雜湊。",
              "expected": "HTTP 200"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "loginSucceeded"
          },
          "meta": {
            "diagramId": "feature_auth_login",
            "source": {
              "raw": "AuthLoginFeature.Submitting --> AuthLoginFeature.Done : loginSucceeded"
            }
          }
        },
        {
          "id": "t.feature_auth_login.0004",
          "from": "feature.AuthLoginFeature.Submitting",
          "to": "feature.AuthLoginFeature.Failed",
          "event": "loginFailed",
          "roles": [],
          "narrative": {
            "summary": "登入失敗",
            "taskDescription": "登入 API 回傳錯誤後進入 Failed，顯示明確錯誤且不建立 token/session。"
          },
          "validations": [
            {
              "id": "v.t.feature_auth_login.0004.01",
              "type": "network-failed",
              "description": "API 回 401（帳密錯誤）；UI 顯示明確錯誤訊息；不建立 token/session。",
              "expected": "HTTP 401"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "loginFailed"
          },
          "meta": {
            "diagramId": "feature_auth_login",
            "source": {
              "raw": "AuthLoginFeature.Submitting --> AuthLoginFeature.Failed : loginFailed"
            }
          }
        },
        {
          "id": "t.feature_auth_login.0005",
          "from": "feature.AuthLoginFeature.Submitting",
          "to": "feature.AuthLoginFeature.Canceled",
          "event": "cancel",
          "roles": [],
          "narrative": {
            "summary": "取消登入",
            "taskDescription": "使用者取消登入流程後進入 Canceled，不建立任何登入狀態並回到登入頁。"
          },
          "validations": [
            {
              "id": "v.t.feature_auth_login.0005.01",
              "type": "semantic-check",
              "description": "取消不應建立任何登入狀態；回到登入頁。",
              "expected": null
            }
          ],
          "intent": {
            "category": "action",
            "summary": "cancel"
          },
          "meta": {
            "diagramId": "feature_auth_login",
            "source": {
              "raw": "AuthLoginFeature.Submitting --> AuthLoginFeature.Canceled : cancel"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_login.invokes.feature_auth_login.s.page_LoginPage_guest_Ready.to.feature_AuthLoginFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.guest.Ready"
          },
          "to": {
            "diagramId": "feature_auth_login",
            "stateId": "feature.AuthLoginFeature.Init"
          },
          "narrative": {
            "summary": "送出登入並進入登入功能流程",
            "taskDescription": "在 LoginPage.Ready 送出登入（submitLogin），導入 AuthLoginFeature.Init 並開始登入流程。"
          },
          "validations": [
            {
              "id": "v.c.page_login.invokes.feature_auth_login.01",
              "type": "semantic-check",
              "description": "送出時 UI 顯示 loading 並禁用提交，避免重複送出；API 呼叫登入端點，成功回應會建立可驗證身分的 token/session 並回傳角色資訊。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "submitLogin | navigate AuthLoginFeature",
            "action": "submitLogin",
            "navigateTarget": "AuthLoginFeature"
          }
        },
        {
          "id": "c.feature_auth_login.invokes.page_activity_list_member.s.feature_AuthLoginFeature_Done.to.page_ActivityListPage_member_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_login",
            "stateId": "feature.AuthLoginFeature.Done"
          },
          "to": {
            "diagramId": "page_activity_list_member",
            "stateId": "page.ActivityListPage.member.Init"
          },
          "narrative": {
            "summary": "登入成功後導向活動列表（Member）",
            "taskDescription": "在 AuthLoginFeature.Done 觸發 loginSucceededMemberDefault 導航到 /activities，並進入 Member 視角的 ActivityListPage.Init。"
          },
          "validations": [
            {
              "id": "v.c.feature_auth_login.invokes.page_activity_list_member.01",
              "type": "url-equals",
              "description": "若角色為 Member 且無 returnTo，導向 Member 視角的活動列表；Header 顯示「活動/我的活動/登出」，不顯示管理後台。",
              "expected": "/activities"
            }
          ],
          "meta": {
            "reason": "loginSucceededMemberDefault | navigate /activities",
            "action": "loginSucceededMemberDefault",
            "navigateTarget": "/activities"
          }
        },
        {
          "id": "c.feature_auth_login.invokes.page_activity_list_admin.s.feature_AuthLoginFeature_Done.to.page_ActivityListPage_admin_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_login",
            "stateId": "feature.AuthLoginFeature.Done"
          },
          "to": {
            "diagramId": "page_activity_list_admin",
            "stateId": "page.ActivityListPage.admin.Init"
          },
          "narrative": {
            "summary": "登入成功後導向活動列表（Admin）",
            "taskDescription": "在 AuthLoginFeature.Done 觸發 loginSucceededAdminDefault 導航到 /activities，並進入 Admin 視角的 ActivityListPage.Init。"
          },
          "validations": [
            {
              "id": "v.c.feature_auth_login.invokes.page_activity_list_admin.01",
              "type": "url-equals",
              "description": "若角色為 Admin 且無 returnTo，導向 Admin 視角的活動列表；Header 顯示管理後台入口。",
              "expected": "/activities"
            }
          ],
          "meta": {
            "reason": "loginSucceededAdminDefault | navigate /activities",
            "action": "loginSucceededAdminDefault",
            "navigateTarget": "/activities"
          }
        },
        {
          "id": "c.feature_auth_login.invokes.page_activity_detail_member.s.feature_AuthLoginFeature_Done.to.page_ActivityDetailPage_member_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_login",
            "stateId": "feature.AuthLoginFeature.Done"
          },
          "to": {
            "diagramId": "page_activity_detail_member",
            "stateId": "page.ActivityDetailPage.member.Init"
          },
          "narrative": {
            "summary": "登入成功後導回活動詳情（Member）",
            "taskDescription": "在 AuthLoginFeature.Done 觸發 loginSucceededReturnToActivityDetailMember 導航到 /activities/:activityId，並進入 Member 詳情頁初始狀態。"
          },
          "validations": [
            {
              "id": "v.c.feature_auth_login.invokes.page_activity_detail_member.01",
              "type": "url-equals",
              "description": "returnTo 指向活動詳情且角色為 Member 時導回該詳情；詳情頁顯示報名/取消等 CTA 依規則呈現。",
              "expected": "/activities/:activityId"
            }
          ],
          "meta": {
            "reason": "loginSucceededReturnToActivityDetailMember | navigate /activities/:activityId",
            "action": "loginSucceededReturnToActivityDetailMember",
            "navigateTarget": "/activities/:activityId"
          }
        },
        {
          "id": "c.feature_auth_login.invokes.page_activity_detail_admin.s.feature_AuthLoginFeature_Done.to.page_ActivityDetailPage_admin_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_login",
            "stateId": "feature.AuthLoginFeature.Done"
          },
          "to": {
            "diagramId": "page_activity_detail_admin",
            "stateId": "page.ActivityDetailPage.admin.Init"
          },
          "narrative": {
            "summary": "登入成功後導回活動詳情（Admin）",
            "taskDescription": "在 AuthLoginFeature.Done 觸發 loginSucceededReturnToActivityDetailAdmin 導航到 /activities/:activityId，並進入 Admin 詳情頁初始狀態。"
          },
          "validations": [
            {
              "id": "v.c.feature_auth_login.invokes.page_activity_detail_admin.01",
              "type": "url-equals",
              "description": "returnTo 指向活動詳情且角色為 Admin 時導回該詳情；Header 顯示管理後台入口。",
              "expected": "/activities/:activityId"
            }
          ],
          "meta": {
            "reason": "loginSucceededReturnToActivityDetailAdmin | navigate /activities/:activityId",
            "action": "loginSucceededReturnToActivityDetailAdmin",
            "navigateTarget": "/activities/:activityId"
          }
        },
        {
          "id": "c.feature_auth_login.invokes.page_my_activities_member.s.feature_AuthLoginFeature_Done.to.page_MyActivitiesPage_member_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_login",
            "stateId": "feature.AuthLoginFeature.Done"
          },
          "to": {
            "diagramId": "page_my_activities_member",
            "stateId": "page.MyActivitiesPage.member.Init"
          },
          "narrative": {
            "summary": "登入成功後導回我的活動（Member）",
            "taskDescription": "在 AuthLoginFeature.Done 觸發 loginSucceededReturnToMyActivitiesMember 導航到 /my-activities，並進入 Member 我的活動頁初始狀態。"
          },
          "validations": [
            {
              "id": "v.c.feature_auth_login.invokes.page_my_activities_member.01",
              "type": "url-equals",
              "description": "returnTo 指向我的活動且角色為 Member 時導回；API 回 200 並顯示清單。",
              "expected": "/my-activities"
            }
          ],
          "meta": {
            "reason": "loginSucceededReturnToMyActivitiesMember | navigate /my-activities",
            "action": "loginSucceededReturnToMyActivitiesMember",
            "navigateTarget": "/my-activities"
          }
        },
        {
          "id": "c.feature_auth_login.invokes.page_my_activities_admin.s.feature_AuthLoginFeature_Done.to.page_MyActivitiesPage_admin_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_login",
            "stateId": "feature.AuthLoginFeature.Done"
          },
          "to": {
            "diagramId": "page_my_activities_admin",
            "stateId": "page.MyActivitiesPage.admin.Init"
          },
          "narrative": {
            "summary": "登入成功後導回我的活動（Admin）",
            "taskDescription": "在 AuthLoginFeature.Done 觸發 loginSucceededReturnToMyActivitiesAdmin 導航到 /my-activities，並進入 Admin 我的活動頁初始狀態。"
          },
          "validations": [
            {
              "id": "v.c.feature_auth_login.invokes.page_my_activities_admin.01",
              "type": "url-equals",
              "description": "returnTo 指向我的活動且角色為 Admin 時導回；顯示 Admin 導覽。",
              "expected": "/my-activities"
            }
          ],
          "meta": {
            "reason": "loginSucceededReturnToMyActivitiesAdmin | navigate /my-activities",
            "action": "loginSucceededReturnToMyActivitiesAdmin",
            "navigateTarget": "/my-activities"
          }
        },
        {
          "id": "c.feature_auth_login.invokes.page_admin_activity_list.s.feature_AuthLoginFeature_Done.to.page_AdminActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_login",
            "stateId": "feature.AuthLoginFeature.Done"
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Init"
          },
          "narrative": {
            "summary": "登入成功後導向管理後台活動列表",
            "taskDescription": "在 AuthLoginFeature.Done 觸發 loginSucceededReturnToAdminActivities 導航到 /admin/activities，並進入後台活動列表初始狀態。"
          },
          "validations": [
            {
              "id": "v.c.feature_auth_login.invokes.page_admin_activity_list.01",
              "type": "url-equals",
              "description": "returnTo 指向後台活動列表時：若角色為 Admin 可進入；若角色為 Member 應被後台入口拒絕並以 403 收斂（不應進入後台 Ready）。",
              "expected": "/admin/activities"
            }
          ],
          "meta": {
            "reason": "loginSucceededReturnToAdminActivities | navigate /admin/activities",
            "action": "loginSucceededReturnToAdminActivities",
            "navigateTarget": "/admin/activities"
          }
        },
        {
          "id": "c.feature_auth_login.invokes.page_login.s.feature_AuthLoginFeature_Failed.to.page_LoginPage_guest_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_login",
            "stateId": "feature.AuthLoginFeature.Failed"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.guest.Init"
          },
          "narrative": {
            "summary": "登入失敗後回到登入頁",
            "taskDescription": "在 AuthLoginFeature.Failed 觸發 backToLogin 導航到 /login，並回到登入頁初始狀態以便重試。"
          },
          "validations": [
            {
              "id": "v.c.feature_auth_login.invokes.page_login.01",
              "type": "url-equals",
              "description": "回到登入頁並保留使用者已輸入資訊（若產品允許）；錯誤提示可見且可再次嘗試。",
              "expected": "/login"
            }
          ],
          "meta": {
            "reason": "backToLogin | navigate /login",
            "action": "backToLogin",
            "navigateTarget": "/login"
          }
        },
        {
          "id": "c.feature_auth_login.invokes.page_login.s.feature_AuthLoginFeature_Canceled.to.page_LoginPage_guest_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_login",
            "stateId": "feature.AuthLoginFeature.Canceled"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.guest.Init"
          },
          "narrative": {
            "summary": "取消登入後回到登入頁",
            "taskDescription": "在 AuthLoginFeature.Canceled 觸發 backToLogin 導航到 /login，並回到登入頁初始狀態。"
          },
          "validations": [
            {
              "id": "v.c.feature_auth_login.invokes.page_login.02",
              "type": "url-equals",
              "description": "回到登入頁；不建立登入狀態。",
              "expected": "/login"
            }
          ],
          "meta": {
            "reason": "backToLogin | navigate /login",
            "action": "backToLogin",
            "navigateTarget": "/login"
          }
        },
        {
          "id": "c.page_entry.contains.feature_auth_login",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "feature_auth_login",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": null,
        "featureName": "AuthLoginFeature",
        "entryStateId": "feature.AuthLoginFeature.Init"
      }
    },
    {
      "id": "feature_auth_register",
      "name": "Auth Register Feature",
      "level": "feature",
      "parentDiagramId": "page_entry",
      "roles": [],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "⑰ Auth Register Feature",
        "order": 17
      },
      "groups": [],
      "states": [
        {
          "id": "feature.AuthRegisterFeature.Init",
          "label": "AuthRegisterFeature.Init",
          "type": "start",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_auth_register",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AuthRegisterFeature.Init"
            }
          }
        },
        {
          "id": "feature.AuthRegisterFeature.Submitting",
          "label": "AuthRegisterFeature.Submitting",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_auth_register",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AuthRegisterFeature.Submitting"
            }
          }
        },
        {
          "id": "feature.AuthRegisterFeature.Done",
          "label": "AuthRegisterFeature.Done",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_auth_register",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AuthRegisterFeature.Done"
            }
          }
        },
        {
          "id": "feature.AuthRegisterFeature.Failed",
          "label": "AuthRegisterFeature.Failed",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_auth_register",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AuthRegisterFeature.Failed"
            }
          }
        },
        {
          "id": "feature.AuthRegisterFeature.Canceled",
          "label": "AuthRegisterFeature.Canceled",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_auth_register",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AuthRegisterFeature.Canceled"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.feature_auth_register.0002",
          "from": "feature.AuthRegisterFeature.Init",
          "to": "feature.AuthRegisterFeature.Submitting",
          "event": "submitRegister",
          "roles": [],
          "narrative": {
            "summary": "提交註冊資訊",
            "taskDescription": "觸發 submitRegister 並送出註冊請求，進入 Submitting，UI 顯示 loading 並避免重複送出。"
          },
          "validations": [
            {
              "id": "v.t.feature_auth_register.0002.01",
              "type": "semantic-check",
              "description": "API 呼叫註冊端點；UI 顯示 loading 並禁用重複送出。",
              "expected": null
            }
          ],
          "intent": {
            "category": "action",
            "summary": "submitRegister"
          },
          "meta": {
            "diagramId": "feature_auth_register",
            "source": {
              "raw": "AuthRegisterFeature.Init --> AuthRegisterFeature.Submitting : submitRegister"
            }
          }
        },
        {
          "id": "t.feature_auth_register.0003",
          "from": "feature.AuthRegisterFeature.Submitting",
          "to": "feature.AuthRegisterFeature.Done",
          "event": "registerSucceeded",
          "roles": [],
          "narrative": {
            "summary": "註冊成功",
            "taskDescription": "註冊 API 成功回應後進入 Done，建立 Member 並產生 token/session。"
          },
          "validations": [
            {
              "id": "v.t.feature_auth_register.0003.01",
              "type": "network-success",
              "description": "API 回 201/200 並建立 Member；email 唯一性由伺服器端驗證；密碼以安全雜湊儲存；回傳 token/session。",
              "expected": "HTTP 201/200"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "registerSucceeded"
          },
          "meta": {
            "diagramId": "feature_auth_register",
            "source": {
              "raw": "AuthRegisterFeature.Submitting --> AuthRegisterFeature.Done : registerSucceeded"
            }
          }
        },
        {
          "id": "t.feature_auth_register.0004",
          "from": "feature.AuthRegisterFeature.Submitting",
          "to": "feature.AuthRegisterFeature.Failed",
          "event": "registerFailed",
          "roles": [],
          "narrative": {
            "summary": "註冊失敗",
            "taskDescription": "註冊 API 回傳錯誤後進入 Failed，顯示具體錯誤並停留在可修正狀態。"
          },
          "validations": [
            {
              "id": "v.t.feature_auth_register.0004.01",
              "type": "network-failed",
              "description": "若 email 重複或資料不合法，API 回 400/409；UI 顯示具體錯誤並停留在可修正狀態。",
              "expected": "HTTP 400/409"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "registerFailed"
          },
          "meta": {
            "diagramId": "feature_auth_register",
            "source": {
              "raw": "AuthRegisterFeature.Submitting --> AuthRegisterFeature.Failed : registerFailed"
            }
          }
        },
        {
          "id": "t.feature_auth_register.0005",
          "from": "feature.AuthRegisterFeature.Submitting",
          "to": "feature.AuthRegisterFeature.Canceled",
          "event": "cancel",
          "roles": [],
          "narrative": {
            "summary": "取消註冊",
            "taskDescription": "使用者取消註冊流程後進入 Canceled，不建立帳號與登入狀態並回到註冊頁。"
          },
          "validations": [
            {
              "id": "v.t.feature_auth_register.0005.01",
              "type": "semantic-check",
              "description": "取消不建立帳號與登入狀態；回到註冊頁。",
              "expected": null
            }
          ],
          "intent": {
            "category": "action",
            "summary": "cancel"
          },
          "meta": {
            "diagramId": "feature_auth_register",
            "source": {
              "raw": "AuthRegisterFeature.Submitting --> AuthRegisterFeature.Canceled : cancel"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_register.invokes.feature_auth_register.s.page_RegisterPage_guest_Ready.to.feature_AuthRegisterFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_register",
            "stateId": "page.RegisterPage.guest.Ready"
          },
          "to": {
            "diagramId": "feature_auth_register",
            "stateId": "feature.AuthRegisterFeature.Init"
          },
          "narrative": {
            "summary": "送出註冊並進入註冊功能流程",
            "taskDescription": "在 RegisterPage.Ready 送出註冊（submitRegister），導入 AuthRegisterFeature.Init 並開始註冊流程。"
          },
          "validations": [
            {
              "id": "v.c.page_register.invokes.feature_auth_register.01",
              "type": "semantic-check",
              "description": "送出時 UI 顯示 loading 並禁用提交；API 成功回應會建立 Member 帳號並產生 token/session；伺服器端以安全雜湊儲存密碼。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "submitRegister | navigate AuthRegisterFeature",
            "action": "submitRegister",
            "navigateTarget": "AuthRegisterFeature"
          }
        },
        {
          "id": "c.feature_auth_register.invokes.page_activity_list_member.s.feature_AuthRegisterFeature_Done.to.page_ActivityListPage_member_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_register",
            "stateId": "feature.AuthRegisterFeature.Done"
          },
          "to": {
            "diagramId": "page_activity_list_member",
            "stateId": "page.ActivityListPage.member.Init"
          },
          "narrative": {
            "summary": "註冊成功後導向活動列表（Member）",
            "taskDescription": "在 AuthRegisterFeature.Done 觸發 registerSucceededDefault 導航到 /activities，並進入 Member 視角的 ActivityListPage.Init。"
          },
          "validations": [
            {
              "id": "v.c.feature_auth_register.invokes.page_activity_list_member.01",
              "type": "url-equals",
              "description": "無 returnTo 時導向 Member 活動列表；Header 顯示 Member 導覽。",
              "expected": "/activities"
            }
          ],
          "meta": {
            "reason": "registerSucceededDefault | navigate /activities",
            "action": "registerSucceededDefault",
            "navigateTarget": "/activities"
          }
        },
        {
          "id": "c.feature_auth_register.invokes.page_activity_detail_member.s.feature_AuthRegisterFeature_Done.to.page_ActivityDetailPage_member_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_register",
            "stateId": "feature.AuthRegisterFeature.Done"
          },
          "to": {
            "diagramId": "page_activity_detail_member",
            "stateId": "page.ActivityDetailPage.member.Init"
          },
          "narrative": {
            "summary": "註冊成功後導回活動詳情（Member）",
            "taskDescription": "在 AuthRegisterFeature.Done 觸發 registerSucceededReturnToActivityDetail 導航到 /activities/:activityId，並進入 Member 詳情頁初始狀態。"
          },
          "validations": [
            {
              "id": "v.c.feature_auth_register.invokes.page_activity_detail_member.01",
              "type": "url-equals",
              "description": "returnTo 為活動詳情時導回；詳情頁 CTA 依規則顯示。",
              "expected": "/activities/:activityId"
            }
          ],
          "meta": {
            "reason": "registerSucceededReturnToActivityDetail | navigate /activities/:activityId",
            "action": "registerSucceededReturnToActivityDetail",
            "navigateTarget": "/activities/:activityId"
          }
        },
        {
          "id": "c.feature_auth_register.invokes.page_my_activities_member.s.feature_AuthRegisterFeature_Done.to.page_MyActivitiesPage_member_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_register",
            "stateId": "feature.AuthRegisterFeature.Done"
          },
          "to": {
            "diagramId": "page_my_activities_member",
            "stateId": "page.MyActivitiesPage.member.Init"
          },
          "narrative": {
            "summary": "註冊成功後導回我的活動（Member）",
            "taskDescription": "在 AuthRegisterFeature.Done 觸發 registerSucceededReturnToMyActivities 導航到 /my-activities，並進入 Member 我的活動頁初始狀態。"
          },
          "validations": [
            {
              "id": "v.c.feature_auth_register.invokes.page_my_activities_member.01",
              "type": "url-equals",
              "description": "returnTo 為我的活動時導回；初次通常為 Empty 狀態。",
              "expected": "/my-activities"
            }
          ],
          "meta": {
            "reason": "registerSucceededReturnToMyActivities | navigate /my-activities",
            "action": "registerSucceededReturnToMyActivities",
            "navigateTarget": "/my-activities"
          }
        },
        {
          "id": "c.feature_auth_register.invokes.page_register.s.feature_AuthRegisterFeature_Failed.to.page_RegisterPage_guest_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_register",
            "stateId": "feature.AuthRegisterFeature.Failed"
          },
          "to": {
            "diagramId": "page_register",
            "stateId": "page.RegisterPage.guest.Init"
          },
          "narrative": {
            "summary": "註冊失敗後回到註冊頁",
            "taskDescription": "在 AuthRegisterFeature.Failed 觸發 backToRegister 導航到 /register，並回到註冊頁以便修正重試。"
          },
          "validations": [
            {
              "id": "v.c.feature_auth_register.invokes.page_register.01",
              "type": "url-equals",
              "description": "回到註冊頁並可修正表單；保留錯誤提示。",
              "expected": "/register"
            }
          ],
          "meta": {
            "reason": "backToRegister | navigate /register",
            "action": "backToRegister",
            "navigateTarget": "/register"
          }
        },
        {
          "id": "c.feature_auth_register.invokes.page_register.s.feature_AuthRegisterFeature_Canceled.to.page_RegisterPage_guest_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_register",
            "stateId": "feature.AuthRegisterFeature.Canceled"
          },
          "to": {
            "diagramId": "page_register",
            "stateId": "page.RegisterPage.guest.Init"
          },
          "narrative": {
            "summary": "取消註冊後回到註冊頁",
            "taskDescription": "在 AuthRegisterFeature.Canceled 觸發 backToRegister 導航到 /register，並回到註冊頁。"
          },
          "validations": [
            {
              "id": "v.c.feature_auth_register.invokes.page_register.02",
              "type": "url-equals",
              "description": "回到註冊頁；不建立帳號。",
              "expected": "/register"
            }
          ],
          "meta": {
            "reason": "backToRegister | navigate /register",
            "action": "backToRegister",
            "navigateTarget": "/register"
          }
        },
        {
          "id": "c.page_entry.contains.feature_auth_register",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "feature_auth_register",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": null,
        "featureName": "AuthRegisterFeature",
        "entryStateId": "feature.AuthRegisterFeature.Init"
      }
    },
    {
      "id": "feature_logout",
      "name": "Logout Feature",
      "level": "feature",
      "parentDiagramId": "page_entry",
      "roles": [],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "⑱ Logout Feature",
        "order": 18
      },
      "groups": [],
      "states": [
        {
          "id": "feature.LogoutFeature.Init",
          "label": "LogoutFeature.Init",
          "type": "start",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_logout",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "LogoutFeature.Init"
            }
          }
        },
        {
          "id": "feature.LogoutFeature.Submitting",
          "label": "LogoutFeature.Submitting",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_logout",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "LogoutFeature.Submitting"
            }
          }
        },
        {
          "id": "feature.LogoutFeature.Done",
          "label": "LogoutFeature.Done",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_logout",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "LogoutFeature.Done"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.feature_logout.0002",
          "from": "feature.LogoutFeature.Init",
          "to": "feature.LogoutFeature.Submitting",
          "event": "submitLogout",
          "roles": [],
          "narrative": {
            "summary": "提交登出請求",
            "taskDescription": "觸發 submitLogout 並呼叫登出端點，UI 顯示 loading，進入 LogoutFeature.Submitting。"
          },
          "validations": [
            {
              "id": "v.t.feature_logout.0002.01",
              "type": "semantic-check",
              "description": "API 呼叫登出端點；成功後伺服器端使 token/session 失效；UI 顯示 loading。",
              "expected": null
            }
          ],
          "intent": {
            "category": "action",
            "summary": "submitLogout"
          },
          "meta": {
            "diagramId": "feature_logout",
            "source": {
              "raw": "LogoutFeature.Init --> LogoutFeature.Submitting : submitLogout"
            }
          }
        },
        {
          "id": "t.feature_logout.0003",
          "from": "feature.LogoutFeature.Submitting",
          "to": "feature.LogoutFeature.Done",
          "event": "logoutSucceeded",
          "roles": [],
          "narrative": {
            "summary": "登出成功",
            "taskDescription": "登出 API 成功後進入 Done；前端清除本地 token/session 並切回 Guest 導覽規則。"
          },
          "validations": [
            {
              "id": "v.t.feature_logout.0003.01",
              "type": "network-success",
              "description": "API 回 200；前端清除本地 token/session；Header 切回 Guest 導覽規則。",
              "expected": "HTTP 200"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "logoutSucceeded"
          },
          "meta": {
            "diagramId": "feature_logout",
            "source": {
              "raw": "LogoutFeature.Submitting --> LogoutFeature.Done : logoutSucceeded"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_activity_list_member.invokes.feature_logout.s.page_ActivityListPage_member_Ready.to.feature_LogoutFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list_member",
            "stateId": "page.ActivityListPage.member.Ready"
          },
          "to": {
            "diagramId": "feature_logout",
            "stateId": "feature.LogoutFeature.Init"
          },
          "narrative": {
            "summary": "由列表觸發登出（Member）",
            "taskDescription": "在列表 Ready 觸發 chooseLogout，進入 LogoutFeature.Init 執行登出流程。"
          },
          "validations": [
            {
              "id": "v.c.page_activity_list_member.invokes.feature_logout.01",
              "type": "semantic-check",
              "description": "觸發登出流程；登出完成後 token/session 失效。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "chooseLogout | navigate LogoutFeature",
            "action": "chooseLogout",
            "navigateTarget": "LogoutFeature"
          }
        },
        {
          "id": "c.page_activity_list_member.invokes.feature_logout.s.page_ActivityListPage_member_Empty.to.feature_LogoutFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list_member",
            "stateId": "page.ActivityListPage.member.Empty"
          },
          "to": {
            "diagramId": "feature_logout",
            "stateId": "feature.LogoutFeature.Init"
          },
          "narrative": {
            "summary": "Empty 狀態下登出（Member）",
            "taskDescription": "在列表 Empty 觸發 chooseLogout，進入 LogoutFeature.Init。"
          },
          "validations": [
            {
              "id": "v.c.page_activity_list_member.invokes.feature_logout.02",
              "type": "semantic-check",
              "description": "Empty 狀態下仍可登出並回到 Guest 導覽規則。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "chooseLogout | navigate LogoutFeature",
            "action": "chooseLogout",
            "navigateTarget": "LogoutFeature"
          }
        },
        {
          "id": "c.page_activity_list_admin.invokes.feature_logout.s.page_ActivityListPage_admin_Ready.to.feature_LogoutFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list_admin",
            "stateId": "page.ActivityListPage.admin.Ready"
          },
          "to": {
            "diagramId": "feature_logout",
            "stateId": "feature.LogoutFeature.Init"
          },
          "narrative": {
            "summary": "由列表觸發登出（Admin）",
            "taskDescription": "在列表 Ready 觸發 chooseLogout，進入 LogoutFeature.Init 執行登出流程。"
          },
          "validations": [
            {
              "id": "v.c.page_activity_list_admin.invokes.feature_logout.01",
              "type": "semantic-check",
              "description": "觸發登出，完成後回到 Guest 列表與 Guest 導覽。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "chooseLogout | navigate LogoutFeature",
            "action": "chooseLogout",
            "navigateTarget": "LogoutFeature"
          }
        },
        {
          "id": "c.page_activity_list_admin.invokes.feature_logout.s.page_ActivityListPage_admin_Empty.to.feature_LogoutFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list_admin",
            "stateId": "page.ActivityListPage.admin.Empty"
          },
          "to": {
            "diagramId": "feature_logout",
            "stateId": "feature.LogoutFeature.Init"
          },
          "narrative": {
            "summary": "Empty 狀態下登出（Admin）",
            "taskDescription": "在列表 Empty 觸發 chooseLogout 進入 LogoutFeature.Init。"
          },
          "validations": [
            {
              "id": "v.c.page_activity_list_admin.invokes.feature_logout.02",
              "type": "semantic-check",
              "description": "Empty 狀態下登出後回到 Guest。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "chooseLogout | navigate LogoutFeature",
            "action": "chooseLogout",
            "navigateTarget": "LogoutFeature"
          }
        },
        {
          "id": "c.page_activity_detail_member.invokes.feature_logout.s.page_ActivityDetailPage_member_Ready.to.feature_LogoutFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail_member",
            "stateId": "page.ActivityDetailPage.member.Ready"
          },
          "to": {
            "diagramId": "feature_logout",
            "stateId": "feature.LogoutFeature.Init"
          },
          "narrative": {
            "summary": "在詳情登出（Member）",
            "taskDescription": "詳情 Ready 觸發 chooseLogout 進入 LogoutFeature.Init。"
          },
          "validations": [
            {
              "id": "v.c.page_activity_detail_member.invokes.feature_logout.01",
              "type": "semantic-check",
              "description": "登出後回到 Guest；不再顯示「取消報名」等登入後功能。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "chooseLogout | navigate LogoutFeature",
            "action": "chooseLogout",
            "navigateTarget": "LogoutFeature"
          }
        },
        {
          "id": "c.page_activity_detail_admin.invokes.feature_logout.s.page_ActivityDetailPage_admin_Ready.to.feature_LogoutFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail_admin",
            "stateId": "page.ActivityDetailPage.admin.Ready"
          },
          "to": {
            "diagramId": "feature_logout",
            "stateId": "feature.LogoutFeature.Init"
          },
          "narrative": {
            "summary": "在詳情登出（Admin）",
            "taskDescription": "詳情 Ready 觸發 chooseLogout 進入 LogoutFeature.Init。"
          },
          "validations": [
            {
              "id": "v.c.page_activity_detail_admin.invokes.feature_logout.01",
              "type": "semantic-check",
              "description": "登出後回到 Guest。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "chooseLogout | navigate LogoutFeature",
            "action": "chooseLogout",
            "navigateTarget": "LogoutFeature"
          }
        },
        {
          "id": "c.page_my_activities_member.invokes.feature_logout.s.page_MyActivitiesPage_member_Ready.to.feature_LogoutFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_my_activities_member",
            "stateId": "page.MyActivitiesPage.member.Ready"
          },
          "to": {
            "diagramId": "feature_logout",
            "stateId": "feature.LogoutFeature.Init"
          },
          "narrative": {
            "summary": "由我的活動登出（Member）",
            "taskDescription": "Ready 觸發 chooseLogout 進入 LogoutFeature.Init。"
          },
          "validations": [
            {
              "id": "v.c.page_my_activities_member.invokes.feature_logout.01",
              "type": "semantic-check",
              "description": "登出後回到 Guest；再進 `/my-activities` 會被導向登入。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "chooseLogout | navigate LogoutFeature",
            "action": "chooseLogout",
            "navigateTarget": "LogoutFeature"
          }
        },
        {
          "id": "c.page_my_activities_member.invokes.feature_logout.s.page_MyActivitiesPage_member_Empty.to.feature_LogoutFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_my_activities_member",
            "stateId": "page.MyActivitiesPage.member.Empty"
          },
          "to": {
            "diagramId": "feature_logout",
            "stateId": "feature.LogoutFeature.Init"
          },
          "narrative": {
            "summary": "Empty 下登出（Member）",
            "taskDescription": "Empty 觸發 chooseLogout。"
          },
          "validations": [
            {
              "id": "v.c.page_my_activities_member.invokes.feature_logout.02",
              "type": "semantic-check",
              "description": "Empty 狀態可登出。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "chooseLogout | navigate LogoutFeature",
            "action": "chooseLogout",
            "navigateTarget": "LogoutFeature"
          }
        },
        {
          "id": "c.page_my_activities_admin.invokes.feature_logout.s.page_MyActivitiesPage_admin_Ready.to.feature_LogoutFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_my_activities_admin",
            "stateId": "page.MyActivitiesPage.admin.Ready"
          },
          "to": {
            "diagramId": "feature_logout",
            "stateId": "feature.LogoutFeature.Init"
          },
          "narrative": {
            "summary": "由我的活動登出（Admin）",
            "taskDescription": "Ready 觸發 chooseLogout 進入 LogoutFeature.Init。"
          },
          "validations": [
            {
              "id": "v.c.page_my_activities_admin.invokes.feature_logout.01",
              "type": "semantic-check",
              "description": "登出後回到 Guest。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "chooseLogout | navigate LogoutFeature",
            "action": "chooseLogout",
            "navigateTarget": "LogoutFeature"
          }
        },
        {
          "id": "c.page_my_activities_admin.invokes.feature_logout.s.page_MyActivitiesPage_admin_Empty.to.feature_LogoutFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_my_activities_admin",
            "stateId": "page.MyActivitiesPage.admin.Empty"
          },
          "to": {
            "diagramId": "feature_logout",
            "stateId": "feature.LogoutFeature.Init"
          },
          "narrative": {
            "summary": "Empty 下登出（Admin）",
            "taskDescription": "Empty 可登出。"
          },
          "validations": [
            {
              "id": "v.c.page_my_activities_admin.invokes.feature_logout.02",
              "type": "semantic-check",
              "description": "Empty 可登出。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "chooseLogout | navigate LogoutFeature",
            "action": "chooseLogout",
            "navigateTarget": "LogoutFeature"
          }
        },
        {
          "id": "c.page_admin_activity_list.invokes.feature_logout.s.page_AdminActivityListPage_Ready.to.feature_LogoutFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Ready"
          },
          "to": {
            "diagramId": "feature_logout",
            "stateId": "feature.LogoutFeature.Init"
          },
          "narrative": {
            "summary": "後台登出",
            "taskDescription": "Ready 觸發 chooseLogout 進入 LogoutFeature.Init。"
          },
          "validations": [
            {
              "id": "v.c.page_admin_activity_list.invokes.feature_logout.01",
              "type": "semantic-check",
              "description": "登出後回到 Guest；再次進後台會被導向登入。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "chooseLogout | navigate LogoutFeature",
            "action": "chooseLogout",
            "navigateTarget": "LogoutFeature"
          }
        },
        {
          "id": "c.page_admin_activity_list.invokes.feature_logout.s.page_AdminActivityListPage_Empty.to.feature_LogoutFeature_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Empty"
          },
          "to": {
            "diagramId": "feature_logout",
            "stateId": "feature.LogoutFeature.Init"
          },
          "narrative": {
            "summary": "Empty 下登出",
            "taskDescription": "Empty 可登出。"
          },
          "validations": [
            {
              "id": "v.c.page_admin_activity_list.invokes.feature_logout.02",
              "type": "semantic-check",
              "description": "Empty 可登出。",
              "expected": null
            }
          ],
          "meta": {
            "reason": "chooseLogout | navigate LogoutFeature",
            "action": "chooseLogout",
            "navigateTarget": "LogoutFeature"
          }
        },
        {
          "id": "c.feature_logout.invokes.page_activity_list_guest.s.feature_LogoutFeature_Done.to.page_ActivityListPage_guest_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_logout",
            "stateId": "feature.LogoutFeature.Done"
          },
          "to": {
            "diagramId": "page_activity_list_guest",
            "stateId": "page.ActivityListPage.guest.Init"
          },
          "narrative": {
            "summary": "登出完成回到訪客活動列表",
            "taskDescription": "登出成功後導回 /activities 並回到 Guest 活動列表初始狀態。"
          },
          "validations": [
            {
              "id": "v.c.feature_logout.invokes.page_activity_list_guest.01",
              "type": "url-equals",
              "description": "回到 Guest 活動列表；不顯示我的活動/管理後台/登出。",
              "expected": "/activities"
            }
          ],
          "meta": {
            "reason": "returnToGuestList | navigate /activities",
            "action": "returnToGuestList",
            "navigateTarget": "/activities"
          }
        },
        {
          "id": "c.page_entry.contains.feature_logout",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "feature_logout",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": null,
        "featureName": "LogoutFeature",
        "entryStateId": "feature.LogoutFeature.Init"
      }
    },
    {
      "id": "feature_register_for_activity",
      "name": "Register For Activity Feature",
      "level": "feature",
      "parentDiagramId": "page_entry",
      "roles": [],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "⑲ Register For Activity Feature",
        "order": 19
      },
      "groups": [],
      "states": [
        {
          "id": "feature.RegisterForActivityFeature.Init",
          "label": "RegisterForActivityFeature.Init",
          "type": "start",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_register_for_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "RegisterForActivityFeature.Init"
            }
          }
        },
        {
          "id": "feature.RegisterForActivityFeature.Submitting",
          "label": "RegisterForActivityFeature.Submitting",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_register_for_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "RegisterForActivityFeature.Submitting"
            }
          }
        },
        {
          "id": "feature.RegisterForActivityFeature.DonePublished",
          "label": "RegisterForActivityFeature.DonePublished",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_register_for_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "RegisterForActivityFeature.DonePublished"
            }
          }
        },
        {
          "id": "feature.RegisterForActivityFeature.DoneFull",
          "label": "RegisterForActivityFeature.DoneFull",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_register_for_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "RegisterForActivityFeature.DoneFull"
            }
          }
        },
        {
          "id": "feature.RegisterForActivityFeature.Failed",
          "label": "RegisterForActivityFeature.Failed",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_register_for_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "RegisterForActivityFeature.Failed"
            }
          }
        },
        {
          "id": "feature.RegisterForActivityFeature.Canceled",
          "label": "RegisterForActivityFeature.Canceled",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_register_for_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "RegisterForActivityFeature.Canceled"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.feature_register_for_activity.0002",
          "from": "feature.RegisterForActivityFeature.Init",
          "to": "feature.RegisterForActivityFeature.Submitting",
          "event": "submitRegister",
          "roles": [],
          "narrative": {
            "summary": "提交報名請求",
            "taskDescription": "觸發 submitRegister 呼叫報名 API，伺服器端以交易/原子操作驗證規則並更新名額/狀態。"
          },
          "validations": [
            {
              "id": "v.t.feature_register_for_activity.0002.01",
              "type": "semantic-check",
              "description": "API 送出報名請求；伺服器端驗證：狀態=published、now<=deadline、未額滿、未重複報名；並同步更新 Registration 與活動報名數/狀態。",
              "expected": null
            }
          ],
          "intent": {
            "category": "action",
            "summary": "submitRegister"
          },
          "meta": {
            "diagramId": "feature_register_for_activity",
            "source": {
              "raw": "RegisterForActivityFeature.Init --> RegisterForActivityFeature.Submitting : submitRegister"
            }
          }
        },
        {
          "id": "t.feature_register_for_activity.0003",
          "from": "feature.RegisterForActivityFeature.Submitting",
          "to": "feature.RegisterForActivityFeature.DonePublished",
          "event": "registerSucceededPublished",
          "roles": [],
          "narrative": {
            "summary": "報名成功（仍為 published）",
            "taskDescription": "報名成功且活動仍未額滿，進入 DonePublished。"
          },
          "validations": [
            {
              "id": "v.t.feature_register_for_activity.0003.01",
              "type": "network-success",
              "description": "API 回 200/201；建立有效 Registration；活動維持 published；UI 更新為「已報名」。",
              "expected": "HTTP 200/201"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "registerSucceededPublished"
          },
          "meta": {
            "diagramId": "feature_register_for_activity",
            "source": {
              "raw": "RegisterForActivityFeature.Submitting --> RegisterForActivityFeature.DonePublished : registerSucceededPublished"
            }
          }
        },
        {
          "id": "t.feature_register_for_activity.0004",
          "from": "feature.RegisterForActivityFeature.Submitting",
          "to": "feature.RegisterForActivityFeature.DoneFull",
          "event": "registerSucceededFull",
          "roles": [],
          "narrative": {
            "summary": "報名成功（達上限 full）",
            "taskDescription": "報名成功且達上限，活動狀態切換為 full，進入 DoneFull。"
          },
          "validations": [
            {
              "id": "v.t.feature_register_for_activity.0004.01",
              "type": "network-success",
              "description": "API 回 200/201；活動狀態自動切換為 full；後續報名請求需被拒絕；UI 顯示「已額滿」。",
              "expected": "HTTP 200/201"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "registerSucceededFull"
          },
          "meta": {
            "diagramId": "feature_register_for_activity",
            "source": {
              "raw": "RegisterForActivityFeature.Submitting --> RegisterForActivityFeature.DoneFull : registerSucceededFull"
            }
          }
        },
        {
          "id": "t.feature_register_for_activity.0005",
          "from": "feature.RegisterForActivityFeature.Submitting",
          "to": "feature.RegisterForActivityFeature.Failed",
          "event": "registerFailed",
          "roles": [],
          "narrative": {
            "summary": "報名失敗",
            "taskDescription": "規則不符或一致性檢查失敗時進入 Failed，顯示具體原因並維持原狀態。"
          },
          "validations": [
            {
              "id": "v.t.feature_register_for_activity.0005.01",
              "type": "network-failed",
              "description": "活動非 published/已截止/已額滿/已報名/或一致性檢查失敗：API 回 400/409；不得建立第二筆有效報名。",
              "expected": "HTTP 400/409"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "registerFailed"
          },
          "meta": {
            "diagramId": "feature_register_for_activity",
            "source": {
              "raw": "RegisterForActivityFeature.Submitting --> RegisterForActivityFeature.Failed : registerFailed"
            }
          }
        },
        {
          "id": "t.feature_register_for_activity.0006",
          "from": "feature.RegisterForActivityFeature.Submitting",
          "to": "feature.RegisterForActivityFeature.Canceled",
          "event": "cancel",
          "roles": [],
          "narrative": {
            "summary": "取消報名流程",
            "taskDescription": "取消報名流程不應變更 Registration/名額/活動狀態。"
          },
          "validations": [
            {
              "id": "v.t.feature_register_for_activity.0006.01",
              "type": "semantic-check",
              "description": "取消不應變更 Registration/名額/活動狀態；回到詳情頁仍維持原資料。",
              "expected": null
            }
          ],
          "intent": {
            "category": "action",
            "summary": "cancel"
          },
          "meta": {
            "diagramId": "feature_register_for_activity",
            "source": {
              "raw": "RegisterForActivityFeature.Submitting --> RegisterForActivityFeature.Canceled : cancel"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_entry.contains.feature_register_for_activity",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "feature_register_for_activity",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": null,
        "featureName": "RegisterForActivityFeature",
        "entryStateId": "feature.RegisterForActivityFeature.Init"
      }
    },
    {
      "id": "feature_cancel_registration",
      "name": "Cancel Registration Feature",
      "level": "feature",
      "parentDiagramId": "page_entry",
      "roles": [],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "⑳ Cancel Registration Feature",
        "order": 20
      },
      "groups": [],
      "states": [
        {
          "id": "feature.CancelRegistrationFeature.Init",
          "label": "CancelRegistrationFeature.Init",
          "type": "start",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_cancel_registration",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "CancelRegistrationFeature.Init"
            }
          }
        },
        {
          "id": "feature.CancelRegistrationFeature.Submitting",
          "label": "CancelRegistrationFeature.Submitting",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_cancel_registration",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "CancelRegistrationFeature.Submitting"
            }
          }
        },
        {
          "id": "feature.CancelRegistrationFeature.DonePublished",
          "label": "CancelRegistrationFeature.DonePublished",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_cancel_registration",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "CancelRegistrationFeature.DonePublished"
            }
          }
        },
        {
          "id": "feature.CancelRegistrationFeature.DoneClosedOrArchived",
          "label": "CancelRegistrationFeature.DoneClosedOrArchived",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_cancel_registration",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "CancelRegistrationFeature.DoneClosedOrArchived"
            }
          }
        },
        {
          "id": "feature.CancelRegistrationFeature.Failed",
          "label": "CancelRegistrationFeature.Failed",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_cancel_registration",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "CancelRegistrationFeature.Failed"
            }
          }
        },
        {
          "id": "feature.CancelRegistrationFeature.Canceled",
          "label": "CancelRegistrationFeature.Canceled",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_cancel_registration",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "CancelRegistrationFeature.Canceled"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.feature_cancel_registration.0002",
          "from": "feature.CancelRegistrationFeature.Init",
          "to": "feature.CancelRegistrationFeature.Submitting",
          "event": "submitCancel",
          "roles": [],
          "narrative": {
            "summary": "提交取消請求",
            "taskDescription": "呼叫取消 API；伺服器端以交易/原子操作更新 canceled_at、釋放名額並必要時回復狀態。"
          },
          "validations": [
            {
              "id": "v.t.feature_cancel_registration.0002.01",
              "type": "semantic-check",
              "description": "API 送出取消請求；伺服器端驗證：已報名、now<=deadline、now<=date；以交易/原子操作更新 canceled_at、釋放名額，並在必要時把活動從 full 回復到 published。",
              "expected": null
            }
          ],
          "intent": {
            "category": "action",
            "summary": "submitCancel"
          },
          "meta": {
            "diagramId": "feature_cancel_registration",
            "source": {
              "raw": "CancelRegistrationFeature.Init --> CancelRegistrationFeature.Submitting : submitCancel"
            }
          }
        },
        {
          "id": "t.feature_cancel_registration.0003",
          "from": "feature.CancelRegistrationFeature.Submitting",
          "to": "feature.CancelRegistrationFeature.DonePublished",
          "event": "cancelSucceededPublished",
          "roles": [],
          "narrative": {
            "summary": "取消成功且可回復 published",
            "taskDescription": "取消成功釋放名額，若先前為 full 則回到 published。"
          },
          "validations": [
            {
              "id": "v.t.feature_cancel_registration.0003.01",
              "type": "network-success",
              "description": "取消成功且可回復 published：API 回 200；Registration canceled_at 被設置；活動名額釋放且若先前為 full 則回到 published；UI 更新為「可報名」。",
              "expected": "HTTP 200"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "cancelSucceededPublished"
          },
          "meta": {
            "diagramId": "feature_cancel_registration",
            "source": {
              "raw": "CancelRegistrationFeature.Submitting --> CancelRegistrationFeature.DonePublished : cancelSucceededPublished"
            }
          }
        },
        {
          "id": "t.feature_cancel_registration.0004",
          "from": "feature.CancelRegistrationFeature.Submitting",
          "to": "feature.CancelRegistrationFeature.DoneClosedOrArchived",
          "event": "cancelSucceededNoReopen",
          "roles": [],
          "narrative": {
            "summary": "取消成功但不可回復",
            "taskDescription": "活動為 closed/archived（或不允許回復）時，取消成功後狀態維持。"
          },
          "validations": [
            {
              "id": "v.t.feature_cancel_registration.0004.01",
              "type": "network-success",
              "description": "取消成功但活動為 closed/archived（或不允許回復）：API 回 200；Registration canceled_at 被設置；活動狀態維持（closed/archived）；UI 不顯示可報名。",
              "expected": "HTTP 200"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "cancelSucceededNoReopen"
          },
          "meta": {
            "diagramId": "feature_cancel_registration",
            "source": {
              "raw": "CancelRegistrationFeature.Submitting --> CancelRegistrationFeature.DoneClosedOrArchived : cancelSucceededNoReopen"
            }
          }
        },
        {
          "id": "t.feature_cancel_registration.0005",
          "from": "feature.CancelRegistrationFeature.Submitting",
          "to": "feature.CancelRegistrationFeature.Failed",
          "event": "cancelFailed",
          "roles": [],
          "narrative": {
            "summary": "取消失敗",
            "taskDescription": "已截止/已結束/未報名或規則不符時取消失敗。"
          },
          "validations": [
            {
              "id": "v.t.feature_cancel_registration.0005.01",
              "type": "network-failed",
              "description": "若已截止、已結束、未報名或規則不符：API 回 400/409；不得釋放名額或錯誤修改狀態；UI 顯示原因。",
              "expected": "HTTP 400/409"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "cancelFailed"
          },
          "meta": {
            "diagramId": "feature_cancel_registration",
            "source": {
              "raw": "CancelRegistrationFeature.Submitting --> CancelRegistrationFeature.Failed : cancelFailed"
            }
          }
        },
        {
          "id": "t.feature_cancel_registration.0006",
          "from": "feature.CancelRegistrationFeature.Submitting",
          "to": "feature.CancelRegistrationFeature.Canceled",
          "event": "cancel",
          "roles": [],
          "narrative": {
            "summary": "取消流程",
            "taskDescription": "取消流程不改變資料，回到詳情仍維持原狀態。"
          },
          "validations": [
            {
              "id": "v.t.feature_cancel_registration.0006.01",
              "type": "semantic-check",
              "description": "取消不改變資料；回到詳情仍維持原狀態。",
              "expected": null
            }
          ],
          "intent": {
            "category": "action",
            "summary": "cancel"
          },
          "meta": {
            "diagramId": "feature_cancel_registration",
            "source": {
              "raw": "CancelRegistrationFeature.Submitting --> CancelRegistrationFeature.Canceled : cancel"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_entry.contains.feature_cancel_registration",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "feature_cancel_registration",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": null,
        "featureName": "CancelRegistrationFeature",
        "entryStateId": "feature.CancelRegistrationFeature.Init"
      }
    },
    {
      "id": "feature_admin_create_activity",
      "name": "Admin Create Activity Feature",
      "level": "feature",
      "parentDiagramId": "page_entry",
      "roles": [],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "㉑ Admin Create Activity Feature",
        "order": 21
      },
      "groups": [],
      "states": [
        {
          "id": "feature.AdminCreateActivityFeature.Init",
          "label": "AdminCreateActivityFeature.Init",
          "type": "start",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_create_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminCreateActivityFeature.Init"
            }
          }
        },
        {
          "id": "feature.AdminCreateActivityFeature.Submitting",
          "label": "AdminCreateActivityFeature.Submitting",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_create_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminCreateActivityFeature.Submitting"
            }
          }
        },
        {
          "id": "feature.AdminCreateActivityFeature.DoneDraft",
          "label": "AdminCreateActivityFeature.DoneDraft",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_create_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminCreateActivityFeature.DoneDraft"
            }
          }
        },
        {
          "id": "feature.AdminCreateActivityFeature.DonePublished",
          "label": "AdminCreateActivityFeature.DonePublished",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_create_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminCreateActivityFeature.DonePublished"
            }
          }
        },
        {
          "id": "feature.AdminCreateActivityFeature.Failed",
          "label": "AdminCreateActivityFeature.Failed",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_create_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminCreateActivityFeature.Failed"
            }
          }
        },
        {
          "id": "feature.AdminCreateActivityFeature.Canceled",
          "label": "AdminCreateActivityFeature.Canceled",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_create_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminCreateActivityFeature.Canceled"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.feature_admin_create_activity.0002",
          "from": "feature.AdminCreateActivityFeature.Init",
          "to": "feature.AdminCreateActivityFeature.Submitting",
          "event": "submitCreate",
          "roles": [],
          "narrative": {
            "summary": "提交建立活動",
            "taskDescription": "送出建立活動 API，伺服器端驗證欄位並寫入 audit log。"
          },
          "validations": [
            {
              "id": "v.t.feature_admin_create_activity.0002.01",
              "type": "semantic-check",
              "description": "API 接收活動欄位；伺服器端驗證 capacity>0、date>deadline；建立活動並寫入 audit log。",
              "expected": null
            }
          ],
          "intent": {
            "category": "action",
            "summary": "submitCreate"
          },
          "meta": {
            "diagramId": "feature_admin_create_activity",
            "source": {
              "raw": "AdminCreateActivityFeature.Init --> AdminCreateActivityFeature.Submitting : submitCreate"
            }
          }
        },
        {
          "id": "t.feature_admin_create_activity.0003",
          "from": "feature.AdminCreateActivityFeature.Submitting",
          "to": "feature.AdminCreateActivityFeature.DoneDraft",
          "event": "createSucceededDraft",
          "roles": [],
          "narrative": {
            "summary": "建立成功（draft）",
            "taskDescription": "儲存為 draft，活動不出現在公開列表。"
          },
          "validations": [
            {
              "id": "v.t.feature_admin_create_activity.0003.01",
              "type": "network-success",
              "description": "若儲存為 draft：API 回 201/200；活動 status=draft；活動不出現在公開列表。",
              "expected": "HTTP 201/200"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "createSucceededDraft"
          },
          "meta": {
            "diagramId": "feature_admin_create_activity",
            "source": {
              "raw": "AdminCreateActivityFeature.Submitting --> AdminCreateActivityFeature.DoneDraft : createSucceededDraft"
            }
          }
        },
        {
          "id": "t.feature_admin_create_activity.0004",
          "from": "feature.AdminCreateActivityFeature.Submitting",
          "to": "feature.AdminCreateActivityFeature.DonePublished",
          "event": "createSucceededPublished",
          "roles": [],
          "narrative": {
            "summary": "建立成功（published）",
            "taskDescription": "直接發佈，公開列表可見且可報名（未逾 deadline 且未額滿）。"
          },
          "validations": [
            {
              "id": "v.t.feature_admin_create_activity.0004.01",
              "type": "network-success",
              "description": "若直接發佈：API 回 201/200；活動 status=published；公開列表可見且可報名（未逾 deadline 且未額滿）。",
              "expected": "HTTP 201/200"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "createSucceededPublished"
          },
          "meta": {
            "diagramId": "feature_admin_create_activity",
            "source": {
              "raw": "AdminCreateActivityFeature.Submitting --> AdminCreateActivityFeature.DonePublished : createSucceededPublished"
            }
          }
        },
        {
          "id": "t.feature_admin_create_activity.0005",
          "from": "feature.AdminCreateActivityFeature.Submitting",
          "to": "feature.AdminCreateActivityFeature.Failed",
          "event": "createFailed",
          "roles": [],
          "narrative": {
            "summary": "建立失敗",
            "taskDescription": "欄位不合法或權限不符時，建立失敗且不得建立活動。"
          },
          "validations": [
            {
              "id": "v.t.feature_admin_create_activity.0005.01",
              "type": "network-failed",
              "description": "欄位不合法或權限不符：API 回 400/403；不得建立活動；UI 顯示可修正錯誤。",
              "expected": "HTTP 400/403"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "createFailed"
          },
          "meta": {
            "diagramId": "feature_admin_create_activity",
            "source": {
              "raw": "AdminCreateActivityFeature.Submitting --> AdminCreateActivityFeature.Failed : createFailed"
            }
          }
        },
        {
          "id": "t.feature_admin_create_activity.0006",
          "from": "feature.AdminCreateActivityFeature.Submitting",
          "to": "feature.AdminCreateActivityFeature.Canceled",
          "event": "cancel",
          "roles": [],
          "narrative": {
            "summary": "取消建立",
            "taskDescription": "取消不建立活動。"
          },
          "validations": [
            {
              "id": "v.t.feature_admin_create_activity.0006.01",
              "type": "semantic-check",
              "description": "取消不建立活動。",
              "expected": null
            }
          ],
          "intent": {
            "category": "action",
            "summary": "cancel"
          },
          "meta": {
            "diagramId": "feature_admin_create_activity",
            "source": {
              "raw": "AdminCreateActivityFeature.Submitting --> AdminCreateActivityFeature.Canceled : cancel"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_entry.contains.feature_admin_create_activity",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "feature_admin_create_activity",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": null,
        "featureName": "AdminCreateActivityFeature",
        "entryStateId": "feature.AdminCreateActivityFeature.Init"
      }
    },
    {
      "id": "feature_admin_update_activity",
      "name": "Admin Update Activity Feature",
      "level": "feature",
      "parentDiagramId": "page_entry",
      "roles": [],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "㉒ Admin Update Activity Feature",
        "order": 22
      },
      "groups": [],
      "states": [
        {
          "id": "feature.AdminUpdateActivityFeature.Init",
          "label": "AdminUpdateActivityFeature.Init",
          "type": "start",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_update_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminUpdateActivityFeature.Init"
            }
          }
        },
        {
          "id": "feature.AdminUpdateActivityFeature.Submitting",
          "label": "AdminUpdateActivityFeature.Submitting",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_update_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminUpdateActivityFeature.Submitting"
            }
          }
        },
        {
          "id": "feature.AdminUpdateActivityFeature.Done",
          "label": "AdminUpdateActivityFeature.Done",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_update_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminUpdateActivityFeature.Done"
            }
          }
        },
        {
          "id": "feature.AdminUpdateActivityFeature.Failed",
          "label": "AdminUpdateActivityFeature.Failed",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_update_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminUpdateActivityFeature.Failed"
            }
          }
        },
        {
          "id": "feature.AdminUpdateActivityFeature.Canceled",
          "label": "AdminUpdateActivityFeature.Canceled",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_update_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminUpdateActivityFeature.Canceled"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.feature_admin_update_activity.0002",
          "from": "feature.AdminUpdateActivityFeature.Init",
          "to": "feature.AdminUpdateActivityFeature.Submitting",
          "event": "submitUpdate",
          "roles": [],
          "narrative": {
            "summary": "提交更新",
            "taskDescription": "提交更新活動欄位並等待 API 回應。"
          },
          "validations": [
            {
              "id": "v.t.feature_admin_update_activity.0002.01",
              "type": "semantic-check",
              "description": "API 更新活動欄位並驗證 date>deadline、capacity>0；成功後更新 updated_at 並寫 audit log。",
              "expected": null
            }
          ],
          "intent": {
            "category": "action",
            "summary": "submitUpdate"
          },
          "meta": {
            "diagramId": "feature_admin_update_activity",
            "source": {
              "raw": "AdminUpdateActivityFeature.Init --> AdminUpdateActivityFeature.Submitting : submitUpdate"
            }
          }
        },
        {
          "id": "t.feature_admin_update_activity.0003",
          "from": "feature.AdminUpdateActivityFeature.Submitting",
          "to": "feature.AdminUpdateActivityFeature.Done",
          "event": "updateSucceeded",
          "roles": [],
          "narrative": {
            "summary": "更新成功",
            "taskDescription": "API 回 200，活動資料更新。"
          },
          "validations": [
            {
              "id": "v.t.feature_admin_update_activity.0003.01",
              "type": "network-success",
              "description": "API 回 200；活動資料更新；公開列表/詳情顯示一致。",
              "expected": "HTTP 200"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "updateSucceeded"
          },
          "meta": {
            "diagramId": "feature_admin_update_activity",
            "source": {
              "raw": "AdminUpdateActivityFeature.Submitting --> AdminUpdateActivityFeature.Done : updateSucceeded"
            }
          }
        },
        {
          "id": "t.feature_admin_update_activity.0004",
          "from": "feature.AdminUpdateActivityFeature.Submitting",
          "to": "feature.AdminUpdateActivityFeature.Failed",
          "event": "updateFailed",
          "roles": [],
          "narrative": {
            "summary": "更新失敗",
            "taskDescription": "欄位不合法/不存在/權限不符時更新失敗，UI 顯示錯誤。"
          },
          "validations": [
            {
              "id": "v.t.feature_admin_update_activity.0004.01",
              "type": "network-failed",
              "description": "若不合法/不存在/權限不符：API 回 400/404/403；資料不應被部分更新；UI 顯示錯誤。",
              "expected": "HTTP 400/404/403"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "updateFailed"
          },
          "meta": {
            "diagramId": "feature_admin_update_activity",
            "source": {
              "raw": "AdminUpdateActivityFeature.Submitting --> AdminUpdateActivityFeature.Failed : updateFailed"
            }
          }
        },
        {
          "id": "t.feature_admin_update_activity.0005",
          "from": "feature.AdminUpdateActivityFeature.Submitting",
          "to": "feature.AdminUpdateActivityFeature.Canceled",
          "event": "cancel",
          "roles": [],
          "narrative": {
            "summary": "取消更新",
            "taskDescription": "取消不提交變更。"
          },
          "validations": [
            {
              "id": "v.t.feature_admin_update_activity.0005.01",
              "type": "semantic-check",
              "description": "取消不提交變更。",
              "expected": null
            }
          ],
          "intent": {
            "category": "action",
            "summary": "cancel"
          },
          "meta": {
            "diagramId": "feature_admin_update_activity",
            "source": {
              "raw": "AdminUpdateActivityFeature.Submitting --> AdminUpdateActivityFeature.Canceled : cancel"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_entry.contains.feature_admin_update_activity",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "feature_admin_update_activity",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": null,
        "featureName": "AdminUpdateActivityFeature",
        "entryStateId": "feature.AdminUpdateActivityFeature.Init"
      }
    },
    {
      "id": "feature_admin_change_activity_status",
      "name": "Admin Change Activity Status Feature",
      "level": "feature",
      "parentDiagramId": "page_entry",
      "roles": [],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "㉓ Admin Change Activity Status Feature",
        "order": 23
      },
      "groups": [],
      "states": [
        {
          "id": "feature.AdminChangeActivityStatusFeature.Init",
          "label": "AdminChangeActivityStatusFeature.Init",
          "type": "start",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_change_activity_status",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminChangeActivityStatusFeature.Init"
            }
          }
        },
        {
          "id": "feature.AdminChangeActivityStatusFeature.Submitting",
          "label": "AdminChangeActivityStatusFeature.Submitting",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_change_activity_status",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminChangeActivityStatusFeature.Submitting"
            }
          }
        },
        {
          "id": "feature.AdminChangeActivityStatusFeature.Done",
          "label": "AdminChangeActivityStatusFeature.Done",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_change_activity_status",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminChangeActivityStatusFeature.Done"
            }
          }
        },
        {
          "id": "feature.AdminChangeActivityStatusFeature.Failed",
          "label": "AdminChangeActivityStatusFeature.Failed",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_change_activity_status",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminChangeActivityStatusFeature.Failed"
            }
          }
        },
        {
          "id": "feature.AdminChangeActivityStatusFeature.Canceled",
          "label": "AdminChangeActivityStatusFeature.Canceled",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_change_activity_status",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminChangeActivityStatusFeature.Canceled"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.feature_admin_change_activity_status.0002",
          "from": "feature.AdminChangeActivityStatusFeature.Init",
          "to": "feature.AdminChangeActivityStatusFeature.Submitting",
          "event": "submitStatusChange",
          "roles": [],
          "narrative": {
            "summary": "提交狀態變更",
            "taskDescription": "提交目標狀態並等待 API 回應。"
          },
          "validations": [
            {
              "id": "v.t.feature_admin_change_activity_status.0002.01",
              "type": "semantic-check",
              "description": "API 接收目標狀態；伺服器端驗證合法轉換（draft->published、published/full->closed、closed/draft->archived）；成功寫 audit log。",
              "expected": null
            }
          ],
          "intent": {
            "category": "action",
            "summary": "submitStatusChange"
          },
          "meta": {
            "diagramId": "feature_admin_change_activity_status",
            "source": {
              "raw": "AdminChangeActivityStatusFeature.Init --> AdminChangeActivityStatusFeature.Submitting : submitStatusChange"
            }
          }
        },
        {
          "id": "t.feature_admin_change_activity_status.0003",
          "from": "feature.AdminChangeActivityStatusFeature.Submitting",
          "to": "feature.AdminChangeActivityStatusFeature.Done",
          "event": "changeSucceeded",
          "roles": [],
          "narrative": {
            "summary": "狀態變更成功",
            "taskDescription": "API 回 200，Activity.status 更新。"
          },
          "validations": [
            {
              "id": "v.t.feature_admin_change_activity_status.0003.01",
              "type": "network-success",
              "description": "API 回 200；Activity.status 更新；公開列表是否可見依 status（published/full 可見；draft/closed/archived 不可見）。",
              "expected": "HTTP 200"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "changeSucceeded"
          },
          "meta": {
            "diagramId": "feature_admin_change_activity_status",
            "source": {
              "raw": "AdminChangeActivityStatusFeature.Submitting --> AdminChangeActivityStatusFeature.Done : changeSucceeded"
            }
          }
        },
        {
          "id": "t.feature_admin_change_activity_status.0004",
          "from": "feature.AdminChangeActivityStatusFeature.Submitting",
          "to": "feature.AdminChangeActivityStatusFeature.Failed",
          "event": "changeFailed",
          "roles": [],
          "narrative": {
            "summary": "狀態變更失敗",
            "taskDescription": "非法轉換或權限不足時變更失敗，UI 顯示錯誤原因。"
          },
          "validations": [
            {
              "id": "v.t.feature_admin_change_activity_status.0004.01",
              "type": "network-failed",
              "description": "非法轉換或權限不足：API 回 400/403/409；狀態不得改變；UI 顯示錯誤原因。",
              "expected": "HTTP 400/403/409"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "changeFailed"
          },
          "meta": {
            "diagramId": "feature_admin_change_activity_status",
            "source": {
              "raw": "AdminChangeActivityStatusFeature.Submitting --> AdminChangeActivityStatusFeature.Failed : changeFailed"
            }
          }
        },
        {
          "id": "t.feature_admin_change_activity_status.0005",
          "from": "feature.AdminChangeActivityStatusFeature.Submitting",
          "to": "feature.AdminChangeActivityStatusFeature.Canceled",
          "event": "cancel",
          "roles": [],
          "narrative": {
            "summary": "取消狀態變更",
            "taskDescription": "取消不改變狀態。"
          },
          "validations": [
            {
              "id": "v.t.feature_admin_change_activity_status.0005.01",
              "type": "semantic-check",
              "description": "取消不改變狀態。",
              "expected": null
            }
          ],
          "intent": {
            "category": "action",
            "summary": "cancel"
          },
          "meta": {
            "diagramId": "feature_admin_change_activity_status",
            "source": {
              "raw": "AdminChangeActivityStatusFeature.Submitting --> AdminChangeActivityStatusFeature.Canceled : cancel"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_entry.contains.feature_admin_change_activity_status",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "feature_admin_change_activity_status",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": null,
        "featureName": "AdminChangeActivityStatusFeature",
        "entryStateId": "feature.AdminChangeActivityStatusFeature.Init"
      }
    },
    {
      "id": "feature_admin_export_registrations_csv",
      "name": "Admin Export Registrations CSV Feature",
      "level": "feature",
      "parentDiagramId": "page_entry",
      "roles": [],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "㉔ Admin Export Registrations CSV Feature",
        "order": 24
      },
      "groups": [],
      "states": [
        {
          "id": "feature.AdminExportRegistrationsCsvFeature.Init",
          "label": "AdminExportRegistrationsCsvFeature.Init",
          "type": "start",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_export_registrations_csv",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminExportRegistrationsCsvFeature.Init"
            }
          }
        },
        {
          "id": "feature.AdminExportRegistrationsCsvFeature.Submitting",
          "label": "AdminExportRegistrationsCsvFeature.Submitting",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_export_registrations_csv",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminExportRegistrationsCsvFeature.Submitting"
            }
          }
        },
        {
          "id": "feature.AdminExportRegistrationsCsvFeature.Done",
          "label": "AdminExportRegistrationsCsvFeature.Done",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_export_registrations_csv",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminExportRegistrationsCsvFeature.Done"
            }
          }
        },
        {
          "id": "feature.AdminExportRegistrationsCsvFeature.Failed",
          "label": "AdminExportRegistrationsCsvFeature.Failed",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_export_registrations_csv",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminExportRegistrationsCsvFeature.Failed"
            }
          }
        },
        {
          "id": "feature.AdminExportRegistrationsCsvFeature.Canceled",
          "label": "AdminExportRegistrationsCsvFeature.Canceled",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_export_registrations_csv",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminExportRegistrationsCsvFeature.Canceled"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.feature_admin_export_registrations_csv.0002",
          "from": "feature.AdminExportRegistrationsCsvFeature.Init",
          "to": "feature.AdminExportRegistrationsCsvFeature.Submitting",
          "event": "submitExport",
          "roles": [],
          "narrative": {
            "summary": "提交匯出",
            "taskDescription": "提交匯出請求並等待下載結果。"
          },
          "validations": [
            {
              "id": "v.t.feature_admin_export_registrations_csv.0002.01",
              "type": "semantic-check",
              "description": "API 產生 CSV；內容必須與畫面名單一致（姓名/Email/報名時間，且僅有效報名）；下載檔名可包含活動識別但不可洩漏敏感資訊。",
              "expected": null
            }
          ],
          "intent": {
            "category": "action",
            "summary": "submitExport"
          },
          "meta": {
            "diagramId": "feature_admin_export_registrations_csv",
            "source": {
              "raw": "AdminExportRegistrationsCsvFeature.Init --> AdminExportRegistrationsCsvFeature.Submitting : submitExport"
            }
          }
        },
        {
          "id": "t.feature_admin_export_registrations_csv.0003",
          "from": "feature.AdminExportRegistrationsCsvFeature.Submitting",
          "to": "feature.AdminExportRegistrationsCsvFeature.Done",
          "event": "exportSucceeded",
          "roles": [],
          "narrative": {
            "summary": "匯出成功",
            "taskDescription": "API 回 200 並成功下載 CSV。"
          },
          "validations": [
            {
              "id": "v.t.feature_admin_export_registrations_csv.0003.01",
              "type": "network-success",
              "description": "API 回 200 並成功下載；UI 顯示成功提示（若有）；不改變名單資料。",
              "expected": "HTTP 200"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "exportSucceeded"
          },
          "meta": {
            "diagramId": "feature_admin_export_registrations_csv",
            "source": {
              "raw": "AdminExportRegistrationsCsvFeature.Submitting --> AdminExportRegistrationsCsvFeature.Done : exportSucceeded"
            }
          }
        },
        {
          "id": "t.feature_admin_export_registrations_csv.0004",
          "from": "feature.AdminExportRegistrationsCsvFeature.Submitting",
          "to": "feature.AdminExportRegistrationsCsvFeature.Failed",
          "event": "exportFailed",
          "roles": [],
          "narrative": {
            "summary": "匯出失敗",
            "taskDescription": "匯出失敗顯示錯誤並允許重試。"
          },
          "validations": [
            {
              "id": "v.t.feature_admin_export_registrations_csv.0004.01",
              "type": "network-failed",
              "description": "匯出失敗（例如 5xx）時顯示錯誤提示；不應下載到不完整檔案；可重試。",
              "expected": "HTTP 5xx"
            }
          ],
          "intent": {
            "category": "action",
            "summary": "exportFailed"
          },
          "meta": {
            "diagramId": "feature_admin_export_registrations_csv",
            "source": {
              "raw": "AdminExportRegistrationsCsvFeature.Submitting --> AdminExportRegistrationsCsvFeature.Failed : exportFailed"
            }
          }
        },
        {
          "id": "t.feature_admin_export_registrations_csv.0005",
          "from": "feature.AdminExportRegistrationsCsvFeature.Submitting",
          "to": "feature.AdminExportRegistrationsCsvFeature.Canceled",
          "event": "cancel",
          "roles": [],
          "narrative": {
            "summary": "取消匯出",
            "taskDescription": "取消不觸發下載。"
          },
          "validations": [
            {
              "id": "v.t.feature_admin_export_registrations_csv.0005.01",
              "type": "semantic-check",
              "description": "取消不觸發下載。",
              "expected": null
            }
          ],
          "intent": {
            "category": "action",
            "summary": "cancel"
          },
          "meta": {
            "diagramId": "feature_admin_export_registrations_csv",
            "source": {
              "raw": "AdminExportRegistrationsCsvFeature.Submitting --> AdminExportRegistrationsCsvFeature.Canceled : cancel"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_entry.contains.feature_admin_export_registrations_csv",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "feature_admin_export_registrations_csv",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": null,
        "featureName": "AdminExportRegistrationsCsvFeature",
        "entryStateId": "feature.AdminExportRegistrationsCsvFeature.Init"
      }
    }
  ],
  "hierarchy": {
    "roots": [
      "page_entry"
    ],
    "childrenByDiagramId": {
      "page_entry": [
        "feature_admin_change_activity_status",
        "feature_admin_create_activity",
        "feature_admin_export_registrations_csv",
        "feature_admin_update_activity",
        "feature_auth_login",
        "feature_auth_register",
        "feature_cancel_registration",
        "feature_logout",
        "feature_register_for_activity",
        "page_activity_detail_admin",
        "page_activity_detail_guest",
        "page_activity_detail_member",
        "page_activity_list_admin",
        "page_activity_list_guest",
        "page_activity_list_member",
        "page_admin_activity_create",
        "page_admin_activity_edit",
        "page_admin_activity_list",
        "page_admin_activity_registrations",
        "page_login",
        "page_my_activities_admin",
        "page_my_activities_member",
        "page_register"
      ],
      "page_login": [],
      "page_register": [],
      "page_activity_list_guest": [],
      "page_activity_list_member": [],
      "page_activity_list_admin": [],
      "page_activity_detail_guest": [],
      "page_activity_detail_member": [],
      "page_activity_detail_admin": [],
      "page_my_activities_member": [],
      "page_my_activities_admin": [],
      "page_admin_activity_list": [],
      "page_admin_activity_create": [],
      "page_admin_activity_edit": [],
      "page_admin_activity_registrations": [],
      "feature_auth_login": [],
      "feature_auth_register": [],
      "feature_logout": [],
      "feature_register_for_activity": [],
      "feature_cancel_registration": [],
      "feature_admin_create_activity": [],
      "feature_admin_update_activity": [],
      "feature_admin_change_activity_status": [],
      "feature_admin_export_registrations_csv": []
    }
  },
  "meta": {
    "warnings": [
      "Stage 1 skeleton: states/transitions/connectors not generated yet."
    ],
    "validation": {
      "issues": [],
      "fixes": [
        {
          "path": "root.version",
          "message": "upgraded version from '1.0' to '2.0'"
        },
        {
          "path": "diagram.page_entry.connectors.c.page_entry.invokes.page_activity_list_guest.s.page_Entry_Init.to.page_ActivityListPage_guest_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_entry.connectors.c.page_entry.invokes.page_login.s.page_Entry_Init.to.page_LoginPage_guest_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_entry.connectors.c.page_entry.invokes.page_register.s.page_Entry_Init.to.page_RegisterPage_guest_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_login.connectors.c.page_login.invokes.feature_auth_login.s.page_LoginPage_guest_Ready.to.feature_AuthLoginFeature_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_login.connectors.c.page_login.invokes.page_register.s.page_LoginPage_guest_Ready.to.page_RegisterPage_guest_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_login.connectors.c.page_login.invokes.page_activity_list_guest.s.page_LoginPage_guest_Ready.to.page_ActivityListPage_guest_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_login.connectors.c.page_register.invokes.page_login.s.page_RegisterPage_guest_Ready.to.page_LoginPage_guest_Init.from.stateId",
          "message": "cleared missing from.stateId"
        },
        {
          "path": "diagram.page_login.connectors.c.feature_auth_login.invokes.page_login.s.feature_AuthLoginFeature_Failed.to.page_LoginPage_guest_Init.from.stateId",
          "message": "cleared missing from.stateId"
        },
        {
          "path": "diagram.page_login.connectors.c.feature_auth_login.invokes.page_login.s.feature_AuthLoginFeature_Canceled.to.page_LoginPage_guest_Init.from.stateId",
          "message": "cleared missing from.stateId"
        },
        {
          "path": "diagram.page_register.connectors.c.page_register.invokes.feature_auth_register.s.page_RegisterPage_guest_Ready.to.feature_AuthRegisterFeature_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_register.connectors.c.page_register.invokes.page_activity_list_guest.s.page_RegisterPage_guest_Ready.to.page_ActivityListPage_guest_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_register.connectors.c.feature_auth_register.invokes.page_register.s.feature_AuthRegisterFeature_Failed.to.page_RegisterPage_guest_Init.from.stateId",
          "message": "cleared missing from.stateId"
        },
        {
          "path": "diagram.page_register.connectors.c.feature_auth_register.invokes.page_register.s.feature_AuthRegisterFeature_Canceled.to.page_RegisterPage_guest_Init.from.stateId",
          "message": "cleared missing from.stateId"
        },
        {
          "path": "diagram.page_activity_list_guest.connectors.c.page_activity_list_guest.invokes.page_activity_detail_guest.s.page_ActivityListPage_guest_Ready.to.page_ActivityDetailPage_guest_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_activity_list_member.connectors.c.feature_auth_login.invokes.page_activity_list_member.s.feature_AuthLoginFeature_Done.to.page_ActivityListPage_member_Init.from.stateId",
          "message": "cleared missing from.stateId"
        },
        {
          "path": "diagram.page_activity_list_member.connectors.c.feature_auth_register.invokes.page_activity_list_member.s.feature_AuthRegisterFeature_Done.to.page_ActivityListPage_member_Init.from.stateId",
          "message": "cleared missing from.stateId"
        },
        {
          "path": "diagram.page_activity_list_member.connectors.c.page_activity_list_member.invokes.page_activity_detail_member.s.page_ActivityListPage_member_Ready.to.page_ActivityDetailPage_member_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_activity_list_member.connectors.c.page_activity_list_member.invokes.page_my_activities_member.s.page_ActivityListPage_member_Ready.to.page_MyActivitiesPage_member_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_activity_list_member.connectors.c.page_activity_list_member.invokes.feature_logout.s.page_ActivityListPage_member_Ready.to.feature_LogoutFeature_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_activity_list_member.connectors.c.page_activity_list_member.invokes.page_my_activities_member.s.page_ActivityListPage_member_Empty.to.page_MyActivitiesPage_member_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_activity_list_member.connectors.c.page_activity_list_member.invokes.feature_logout.s.page_ActivityListPage_member_Empty.to.feature_LogoutFeature_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_activity_list_admin.connectors.c.feature_auth_login.invokes.page_activity_list_admin.s.feature_AuthLoginFeature_Done.to.page_ActivityListPage_admin_Init.from.stateId",
          "message": "cleared missing from.stateId"
        },
        {
          "path": "diagram.page_activity_list_admin.connectors.c.page_activity_list_admin.invokes.page_activity_detail_admin.s.page_ActivityListPage_admin_Ready.to.page_ActivityDetailPage_admin_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_activity_list_admin.connectors.c.page_activity_list_admin.invokes.page_my_activities_admin.s.page_ActivityListPage_admin_Ready.to.page_MyActivitiesPage_admin_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_activity_list_admin.connectors.c.page_activity_list_admin.invokes.page_admin_activity_list.s.page_ActivityListPage_admin_Ready.to.page_AdminActivityListPage_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_activity_list_admin.connectors.c.page_activity_list_admin.invokes.feature_logout.s.page_ActivityListPage_admin_Ready.to.feature_LogoutFeature_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_activity_list_admin.connectors.c.page_activity_list_admin.invokes.page_admin_activity_list.s.page_ActivityListPage_admin_Empty.to.page_AdminActivityListPage_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_activity_list_admin.connectors.c.page_activity_list_admin.invokes.feature_logout.s.page_ActivityListPage_admin_Empty.to.feature_LogoutFeature_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_activity_detail_member.meta.entryStateId",
          "message": "inferred from first start state"
        },
        {
          "path": "diagram.page_activity_detail_member.connectors.c.page_activity_detail_member.invokes.feature_register_for_activity.s.page_ActivityDetailPage_member_Ready.to.feature_RegisterForActivityFeature_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_activity_detail_member.connectors.c.page_activity_detail_member.invokes.feature_cancel_registration.s.page_ActivityDetailPage_member_Ready.to.feature_CancelRegistrationFeature_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_activity_detail_member.connectors.c.page_activity_detail_member.invokes.feature_logout.s.page_ActivityDetailPage_member_Ready.to.feature_LogoutFeature_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_activity_detail_member.connectors.c.feature_auth_login.invokes.page_activity_detail_member.s.feature_AuthLoginFeature_Done.to.page_ActivityDetailPage_member_Init.from.stateId",
          "message": "cleared missing from.stateId"
        },
        {
          "path": "diagram.page_activity_detail_member.connectors.c.feature_auth_register.invokes.page_activity_detail_member.s.feature_AuthRegisterFeature_Done.to.page_ActivityDetailPage_member_Init.from.stateId",
          "message": "cleared missing from.stateId"
        },
        {
          "path": "diagram.page_activity_detail_admin.meta.entryStateId",
          "message": "inferred from first start state"
        },
        {
          "path": "diagram.page_activity_detail_admin.connectors.c.page_activity_detail_admin.invokes.feature_register_for_activity.s.page_ActivityDetailPage_admin_Ready.to.feature_RegisterForActivityFeature_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_activity_detail_admin.connectors.c.page_activity_detail_admin.invokes.feature_cancel_registration.s.page_ActivityDetailPage_admin_Ready.to.feature_CancelRegistrationFeature_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_activity_detail_admin.connectors.c.page_activity_detail_admin.invokes.page_admin_activity_list.s.page_ActivityDetailPage_admin_Ready.to.page_AdminActivityListPage_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_activity_detail_admin.connectors.c.page_activity_detail_admin.invokes.feature_logout.s.page_ActivityDetailPage_admin_Ready.to.feature_LogoutFeature_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_activity_detail_admin.connectors.c.feature_auth_login.invokes.page_activity_detail_admin.s.feature_AuthLoginFeature_Done.to.page_ActivityDetailPage_admin_Init.from.stateId",
          "message": "cleared missing from.stateId"
        },
        {
          "path": "diagram.page_my_activities_member.meta.entryStateId",
          "message": "inferred from first start state"
        },
        {
          "path": "diagram.page_my_activities_member.connectors.c.page_my_activities_member.invokes.feature_logout.s.page_MyActivitiesPage_member_Ready.to.feature_LogoutFeature_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_my_activities_member.connectors.c.page_my_activities_member.invokes.feature_logout.s.page_MyActivitiesPage_member_Empty.to.feature_LogoutFeature_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_my_activities_member.connectors.c.feature_auth_login.invokes.page_my_activities_member.s.feature_AuthLoginFeature_Done.to.page_MyActivitiesPage_member_Init.from.stateId",
          "message": "cleared missing from.stateId"
        },
        {
          "path": "diagram.page_my_activities_member.connectors.c.feature_auth_register.invokes.page_my_activities_member.s.feature_AuthRegisterFeature_Done.to.page_MyActivitiesPage_member_Init.from.stateId",
          "message": "cleared missing from.stateId"
        },
        {
          "path": "diagram.page_my_activities_admin.meta.entryStateId",
          "message": "inferred from first start state"
        },
        {
          "path": "diagram.page_my_activities_admin.connectors.c.page_my_activities_admin.invokes.page_admin_activity_list.s.page_MyActivitiesPage_admin_Ready.to.page_AdminActivityListPage_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_my_activities_admin.connectors.c.page_my_activities_admin.invokes.feature_logout.s.page_MyActivitiesPage_admin_Ready.to.feature_LogoutFeature_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_my_activities_admin.connectors.c.page_my_activities_admin.invokes.page_admin_activity_list.s.page_MyActivitiesPage_admin_Empty.to.page_AdminActivityListPage_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_my_activities_admin.connectors.c.page_my_activities_admin.invokes.feature_logout.s.page_MyActivitiesPage_admin_Empty.to.feature_LogoutFeature_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_my_activities_admin.connectors.c.feature_auth_login.invokes.page_my_activities_admin.s.feature_AuthLoginFeature_Done.to.page_MyActivitiesPage_admin_Init.from.stateId",
          "message": "cleared missing from.stateId"
        },
        {
          "path": "diagram.page_admin_activity_list.meta.entryStateId",
          "message": "inferred from first start state"
        },
        {
          "path": "diagram.page_admin_activity_list.connectors.c.page_admin_activity_list.invokes.page_admin_activity_create.s.page_AdminActivityListPage_Ready.to.page_AdminActivityCreatePage_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_admin_activity_list.connectors.c.page_admin_activity_list.invokes.page_admin_activity_edit.s.page_AdminActivityListPage_Ready.to.page_AdminActivityEditPage_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_admin_activity_list.connectors.c.page_admin_activity_list.invokes.page_admin_activity_registrations.s.page_AdminActivityListPage_Ready.to.page_AdminActivityRegistrationsPage_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_admin_activity_list.connectors.c.page_admin_activity_list.invokes.feature_logout.s.page_AdminActivityListPage_Ready.to.feature_LogoutFeature_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_admin_activity_list.connectors.c.page_admin_activity_list.invokes.page_admin_activity_create.s.page_AdminActivityListPage_Empty.to.page_AdminActivityCreatePage_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_admin_activity_list.connectors.c.page_admin_activity_list.invokes.feature_logout.s.page_AdminActivityListPage_Empty.to.feature_LogoutFeature_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_admin_activity_list.connectors.c.feature_auth_login.invokes.page_admin_activity_list.s.feature_AuthLoginFeature_Done.to.page_AdminActivityListPage_Init.from.stateId",
          "message": "cleared missing from.stateId"
        },
        {
          "path": "diagram.page_admin_activity_create.connectors.c.page_admin_activity_create.invokes.feature_admin_create_activity.s.page_AdminActivityCreatePage_Editing.to.feature_AdminCreateActivityFeature_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_admin_activity_edit.connectors.c.page_admin_activity_edit.invokes.feature_admin_update_activity.s.page_AdminActivityEditPage_Editing.to.feature_AdminUpdateActivityFeature_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_admin_activity_edit.connectors.c.page_admin_activity_edit.invokes.feature_admin_change_activity_status.s.page_AdminActivityEditPage_Editing.to.feature_AdminChangeActivityStatusFeature_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_admin_activity_registrations.connectors.c.page_admin_activity_registrations.invokes.feature_admin_export_registrations_csv.s.page_AdminActivityRegistrationsPage_Ready.to.feature_AdminExportRegistrationsCsvFeature_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_admin_activity_registrations.connectors.c.page_admin_activity_registrations.invokes.feature_admin_change_activity_status.s.page_AdminActivityRegistrationsPage_Ready.to.feature_AdminChangeActivityStatusFeature_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_admin_activity_registrations.connectors.c.page_admin_activity_registrations.invokes.feature_admin_export_registrations_csv.s.page_AdminActivityRegistrationsPage_Empty.to.feature_AdminExportRegistrationsCsvFeature_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_admin_activity_registrations.connectors.c.page_admin_activity_registrations.invokes.feature_admin_change_activity_status.s.page_AdminActivityRegistrationsPage_Empty.to.feature_AdminChangeActivityStatusFeature_Init.to.stateId",
          "message": "cleared missing to.stateId"
        },
        {
          "path": "diagram.page_entry.connectors.c.page_entry.contains.page_login",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.page_login.connectors.c.page_entry.contains.page_login",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.page_entry.connectors.c.page_entry.contains.page_register",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.page_register.connectors.c.page_entry.contains.page_register",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.page_entry.connectors.c.page_entry.contains.page_activity_list_guest",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.page_activity_list_guest.connectors.c.page_entry.contains.page_activity_list_guest",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.page_entry.connectors.c.page_entry.contains.page_activity_list_member",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.page_activity_list_member.connectors.c.page_entry.contains.page_activity_list_member",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.page_entry.connectors.c.page_entry.contains.page_activity_list_admin",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.page_activity_list_admin.connectors.c.page_entry.contains.page_activity_list_admin",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.page_entry.connectors.c.page_entry.contains.page_activity_detail_guest",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.page_activity_detail_guest.connectors.c.page_entry.contains.page_activity_detail_guest",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.page_entry.connectors.c.page_entry.contains.page_activity_detail_member",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.page_activity_detail_member.connectors.c.page_entry.contains.page_activity_detail_member",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.page_entry.connectors.c.page_entry.contains.page_activity_detail_admin",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.page_activity_detail_admin.connectors.c.page_entry.contains.page_activity_detail_admin",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.page_entry.connectors.c.page_entry.contains.page_my_activities_member",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.page_my_activities_member.connectors.c.page_entry.contains.page_my_activities_member",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.page_entry.connectors.c.page_entry.contains.page_my_activities_admin",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.page_my_activities_admin.connectors.c.page_entry.contains.page_my_activities_admin",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.page_entry.connectors.c.page_entry.contains.page_admin_activity_list",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.page_admin_activity_list.connectors.c.page_entry.contains.page_admin_activity_list",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.page_entry.connectors.c.page_entry.contains.page_admin_activity_create",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.page_admin_activity_create.connectors.c.page_entry.contains.page_admin_activity_create",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.page_entry.connectors.c.page_entry.contains.page_admin_activity_edit",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.page_admin_activity_edit.connectors.c.page_entry.contains.page_admin_activity_edit",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.page_entry.connectors.c.page_entry.contains.page_admin_activity_registrations",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.page_admin_activity_registrations.connectors.c.page_entry.contains.page_admin_activity_registrations",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.page_entry.connectors.c.page_entry.contains.feature_auth_login",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.feature_auth_login.connectors.c.page_entry.contains.feature_auth_login",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.page_entry.connectors.c.page_entry.contains.feature_auth_register",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.feature_auth_register.connectors.c.page_entry.contains.feature_auth_register",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.page_entry.connectors.c.page_entry.contains.feature_logout",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.feature_logout.connectors.c.page_entry.contains.feature_logout",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.page_entry.connectors.c.page_entry.contains.feature_register_for_activity",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.feature_register_for_activity.connectors.c.page_entry.contains.feature_register_for_activity",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.page_entry.connectors.c.page_entry.contains.feature_cancel_registration",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.feature_cancel_registration.connectors.c.page_entry.contains.feature_cancel_registration",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.page_entry.connectors.c.page_entry.contains.feature_admin_create_activity",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.feature_admin_create_activity.connectors.c.page_entry.contains.feature_admin_create_activity",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.page_entry.connectors.c.page_entry.contains.feature_admin_update_activity",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.feature_admin_update_activity.connectors.c.page_entry.contains.feature_admin_update_activity",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.page_entry.connectors.c.page_entry.contains.feature_admin_change_activity_status",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.feature_admin_change_activity_status.connectors.c.page_entry.contains.feature_admin_change_activity_status",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.page_entry.connectors.c.page_entry.contains.feature_admin_export_registrations_csv",
          "message": "added missing contains connector"
        },
        {
          "path": "diagram.feature_admin_export_registrations_csv.connectors.c.page_entry.contains.feature_admin_export_registrations_csv",
          "message": "added missing contains connector"
        },
        {
          "path": "root.hierarchy",
          "message": "re-derived from diagrams.parentDiagramId"
        }
      ]
    }
  }
}
