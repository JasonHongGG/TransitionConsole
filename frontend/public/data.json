{
  "system": "ActivityManagementPlatform",
  "version": "1.0",
  "generatedAt": "2026-02-16T00:00:00.000Z",
  "inputs": {
    "specPath": "StateTranstionDiagram/spec.md",
    "transitionPath": "StateTranstionDiagram/transition.md"
  },
  "spec": {
    "raw": null,
    "summary": {
      "productName": "社團活動管理平台",
      "goals": [
        "瀏覽即將舉辦的活動（僅顯示對外公開的活動）",
        "報名活動 / 取消報名活動（受活動狀態、截止時間、名額與個人報名狀態限制）",
        "管理員建立、編輯、發佈、關閉報名、下架活動，並查看報名名單與匯出名單（CSV）"
      ],
      "roles": [
        {
          "id": "guest",
          "label": "Guest"
        },
        {
          "id": "member",
          "label": "Member"
        },
        {
          "id": "admin",
          "label": "Admin"
        }
      ]
    }
  },
  "diagrams": [
    {
      "id": "page_entry",
      "name": "Entry",
      "level": "page",
      "parentDiagramId": null,
      "roles": [],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "① Entry State Machine",
        "order": 1
      },
      "groups": [],
      "states": [
        {
          "id": "page.Entry.Init",
          "label": "Init",
          "type": "start",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_entry",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "Entry.Init"
            }
          }
        },
        {
          "id": "page.Entry.CheckSession",
          "label": "CheckSession",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_entry",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "Entry.CheckSession"
            }
          }
        },
        {
          "id": "page.Entry.RouteActivities",
          "label": "RouteActivities",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_entry",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "Entry.RouteActivities"
            }
          }
        },
        {
          "id": "page.Entry.RouteLogin",
          "label": "RouteLogin",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_entry",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "Entry.RouteLogin"
            }
          }
        },
        {
          "id": "page.Entry.RouteError",
          "label": "RouteError",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_entry",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "Entry.RouteError"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.page_entry.0001",
          "from": "page.Entry.Init",
          "to": "page.Entry.Init",
          "event": "enterSite",
          "roles": [],
          "validations": [
            "首次進站會進入 Entry.Init；UI 顯示全站 Layout；導覽列僅依 session 決定顯示內容，未登入不出現 Member/Admin 專屬入口。"
          ],
          "intent": {
            "category": "action",
            "summary": "enterSite"
          },
          "meta": {
            "diagramId": "page_entry",
            "source": {
              "raw": "[*] --> Entry.Init : enterSite"
            }
          }
        },
        {
          "id": "t.page_entry.0002",
          "from": "page.Entry.Init",
          "to": "page.Entry.CheckSession",
          "event": "boot",
          "roles": [],
          "validations": [
            "觸發讀取本地 token/session 並向後端驗證（若需要）；畫面顯示 loading 或初始化狀態；boot 不可被連續重入造成多次驗證請求。"
          ],
          "intent": {
            "category": "action",
            "summary": "boot"
          },
          "meta": {
            "diagramId": "page_entry",
            "source": {
              "raw": "Entry.Init --> Entry.CheckSession : boot"
            }
          }
        },
        {
          "id": "t.page_entry.0003",
          "from": "page.Entry.CheckSession",
          "to": "page.Entry.RouteActivities",
          "event": "sessionKnown",
          "roles": [],
          "validations": [
            "完成 session 驗證後能判定登入狀態與角色（guest/member/admin）；後續導覽與路由保護依該判定一致。"
          ],
          "intent": {
            "category": "action",
            "summary": "sessionKnown"
          },
          "meta": {
            "diagramId": "page_entry",
            "source": {
              "raw": "Entry.CheckSession --> Entry.RouteActivities : sessionKnown"
            }
          }
        },
        {
          "id": "t.page_entry.0004",
          "from": "page.Entry.CheckSession",
          "to": "page.Entry.RouteLogin",
          "event": "sessionMissing",
          "roles": [],
          "validations": [
            "若未登入/無有效 session，導向登入頁；不會進入受保護頁面（例如我的活動、後台）。"
          ],
          "intent": {
            "category": "action",
            "summary": "sessionMissing"
          },
          "meta": {
            "diagramId": "page_entry",
            "source": {
              "raw": "Entry.CheckSession --> Entry.RouteLogin : sessionMissing"
            }
          }
        },
        {
          "id": "t.page_entry.0005",
          "from": "page.Entry.CheckSession",
          "to": "page.Entry.RouteError",
          "event": "sessionCheckFailed",
          "roles": [],
          "validations": [
            "若 session 驗證請求失敗（5xx/網路錯誤），會收斂到全站錯誤頁；不得假裝成 guest 並繼續進入受保護操作。"
          ],
          "intent": {
            "category": "action",
            "summary": "sessionCheckFailed"
          },
          "meta": {
            "diagramId": "page_entry",
            "source": {
              "raw": "Entry.CheckSession --> Entry.RouteError : sessionCheckFailed"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_entry.invokes.page_activity_list.s.page_Entry_RouteActivities.to.page_ActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_entry",
            "stateId": "page.Entry.RouteActivities"
          },
          "to": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Init"
          },
          "meta": {
            "reason": "openActivities | navigate /activities",
            "action": "openActivities",
            "navigateTarget": "/activities",
            "validations": [
              "路由變更到 `/activities` 成功；ActivityListPage.Init 作為該頁 Entry State 可達；公開列表僅顯示 published/full。"
            ]
          }
        },
        {
          "id": "c.page_entry.invokes.page_login.s.page_Entry_RouteLogin.to.page_LoginPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_entry",
            "stateId": "page.Entry.RouteLogin"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Init"
          },
          "meta": {
            "reason": "openLogin | navigate /login",
            "action": "openLogin",
            "navigateTarget": "/login",
            "validations": [
              "路由變更到 `/login` 成功；LoginPage.Init 可達；Header 不顯示「我的活動/管理後台/登出」。"
            ]
          }
        },
        {
          "id": "c.page_entry.invokes.page_error.s.page_Entry_RouteError.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_entry",
            "stateId": "page.Entry.RouteError"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "showError | navigate /error",
            "action": "showError",
            "navigateTarget": "/error",
            "validations": [
              "路由變更到 `/error` 成功；錯誤頁顯示可回到活動列表的入口；不顯示敏感錯誤堆疊。"
            ]
          }
        },
        {
          "id": "c.page_entry.contains.page_activity_list",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_activity_list",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.page_activity_detail",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_activity_detail",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.page_login",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_login",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.page_register",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_register",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.page_my_activities",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_my_activities",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.page_admin_activity_list",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.page_admin_registrations",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_admin_registrations",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.page_forbidden",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_forbidden",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.page_not_found",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_not_found",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.page_error",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_error",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.feature_auth_login",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "feature_auth_login",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.feature_auth_register",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "feature_auth_register",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.feature_register_for_activity",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "feature_register_for_activity",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.feature_cancel_registration",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "feature_cancel_registration",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.feature_admin_upsert_activity",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "feature_admin_upsert_activity",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.feature_admin_publish_activity",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "feature_admin_publish_activity",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.feature_admin_close_registration",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "feature_admin_close_registration",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.feature_admin_archive_activity",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "feature_admin_archive_activity",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        },
        {
          "id": "c.page_entry.contains.feature_export_registrations_csv",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "feature_export_registrations_csv",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": "Entry",
        "featureName": null,
        "entryStateId": "page.Entry.Init"
      }
    },
    {
      "id": "page_activity_list",
      "name": "Activity List",
      "level": "page",
      "parentDiagramId": "page_entry",
      "roles": [],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "② Activity List Page",
        "order": 2
      },
      "groups": [],
      "states": [
        {
          "id": "page.ActivityListPage.Init",
          "label": "Init",
          "type": "start",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_activity_list",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ActivityListPage.Init"
            }
          }
        },
        {
          "id": "page.ActivityListPage.Loading",
          "label": "Loading",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_activity_list",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ActivityListPage.Loading"
            }
          }
        },
        {
          "id": "page.ActivityListPage.Ready.Guest",
          "label": "Ready.Guest",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_activity_list",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ActivityListPage.Ready.Guest"
            }
          }
        },
        {
          "id": "page.ActivityListPage.Ready.Member",
          "label": "Ready.Member",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_activity_list",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ActivityListPage.Ready.Member"
            }
          }
        },
        {
          "id": "page.ActivityListPage.Ready.Admin",
          "label": "Ready.Admin",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_activity_list",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ActivityListPage.Ready.Admin"
            }
          }
        },
        {
          "id": "page.ActivityListPage.Empty",
          "label": "Empty",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_activity_list",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ActivityListPage.Empty"
            }
          }
        },
        {
          "id": "page.ActivityListPage.Error",
          "label": "Error",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_activity_list",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ActivityListPage.Error"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.page_activity_list.0001",
          "from": "page.ActivityListPage.Init",
          "to": "page.ActivityListPage.Init",
          "event": "enterPage",
          "roles": [],
          "validations": [
            "進入 `/activities` 會落在 ActivityListPage.Init；頁面有一致的 Header；不會同時在 Header 與頁面重複顯示相同「登入/註冊」CTA。"
          ],
          "intent": {
            "category": "action",
            "summary": "enterPage"
          },
          "meta": {
            "diagramId": "page_activity_list",
            "source": {
              "raw": "[*] --> ActivityListPage.Init : enterPage"
            }
          }
        },
        {
          "id": "t.page_activity_list.0002",
          "from": "page.ActivityListPage.Init",
          "to": "page.ActivityListPage.Loading",
          "event": "loadActivities",
          "roles": [],
          "validations": [
            "觸發載入活動列表 API；UI 顯示 Loading；同一輪載入中不重複發送請求。"
          ],
          "intent": {
            "category": "action",
            "summary": "loadActivities"
          },
          "meta": {
            "diagramId": "page_activity_list",
            "source": {
              "raw": "ActivityListPage.Init --> ActivityListPage.Loading : loadActivities"
            }
          }
        },
        {
          "id": "t.page_activity_list.0003",
          "from": "page.ActivityListPage.Loading",
          "to": "page.ActivityListPage.Ready.Guest",
          "event": "loadOk [guest]",
          "roles": [],
          "validations": [
            "API 回 200；資料僅包含狀態 published/full；Header 僅顯示「活動列表/登入/註冊」；不顯示「我的活動/管理後台/登出」。"
          ],
          "intent": {
            "category": "action",
            "summary": "loadOk [guest]"
          },
          "meta": {
            "diagramId": "page_activity_list",
            "source": {
              "raw": "ActivityListPage.Loading --> ActivityListPage.Ready.Guest : loadOk [guest]"
            }
          }
        },
        {
          "id": "t.page_activity_list.0004",
          "from": "page.ActivityListPage.Loading",
          "to": "page.ActivityListPage.Ready.Member",
          "event": "loadOk [member]",
          "roles": [],
          "validations": [
            "API 回 200；資料僅包含 published/full；每筆活動顯示有效報名數/容量；Header 顯示「活動列表/我的活動/登出」，隱藏「登入/註冊/管理後台」。"
          ],
          "intent": {
            "category": "action",
            "summary": "loadOk [member]"
          },
          "meta": {
            "diagramId": "page_activity_list",
            "source": {
              "raw": "ActivityListPage.Loading --> ActivityListPage.Ready.Member : loadOk [member]"
            }
          }
        },
        {
          "id": "t.page_activity_list.0005",
          "from": "page.ActivityListPage.Loading",
          "to": "page.ActivityListPage.Ready.Admin",
          "event": "loadOk [admin]",
          "roles": [],
          "validations": [
            "API 回 200；資料僅包含 published/full；Header 顯示「活動列表/我的活動/管理後台/登出」，隱藏「登入/註冊」。"
          ],
          "intent": {
            "category": "action",
            "summary": "loadOk [admin]"
          },
          "meta": {
            "diagramId": "page_activity_list",
            "source": {
              "raw": "ActivityListPage.Loading --> ActivityListPage.Ready.Admin : loadOk [admin]"
            }
          }
        },
        {
          "id": "t.page_activity_list.0006",
          "from": "page.ActivityListPage.Loading",
          "to": "page.ActivityListPage.Empty",
          "event": "loadOkEmpty",
          "roles": [],
          "validations": [
            "API 回 200 且列表為空；UI 顯示 Empty 狀態（無公開活動）；仍保留可導向詳情的入口不存在（因為無資料）。"
          ],
          "intent": {
            "category": "action",
            "summary": "loadOkEmpty"
          },
          "meta": {
            "diagramId": "page_activity_list",
            "source": {
              "raw": "ActivityListPage.Loading --> ActivityListPage.Empty : loadOkEmpty"
            }
          }
        },
        {
          "id": "t.page_activity_list.0007",
          "from": "page.ActivityListPage.Loading",
          "to": "page.ActivityListPage.Error",
          "event": "loadFail",
          "roles": [],
          "validations": [
            "API 5xx 或網路錯誤時進入 Error；UI 顯示可重試；不顯示空白列表偽裝成功。"
          ],
          "intent": {
            "category": "action",
            "summary": "loadFail"
          },
          "meta": {
            "diagramId": "page_activity_list",
            "source": {
              "raw": "ActivityListPage.Loading --> ActivityListPage.Error : loadFail"
            }
          }
        },
        {
          "id": "t.page_activity_list.0008",
          "from": "page.ActivityListPage.Empty",
          "to": "page.ActivityListPage.Loading",
          "event": "retry",
          "roles": [],
          "validations": [
            "Empty 狀態按重試會重新呼叫載入 API；成功則進入 Ready.* 或維持 Empty；失敗則進入 Error。"
          ],
          "intent": {
            "category": "action",
            "summary": "retry"
          },
          "meta": {
            "diagramId": "page_activity_list",
            "source": {
              "raw": "ActivityListPage.Empty --> ActivityListPage.Loading : retry"
            }
          }
        },
        {
          "id": "t.page_activity_list.0009",
          "from": "page.ActivityListPage.Error",
          "to": "page.ActivityListPage.Loading",
          "event": "retry",
          "roles": [],
          "validations": [
            "Error 狀態按重試會重新呼叫載入 API；Loading 顯示；成功後狀態更新。"
          ],
          "intent": {
            "category": "action",
            "summary": "retry"
          },
          "meta": {
            "diagramId": "page_activity_list",
            "source": {
              "raw": "ActivityListPage.Error --> ActivityListPage.Loading : retry"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_entry.invokes.page_activity_list.s.page_Entry_RouteActivities.to.page_ActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_entry",
            "stateId": "page.Entry.RouteActivities"
          },
          "to": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Init"
          },
          "meta": {
            "reason": "openActivities | navigate /activities",
            "action": "openActivities",
            "navigateTarget": "/activities",
            "validations": [
              "路由變更到 `/activities` 成功；ActivityListPage.Init 作為該頁 Entry State 可達；公開列表僅顯示 published/full。"
            ]
          }
        },
        {
          "id": "c.page_activity_list.invokes.page_login.s.page_ActivityListPage_Ready_Guest.to.page_LoginPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Ready.Guest"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Init"
          },
          "meta": {
            "reason": "clickLogin | navigate /login",
            "action": "clickLogin",
            "navigateTarget": "/login",
            "validations": [
              "點擊登入導向 `/login`；LoginPage.Init 可達；redirect 參數若存在需保留（可選）。"
            ]
          }
        },
        {
          "id": "c.page_activity_list.invokes.page_register.s.page_ActivityListPage_Ready_Guest.to.page_RegisterPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Ready.Guest"
          },
          "to": {
            "diagramId": "page_register",
            "stateId": "page.RegisterPage.Init"
          },
          "meta": {
            "reason": "clickRegister | navigate /register",
            "action": "clickRegister",
            "navigateTarget": "/register",
            "validations": [
              "點擊註冊導向 `/register`；RegisterPage.Init 可達；Guest 導覽規則仍正確。"
            ]
          }
        },
        {
          "id": "c.page_activity_list.invokes.page_my_activities.s.page_ActivityListPage_Ready_Member.to.page_MyActivitiesPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Ready.Member"
          },
          "to": {
            "diagramId": "page_my_activities",
            "stateId": "page.MyActivitiesPage.Init"
          },
          "meta": {
            "reason": "goMyActivities | navigate /my-activities",
            "action": "goMyActivities",
            "navigateTarget": "/my-activities",
            "validations": [
              "導向 `/my-activities`；若 token/session 有效可載入；若失效則 API 401 並導向 `/login`。"
            ]
          }
        },
        {
          "id": "c.page_activity_list.invokes.page_my_activities.s.page_ActivityListPage_Ready_Admin.to.page_MyActivitiesPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Ready.Admin"
          },
          "to": {
            "diagramId": "page_my_activities",
            "stateId": "page.MyActivitiesPage.Init"
          },
          "meta": {
            "reason": "goMyActivities | navigate /my-activities",
            "action": "goMyActivities",
            "navigateTarget": "/my-activities",
            "validations": [
              "Admin 也可進入我的活動；只顯示該 Admin 自己的有效報名活動；不會看到他人資料。"
            ]
          }
        },
        {
          "id": "c.page_activity_list.invokes.page_admin_activity_list.s.page_ActivityListPage_Ready_Admin.to.page_AdminActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Ready.Admin"
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Init"
          },
          "meta": {
            "reason": "goAdminPanel | navigate /admin/activities",
            "action": "goAdminPanel",
            "navigateTarget": "/admin/activities",
            "validations": [
              "導向 `/admin/activities`；僅 Admin 可進入；Member 進入會 403；Guest 進入會導向登入或 API 401。"
            ]
          }
        },
        {
          "id": "c.page_activity_list.invokes.page_activity_detail.s.page_ActivityListPage_Ready_Guest.to.page_ActivityDetailPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Ready.Guest"
          },
          "to": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Init"
          },
          "meta": {
            "reason": "openActivity | navigate /activities/:activityId",
            "action": "openActivity",
            "navigateTarget": "/activities/:activityId",
            "validations": [
              "導向活動詳情；若活動不存在回 404 並導向 `/404`；不得顯示 draft/closed/archived 之公開詳情。"
            ]
          }
        },
        {
          "id": "c.page_activity_list.invokes.page_activity_detail.s.page_ActivityListPage_Ready_Member.to.page_ActivityDetailPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Ready.Member"
          },
          "to": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Init"
          },
          "meta": {
            "reason": "openActivity | navigate /activities/:activityId",
            "action": "openActivity",
            "navigateTarget": "/activities/:activityId",
            "validations": [
              "導向活動詳情成功；UI 顯示本人是否已報名與可用名額；有效報名數與列表一致。"
            ]
          }
        },
        {
          "id": "c.page_activity_list.invokes.page_activity_detail.s.page_ActivityListPage_Ready_Admin.to.page_ActivityDetailPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Ready.Admin"
          },
          "to": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Init"
          },
          "meta": {
            "reason": "openActivity | navigate /activities/:activityId",
            "action": "openActivity",
            "navigateTarget": "/activities/:activityId",
            "validations": [
              "Admin 在公開詳情頁的資訊呈現與 Member 一致；管理 CRUD 僅存在於 `/admin/*`；不應在公開詳情出現管理按鈕。"
            ]
          }
        },
        {
          "id": "c.page_activity_list.invokes.page_error.s.page_ActivityListPage_Ready_Guest.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Ready.Guest"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "發生不可恢復錯誤時導向 `/error`；錯誤頁不顯示敏感資訊；仍可回到 `/activities`。"
            ]
          }
        },
        {
          "id": "c.page_activity_list.invokes.page_error.s.page_ActivityListPage_Ready_Member.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Ready.Member"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "已登入狀態遇到 5xx 時同樣導向錯誤頁；回到活動列表後可重試載入。"
            ]
          }
        },
        {
          "id": "c.page_activity_list.invokes.page_error.s.page_ActivityListPage_Ready_Admin.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Ready.Admin"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "Admin 遇到 5xx 導向錯誤頁；不會誤導到 403/404。"
            ]
          }
        },
        {
          "id": "c.page_activity_detail.invokes.page_activity_list.s.page_ActivityDetailPage_Ready_Guest.to.page_ActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Ready.Guest"
          },
          "to": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Init"
          },
          "meta": {
            "reason": "backToList | navigate /activities",
            "action": "backToList",
            "navigateTarget": "/activities",
            "validations": [
              "返回活動列表；路由正確；不丟失登入狀態顯示。"
            ]
          }
        },
        {
          "id": "c.page_activity_detail.invokes.page_activity_list.s.page_ActivityDetailPage_Ready_Member.to.page_ActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Ready.Member"
          },
          "to": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Init"
          },
          "meta": {
            "reason": "backToList | navigate /activities",
            "action": "backToList",
            "navigateTarget": "/activities",
            "validations": [
              "返回活動列表後，該活動的「已報名/可報名/額滿」狀態與詳情一致。"
            ]
          }
        },
        {
          "id": "c.page_activity_detail.invokes.page_activity_list.s.page_ActivityDetailPage_Ready_Admin.to.page_ActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Ready.Admin"
          },
          "to": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Init"
          },
          "meta": {
            "reason": "backToList | navigate /activities",
            "action": "backToList",
            "navigateTarget": "/activities",
            "validations": [
              "返回活動列表後可看到 Admin 導覽（含管理後台）；但公開列表內容仍僅 published/full。"
            ]
          }
        },
        {
          "id": "c.page_login.invokes.page_activity_list.s.page_LoginPage_Init.to.page_ActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Init"
          },
          "to": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Init"
          },
          "meta": {
            "reason": "alreadyLoggedIn | navigate /activities",
            "action": "alreadyLoggedIn",
            "navigateTarget": "/activities",
            "validations": [
              "若已有有效 session，導向 `/activities`；避免重複登入。"
            ]
          }
        },
        {
          "id": "c.page_login.invokes.page_activity_list.s.page_LoginPage_Ready_Guest.to.page_ActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Ready.Guest"
          },
          "to": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Init"
          },
          "meta": {
            "reason": "backToActivities | navigate /activities",
            "action": "backToActivities",
            "navigateTarget": "/activities",
            "validations": [
              "返回公開活動列表；不會殘留登入表單錯誤訊息。"
            ]
          }
        },
        {
          "id": "c.page_register.invokes.page_activity_list.s.page_RegisterPage_Init.to.page_ActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_register",
            "stateId": "page.RegisterPage.Init"
          },
          "to": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Init"
          },
          "meta": {
            "reason": "alreadyLoggedIn | navigate /activities",
            "action": "alreadyLoggedIn",
            "navigateTarget": "/activities",
            "validations": [
              "已登入時導向 `/activities`；避免重複註冊流程。"
            ]
          }
        },
        {
          "id": "c.page_register.invokes.page_activity_list.s.page_RegisterPage_Ready_Guest.to.page_ActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_register",
            "stateId": "page.RegisterPage.Ready.Guest"
          },
          "to": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Init"
          },
          "meta": {
            "reason": "backToActivities | navigate /activities",
            "action": "backToActivities",
            "navigateTarget": "/activities",
            "validations": [
              "返回活動列表；不會殘留註冊表單錯誤訊息。"
            ]
          }
        },
        {
          "id": "c.page_my_activities.invokes.page_activity_list.s.page_MyActivitiesPage_Ready_Member.to.page_ActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_my_activities",
            "stateId": "page.MyActivitiesPage.Ready.Member"
          },
          "to": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Init"
          },
          "meta": {
            "reason": "backToActivities | navigate /activities",
            "action": "backToActivities",
            "navigateTarget": "/activities",
            "validations": [
              "返回活動列表；登入狀態仍維持；導覽列顯示符合角色。"
            ]
          }
        },
        {
          "id": "c.page_my_activities.invokes.page_activity_list.s.page_MyActivitiesPage_Ready_Admin.to.page_ActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_my_activities",
            "stateId": "page.MyActivitiesPage.Ready.Admin"
          },
          "to": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Init"
          },
          "meta": {
            "reason": "backToActivities | navigate /activities",
            "action": "backToActivities",
            "navigateTarget": "/activities",
            "validations": [
              "返回活動列表；Admin 可看到管理後台入口。"
            ]
          }
        },
        {
          "id": "c.page_my_activities.invokes.page_activity_list.s.page_MyActivitiesPage_Empty.to.page_ActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_my_activities",
            "stateId": "page.MyActivitiesPage.Empty"
          },
          "to": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Init"
          },
          "meta": {
            "reason": "goActivities | navigate /activities",
            "action": "goActivities",
            "navigateTarget": "/activities",
            "validations": [
              "Empty 狀態可前往活動列表；路由正確。"
            ]
          }
        },
        {
          "id": "c.page_admin_activity_list.invokes.page_activity_list.s.page_AdminActivityListPage_Ready_Admin.to.page_ActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Ready.Admin"
          },
          "to": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Init"
          },
          "meta": {
            "reason": "goPublicActivities | navigate /activities",
            "action": "goPublicActivities",
            "navigateTarget": "/activities",
            "validations": [
              "可回到公開活動列表；公開列表不會顯示 draft/closed/archived。"
            ]
          }
        },
        {
          "id": "c.page_forbidden.invokes.page_activity_list.s.page_ForbiddenPage_Init.to.page_ActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_forbidden",
            "stateId": "page.ForbiddenPage.Init"
          },
          "to": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Init"
          },
          "meta": {
            "reason": "goActivities | navigate /activities",
            "action": "goActivities",
            "navigateTarget": "/activities",
            "validations": [
              "可回到公開活動列表；路由正確。"
            ]
          }
        },
        {
          "id": "c.page_not_found.invokes.page_activity_list.s.page_NotFoundPage_Init.to.page_ActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_not_found",
            "stateId": "page.NotFoundPage.Init"
          },
          "to": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Init"
          },
          "meta": {
            "reason": "goActivities | navigate /activities",
            "action": "goActivities",
            "navigateTarget": "/activities",
            "validations": [
              "可回到活動列表；路由正確。"
            ]
          }
        },
        {
          "id": "c.page_error.invokes.page_activity_list.s.page_ErrorPage_Init.to.page_ActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "to": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Init"
          },
          "meta": {
            "reason": "goActivities | navigate /activities",
            "action": "goActivities",
            "navigateTarget": "/activities",
            "validations": [
              "可回到活動列表；回到後會重新載入列表資料；不會使用過期快取偽裝成功。"
            ]
          }
        },
        {
          "id": "c.feature_auth_login.invokes.page_activity_list.s.feature_AuthLoginFeature_Succeeded.to.page_ActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_login",
            "stateId": "feature.AuthLoginFeature.Succeeded"
          },
          "to": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Init"
          },
          "meta": {
            "reason": "loginDone | navigate /activities",
            "action": "loginDone",
            "navigateTarget": "/activities",
            "validations": [
              "登入成功導向 `/activities`；列表顯示依登入角色；受保護頁可進入。"
            ]
          }
        },
        {
          "id": "c.page_entry.contains.page_activity_list",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_activity_list",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": "ActivityListPage",
        "featureName": null,
        "entryStateId": "page.ActivityListPage.Init"
      }
    },
    {
      "id": "page_activity_detail",
      "name": "Activity Detail",
      "level": "page",
      "parentDiagramId": "page_entry",
      "roles": [],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "③ Activity Detail Page",
        "order": 3
      },
      "groups": [],
      "states": [
        {
          "id": "page.ActivityDetailPage.Init",
          "label": "Init",
          "type": "start",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_activity_detail",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ActivityDetailPage.Init"
            }
          }
        },
        {
          "id": "page.ActivityDetailPage.Loading",
          "label": "Loading",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_activity_detail",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ActivityDetailPage.Loading"
            }
          }
        },
        {
          "id": "page.ActivityDetailPage.Ready.Guest",
          "label": "Ready.Guest",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_activity_detail",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ActivityDetailPage.Ready.Guest"
            }
          }
        },
        {
          "id": "page.ActivityDetailPage.Ready.Member",
          "label": "Ready.Member",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_activity_detail",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ActivityDetailPage.Ready.Member"
            }
          }
        },
        {
          "id": "page.ActivityDetailPage.Ready.Admin",
          "label": "Ready.Admin",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_activity_detail",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ActivityDetailPage.Ready.Admin"
            }
          }
        },
        {
          "id": "page.ActivityDetailPage.NotFound",
          "label": "NotFound",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_activity_detail",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ActivityDetailPage.NotFound"
            }
          }
        },
        {
          "id": "page.ActivityDetailPage.Error",
          "label": "Error",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_activity_detail",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ActivityDetailPage.Error"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.page_activity_detail.0001",
          "from": "page.ActivityDetailPage.Init",
          "to": "page.ActivityDetailPage.Init",
          "event": "enterPage",
          "roles": [],
          "validations": [
            "進入活動詳情路由會落在 ActivityDetailPage.Init；頁面 CTA 不會同時出現「報名」與「取消報名」；依本人狀態與活動狀態決定。"
          ],
          "intent": {
            "category": "action",
            "summary": "enterPage"
          },
          "meta": {
            "diagramId": "page_activity_detail",
            "source": {
              "raw": "[*] --> ActivityDetailPage.Init : enterPage"
            }
          }
        },
        {
          "id": "t.page_activity_detail.0002",
          "from": "page.ActivityDetailPage.Init",
          "to": "page.ActivityDetailPage.Loading",
          "event": "loadActivity",
          "roles": [],
          "validations": [
            "觸發載入活動詳情與（若已登入）個人報名狀態；UI 顯示 Loading；避免重複請求。"
          ],
          "intent": {
            "category": "action",
            "summary": "loadActivity"
          },
          "meta": {
            "diagramId": "page_activity_detail",
            "source": {
              "raw": "ActivityDetailPage.Init --> ActivityDetailPage.Loading : loadActivity"
            }
          }
        },
        {
          "id": "t.page_activity_detail.0003",
          "from": "page.ActivityDetailPage.Loading",
          "to": "page.ActivityDetailPage.Ready.Guest",
          "event": "loadOk [guest]",
          "roles": [],
          "validations": [
            "API 200；顯示活動完整資訊與有效報名數/容量/截止；Guest 只顯示需登入提示，不提供可成功提交的報名操作。"
          ],
          "intent": {
            "category": "action",
            "summary": "loadOk [guest]"
          },
          "meta": {
            "diagramId": "page_activity_detail",
            "source": {
              "raw": "ActivityDetailPage.Loading --> ActivityDetailPage.Ready.Guest : loadOk [guest]"
            }
          }
        },
        {
          "id": "t.page_activity_detail.0004",
          "from": "page.ActivityDetailPage.Loading",
          "to": "page.ActivityDetailPage.Ready.Member",
          "event": "loadOk [member]",
          "roles": [],
          "validations": [
            "API 200；顯示本人狀態（可報名/已報名/不可操作原因/額滿）；顯示時間與時區一致。"
          ],
          "intent": {
            "category": "action",
            "summary": "loadOk [member]"
          },
          "meta": {
            "diagramId": "page_activity_detail",
            "source": {
              "raw": "ActivityDetailPage.Loading --> ActivityDetailPage.Ready.Member : loadOk [member]"
            }
          }
        },
        {
          "id": "t.page_activity_detail.0005",
          "from": "page.ActivityDetailPage.Loading",
          "to": "page.ActivityDetailPage.Ready.Admin",
          "event": "loadOk [admin]",
          "roles": [],
          "validations": [
            "API 200；Admin 顯示本人狀態與操作（報名/取消）同 Member；不顯示後台管理操作。"
          ],
          "intent": {
            "category": "action",
            "summary": "loadOk [admin]"
          },
          "meta": {
            "diagramId": "page_activity_detail",
            "source": {
              "raw": "ActivityDetailPage.Loading --> ActivityDetailPage.Ready.Admin : loadOk [admin]"
            }
          }
        },
        {
          "id": "t.page_activity_detail.0006",
          "from": "page.ActivityDetailPage.Loading",
          "to": "page.ActivityDetailPage.NotFound",
          "event": "load404",
          "roles": [],
          "validations": [
            "API 404 或活動不公開（draft/closed/archived）時顯示 NotFound；不顯示殘留舊資料；不允許操作報名/取消。"
          ],
          "intent": {
            "category": "action",
            "summary": "load404"
          },
          "meta": {
            "diagramId": "page_activity_detail",
            "source": {
              "raw": "ActivityDetailPage.Loading --> ActivityDetailPage.NotFound : load404"
            }
          }
        },
        {
          "id": "t.page_activity_detail.0007",
          "from": "page.ActivityDetailPage.Loading",
          "to": "page.ActivityDetailPage.Error",
          "event": "loadFail",
          "roles": [],
          "validations": [
            "API 5xx 或網路錯誤時顯示 Error；可重試；錯誤訊息可理解且不含敏感資訊。"
          ],
          "intent": {
            "category": "action",
            "summary": "loadFail"
          },
          "meta": {
            "diagramId": "page_activity_detail",
            "source": {
              "raw": "ActivityDetailPage.Loading --> ActivityDetailPage.Error : loadFail"
            }
          }
        },
        {
          "id": "t.page_activity_detail.0008",
          "from": "page.ActivityDetailPage.Error",
          "to": "page.ActivityDetailPage.Loading",
          "event": "retry",
          "roles": [],
          "validations": [
            "重試會重新載入詳情；成功則進入 Ready.*；若仍失敗保留 Error。"
          ],
          "intent": {
            "category": "action",
            "summary": "retry"
          },
          "meta": {
            "diagramId": "page_activity_detail",
            "source": {
              "raw": "ActivityDetailPage.Error --> ActivityDetailPage.Loading : retry"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_activity_list.invokes.page_activity_detail.s.page_ActivityListPage_Ready_Guest.to.page_ActivityDetailPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Ready.Guest"
          },
          "to": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Init"
          },
          "meta": {
            "reason": "openActivity | navigate /activities/:activityId",
            "action": "openActivity",
            "navigateTarget": "/activities/:activityId",
            "validations": [
              "導向活動詳情；若活動不存在回 404 並導向 `/404`；不得顯示 draft/closed/archived 之公開詳情。"
            ]
          }
        },
        {
          "id": "c.page_activity_list.invokes.page_activity_detail.s.page_ActivityListPage_Ready_Member.to.page_ActivityDetailPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Ready.Member"
          },
          "to": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Init"
          },
          "meta": {
            "reason": "openActivity | navigate /activities/:activityId",
            "action": "openActivity",
            "navigateTarget": "/activities/:activityId",
            "validations": [
              "導向活動詳情成功；UI 顯示本人是否已報名與可用名額；有效報名數與列表一致。"
            ]
          }
        },
        {
          "id": "c.page_activity_list.invokes.page_activity_detail.s.page_ActivityListPage_Ready_Admin.to.page_ActivityDetailPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Ready.Admin"
          },
          "to": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Init"
          },
          "meta": {
            "reason": "openActivity | navigate /activities/:activityId",
            "action": "openActivity",
            "navigateTarget": "/activities/:activityId",
            "validations": [
              "Admin 在公開詳情頁的資訊呈現與 Member 一致；管理 CRUD 僅存在於 `/admin/*`；不應在公開詳情出現管理按鈕。"
            ]
          }
        },
        {
          "id": "c.page_activity_detail.invokes.page_login.s.page_ActivityDetailPage_Ready_Guest.to.page_LoginPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Ready.Guest"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Init"
          },
          "meta": {
            "reason": "clickSignupRequiresLogin | navigate /login",
            "action": "clickSignupRequiresLogin",
            "navigateTarget": "/login",
            "validations": [
              "Guest 點擊報名入口會導向 `/login`；後端若收到報名請求必回 401 且不建立報名。"
            ]
          }
        },
        {
          "id": "c.page_activity_detail.invokes.feature_register_for_activity.s.page_ActivityDetailPage_Ready_Member.to.feature_RegisterForActivityFeature_Idle",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Ready.Member"
          },
          "to": {
            "diagramId": "feature_register_for_activity",
            "stateId": "feature.RegisterForActivityFeature.Idle"
          },
          "meta": {
            "reason": "clickSignup | navigate RegisterForActivityFeature",
            "action": "clickSignup",
            "navigateTarget": "RegisterForActivityFeature",
            "validations": [
              "進入報名 Feature；提交前會做前置檢查（狀態=published、未截止、未開始/未結束、未額滿、未重複）。"
            ]
          }
        },
        {
          "id": "c.page_activity_detail.invokes.feature_register_for_activity.s.page_ActivityDetailPage_Ready_Admin.to.feature_RegisterForActivityFeature_Idle",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Ready.Admin"
          },
          "to": {
            "diagramId": "feature_register_for_activity",
            "stateId": "feature.RegisterForActivityFeature.Idle"
          },
          "meta": {
            "reason": "clickSignup | navigate RegisterForActivityFeature",
            "action": "clickSignup",
            "navigateTarget": "RegisterForActivityFeature",
            "validations": [
              "Admin 可進入報名 Feature；規則同 Member；不得繞過容量/截止/狀態限制。"
            ]
          }
        },
        {
          "id": "c.page_activity_detail.invokes.feature_cancel_registration.s.page_ActivityDetailPage_Ready_Member.to.feature_CancelRegistrationFeature_Idle",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Ready.Member"
          },
          "to": {
            "diagramId": "feature_cancel_registration",
            "stateId": "feature.CancelRegistrationFeature.Idle"
          },
          "meta": {
            "reason": "clickCancelSignup | navigate CancelRegistrationFeature",
            "action": "clickCancelSignup",
            "navigateTarget": "CancelRegistrationFeature",
            "validations": [
              "僅在本人已報名且符合取消規則時 UI 顯示此入口；不符合時必隱藏或 disabled 並顯示原因。"
            ]
          }
        },
        {
          "id": "c.page_activity_detail.invokes.feature_cancel_registration.s.page_ActivityDetailPage_Ready_Admin.to.feature_CancelRegistrationFeature_Idle",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Ready.Admin"
          },
          "to": {
            "diagramId": "feature_cancel_registration",
            "stateId": "feature.CancelRegistrationFeature.Idle"
          },
          "meta": {
            "reason": "clickCancelSignup | navigate CancelRegistrationFeature",
            "action": "clickCancelSignup",
            "navigateTarget": "CancelRegistrationFeature",
            "validations": [
              "Admin 的取消規則同 Member；僅能取消自己報名（非管理員代取消功能，除非 Spec 另定）。"
            ]
          }
        },
        {
          "id": "c.page_activity_detail.invokes.page_activity_list.s.page_ActivityDetailPage_Ready_Guest.to.page_ActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Ready.Guest"
          },
          "to": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Init"
          },
          "meta": {
            "reason": "backToList | navigate /activities",
            "action": "backToList",
            "navigateTarget": "/activities",
            "validations": [
              "返回活動列表；路由正確；不丟失登入狀態顯示。"
            ]
          }
        },
        {
          "id": "c.page_activity_detail.invokes.page_activity_list.s.page_ActivityDetailPage_Ready_Member.to.page_ActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Ready.Member"
          },
          "to": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Init"
          },
          "meta": {
            "reason": "backToList | navigate /activities",
            "action": "backToList",
            "navigateTarget": "/activities",
            "validations": [
              "返回活動列表後，該活動的「已報名/可報名/額滿」狀態與詳情一致。"
            ]
          }
        },
        {
          "id": "c.page_activity_detail.invokes.page_activity_list.s.page_ActivityDetailPage_Ready_Admin.to.page_ActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Ready.Admin"
          },
          "to": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Init"
          },
          "meta": {
            "reason": "backToList | navigate /activities",
            "action": "backToList",
            "navigateTarget": "/activities",
            "validations": [
              "返回活動列表後可看到 Admin 導覽（含管理後台）；但公開列表內容仍僅 published/full。"
            ]
          }
        },
        {
          "id": "c.page_activity_detail.invokes.page_not_found.s.page_ActivityDetailPage_NotFound.to.page_NotFoundPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.NotFound"
          },
          "to": {
            "diagramId": "page_not_found",
            "stateId": "page.NotFoundPage.Init"
          },
          "meta": {
            "reason": "showNotFound | navigate /404",
            "action": "showNotFound",
            "navigateTarget": "/404",
            "validations": [
              "顯示 404 頁；不洩漏活動是否存在於非公開狀態；提供回到活動列表的入口。"
            ]
          }
        },
        {
          "id": "c.page_activity_detail.invokes.page_error.s.page_ActivityDetailPage_Ready_Guest.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Ready.Guest"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "不可恢復錯誤導向錯誤頁；錯誤頁可回到活動列表。"
            ]
          }
        },
        {
          "id": "c.page_activity_detail.invokes.page_error.s.page_ActivityDetailPage_Ready_Member.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Ready.Member"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "5xx 時導向錯誤頁；重回詳情需重新載入，不顯示過期資料。"
            ]
          }
        },
        {
          "id": "c.page_activity_detail.invokes.page_error.s.page_ActivityDetailPage_Ready_Admin.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Ready.Admin"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "Admin 5xx 時導向錯誤頁；不會誤導到 403/404。"
            ]
          }
        },
        {
          "id": "c.page_my_activities.invokes.page_activity_detail.s.page_MyActivitiesPage_Ready_Member.to.page_ActivityDetailPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_my_activities",
            "stateId": "page.MyActivitiesPage.Ready.Member"
          },
          "to": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Init"
          },
          "meta": {
            "reason": "openActivity | navigate /activities/:activityId",
            "action": "openActivity",
            "navigateTarget": "/activities/:activityId",
            "validations": [
              "點擊活動可回到對應公開詳情；詳情頁顯示本人「已報名」狀態；一致性與此頁一致。"
            ]
          }
        },
        {
          "id": "c.page_my_activities.invokes.page_activity_detail.s.page_MyActivitiesPage_Ready_Admin.to.page_ActivityDetailPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_my_activities",
            "stateId": "page.MyActivitiesPage.Ready.Admin"
          },
          "to": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Init"
          },
          "meta": {
            "reason": "openActivity | navigate /activities/:activityId",
            "action": "openActivity",
            "navigateTarget": "/activities/:activityId",
            "validations": [
              "Admin 點擊活動可進入公開詳情；狀態一致；不會跳到後台頁。"
            ]
          }
        },
        {
          "id": "c.feature_register_for_activity.invokes.page_activity_detail.s.feature_RegisterForActivityFeature_Succeeded.to.page_ActivityDetailPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_register_for_activity",
            "stateId": "feature.RegisterForActivityFeature.Succeeded"
          },
          "to": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Init"
          },
          "meta": {
            "reason": "refreshDetail | navigate /activities/:activityId",
            "action": "refreshDetail",
            "navigateTarget": "/activities/:activityId",
            "validations": [
              "成功後回到活動詳情並重新載入；詳情顯示「已報名」；有效報名數 +1；列表/我的活動/後台一致。"
            ]
          }
        },
        {
          "id": "c.feature_register_for_activity.invokes.page_activity_detail.s.feature_RegisterForActivityFeature_Failed.to.page_ActivityDetailPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_register_for_activity",
            "stateId": "feature.RegisterForActivityFeature.Failed"
          },
          "to": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Init"
          },
          "meta": {
            "reason": "showReasonReturn | navigate /activities/:activityId",
            "action": "showReasonReturn",
            "navigateTarget": "/activities/:activityId",
            "validations": [
              "失敗後回到詳情並顯示原因（額滿/已截止/已開始/狀態非 published 等）；不得顯示成成功狀態。"
            ]
          }
        },
        {
          "id": "c.feature_cancel_registration.invokes.page_activity_detail.s.feature_CancelRegistrationFeature_Succeeded.to.page_ActivityDetailPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_cancel_registration",
            "stateId": "feature.CancelRegistrationFeature.Succeeded"
          },
          "to": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Init"
          },
          "meta": {
            "reason": "refreshDetail | navigate /activities/:activityId",
            "action": "refreshDetail",
            "navigateTarget": "/activities/:activityId",
            "validations": [
              "回到詳情並重新載入；詳情不再顯示「已報名」；我的活動移除該活動；後台名單與匯出一致更新。"
            ]
          }
        },
        {
          "id": "c.feature_cancel_registration.invokes.page_activity_detail.s.feature_CancelRegistrationFeature_Failed.to.page_ActivityDetailPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_cancel_registration",
            "stateId": "feature.CancelRegistrationFeature.Failed"
          },
          "to": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Init"
          },
          "meta": {
            "reason": "showReasonReturn | navigate /activities/:activityId",
            "action": "showReasonReturn",
            "navigateTarget": "/activities/:activityId",
            "validations": [
              "回到詳情並顯示原因；不得誤顯示取消成功。"
            ]
          }
        },
        {
          "id": "c.page_entry.contains.page_activity_detail",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_activity_detail",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": "ActivityDetailPage",
        "featureName": null,
        "entryStateId": "page.ActivityDetailPage.Init"
      }
    },
    {
      "id": "page_login",
      "name": "Login",
      "level": "page",
      "parentDiagramId": "page_entry",
      "roles": [],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "④ Login Page",
        "order": 4
      },
      "groups": [],
      "states": [
        {
          "id": "page.LoginPage.Init",
          "label": "Init",
          "type": "start",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_login",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "LoginPage.Init"
            }
          }
        },
        {
          "id": "page.LoginPage.Ready.Guest",
          "label": "Ready.Guest",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_login",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "LoginPage.Ready.Guest"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.page_login.0001",
          "from": "page.LoginPage.Init",
          "to": "page.LoginPage.Init",
          "event": "enterPage",
          "roles": [],
          "validations": [
            "進入 `/login` 會落在 LoginPage.Init；若已登入則不應停留在登入表單。"
          ],
          "intent": {
            "category": "action",
            "summary": "enterPage"
          },
          "meta": {
            "diagramId": "page_login",
            "source": {
              "raw": "[*] --> LoginPage.Init : enterPage"
            }
          }
        },
        {
          "id": "t.page_login.0002",
          "from": "page.LoginPage.Init",
          "to": "page.LoginPage.Ready.Guest",
          "event": "sessionGuest",
          "roles": [],
          "validations": [
            "判定為未登入狀態；顯示登入表單；不顯示登出/我的活動/管理後台。"
          ],
          "intent": {
            "category": "action",
            "summary": "sessionGuest"
          },
          "meta": {
            "diagramId": "page_login",
            "source": {
              "raw": "LoginPage.Init --> LoginPage.Ready.Guest : sessionGuest"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_entry.invokes.page_login.s.page_Entry_RouteLogin.to.page_LoginPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_entry",
            "stateId": "page.Entry.RouteLogin"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Init"
          },
          "meta": {
            "reason": "openLogin | navigate /login",
            "action": "openLogin",
            "navigateTarget": "/login",
            "validations": [
              "路由變更到 `/login` 成功；LoginPage.Init 可達；Header 不顯示「我的活動/管理後台/登出」。"
            ]
          }
        },
        {
          "id": "c.page_activity_list.invokes.page_login.s.page_ActivityListPage_Ready_Guest.to.page_LoginPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Ready.Guest"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Init"
          },
          "meta": {
            "reason": "clickLogin | navigate /login",
            "action": "clickLogin",
            "navigateTarget": "/login",
            "validations": [
              "點擊登入導向 `/login`；LoginPage.Init 可達；redirect 參數若存在需保留（可選）。"
            ]
          }
        },
        {
          "id": "c.page_activity_detail.invokes.page_login.s.page_ActivityDetailPage_Ready_Guest.to.page_LoginPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Ready.Guest"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Init"
          },
          "meta": {
            "reason": "clickSignupRequiresLogin | navigate /login",
            "action": "clickSignupRequiresLogin",
            "navigateTarget": "/login",
            "validations": [
              "Guest 點擊報名入口會導向 `/login`；後端若收到報名請求必回 401 且不建立報名。"
            ]
          }
        },
        {
          "id": "c.page_login.invokes.page_activity_list.s.page_LoginPage_Init.to.page_ActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Init"
          },
          "to": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Init"
          },
          "meta": {
            "reason": "alreadyLoggedIn | navigate /activities",
            "action": "alreadyLoggedIn",
            "navigateTarget": "/activities",
            "validations": [
              "若已有有效 session，導向 `/activities`；避免重複登入。"
            ]
          }
        },
        {
          "id": "c.page_login.invokes.feature_auth_login.s.page_LoginPage_Ready_Guest.to.feature_AuthLoginFeature_Idle",
          "type": "invokes",
          "from": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Ready.Guest"
          },
          "to": {
            "diagramId": "feature_auth_login",
            "stateId": "feature.AuthLoginFeature.Idle"
          },
          "meta": {
            "reason": "submitLogin | navigate AuthLoginFeature",
            "action": "submitLogin",
            "navigateTarget": "AuthLoginFeature",
            "validations": [
              "送出登入會進入登入 Feature；按鈕進入 loading 並避免重複提交；輸入驗證在送出前完成。"
            ]
          }
        },
        {
          "id": "c.page_login.invokes.page_register.s.page_LoginPage_Ready_Guest.to.page_RegisterPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Ready.Guest"
          },
          "to": {
            "diagramId": "page_register",
            "stateId": "page.RegisterPage.Init"
          },
          "meta": {
            "reason": "goRegister | navigate /register",
            "action": "goRegister",
            "navigateTarget": "/register",
            "validations": [
              "可切換到註冊頁；Guest 規則不變。"
            ]
          }
        },
        {
          "id": "c.page_login.invokes.page_activity_list.s.page_LoginPage_Ready_Guest.to.page_ActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Ready.Guest"
          },
          "to": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Init"
          },
          "meta": {
            "reason": "backToActivities | navigate /activities",
            "action": "backToActivities",
            "navigateTarget": "/activities",
            "validations": [
              "返回公開活動列表；不會殘留登入表單錯誤訊息。"
            ]
          }
        },
        {
          "id": "c.page_login.invokes.page_error.s.page_LoginPage_Ready_Guest.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Ready.Guest"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "遇到不可恢復錯誤導向錯誤頁；錯誤頁可回到活動列表。"
            ]
          }
        },
        {
          "id": "c.page_register.invokes.page_login.s.page_RegisterPage_Ready_Guest.to.page_LoginPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_register",
            "stateId": "page.RegisterPage.Ready.Guest"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Init"
          },
          "meta": {
            "reason": "goLogin | navigate /login",
            "action": "goLogin",
            "navigateTarget": "/login",
            "validations": [
              "可切回登入頁；不丟失 Guest 規則。"
            ]
          }
        },
        {
          "id": "c.page_my_activities.invokes.page_login.s.page_MyActivitiesPage_CheckAuth.to.page_LoginPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_my_activities",
            "stateId": "page.MyActivitiesPage.CheckAuth"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Init"
          },
          "meta": {
            "reason": "sessionMissing | navigate /login",
            "action": "sessionMissing",
            "navigateTarget": "/login",
            "validations": [
              "未登入時導向 `/login`；API 若被呼叫必回 401；不顯示我的活動資料。"
            ]
          }
        },
        {
          "id": "c.page_admin_activity_list.invokes.page_login.s.page_AdminActivityListPage_CheckAuth.to.page_LoginPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.CheckAuth"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Init"
          },
          "meta": {
            "reason": "sessionMissing | navigate /login",
            "action": "sessionMissing",
            "navigateTarget": "/login",
            "validations": [
              "未登入導向 `/login`；後端 API 若被呼叫必回 401；不顯示任何後台資料。"
            ]
          }
        },
        {
          "id": "c.page_admin_registrations.invokes.page_login.s.page_AdminRegistrationsPage_CheckAuth.to.page_LoginPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_registrations",
            "stateId": "page.AdminRegistrationsPage.CheckAuth"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Init"
          },
          "meta": {
            "reason": "sessionMissing | navigate /login",
            "action": "sessionMissing",
            "navigateTarget": "/login",
            "validations": [
              "未登入導向 `/login`；API 若被呼叫必回 401；不顯示名單。"
            ]
          }
        },
        {
          "id": "c.page_forbidden.invokes.page_login.s.page_ForbiddenPage_Init.to.page_LoginPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_forbidden",
            "stateId": "page.ForbiddenPage.Init"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Init"
          },
          "meta": {
            "reason": "goLogin | navigate /login",
            "action": "goLogin",
            "navigateTarget": "/login",
            "validations": [
              "可前往登入頁；若已登入但非 Admin，仍不得因此取得後台存取。"
            ]
          }
        },
        {
          "id": "c.feature_auth_login.invokes.page_login.s.feature_AuthLoginFeature_Failed.to.page_LoginPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_login",
            "stateId": "feature.AuthLoginFeature.Failed"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Init"
          },
          "meta": {
            "reason": "showErrorReturn | navigate /login",
            "action": "showErrorReturn",
            "navigateTarget": "/login",
            "validations": [
              "返回登入頁；保留輸入或清空依 UI 設計但需一致；錯誤訊息清楚可見。"
            ]
          }
        },
        {
          "id": "c.feature_auth_register.invokes.page_login.s.feature_AuthRegisterFeature_Succeeded.to.page_LoginPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_register",
            "stateId": "feature.AuthRegisterFeature.Succeeded"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Init"
          },
          "meta": {
            "reason": "registerDoneGoLogin | navigate /login",
            "action": "registerDoneGoLogin",
            "navigateTarget": "/login",
            "validations": [
              "註冊成功導向登入頁；可用同 email 登入；不自動給錯誤角色。"
            ]
          }
        },
        {
          "id": "c.feature_register_for_activity.invokes.page_login.s.feature_RegisterForActivityFeature_Unauthorized.to.page_LoginPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_register_for_activity",
            "stateId": "feature.RegisterForActivityFeature.Unauthorized"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Init"
          },
          "meta": {
            "reason": "goLogin | navigate /login",
            "action": "goLogin",
            "navigateTarget": "/login",
            "validations": [
              "導向登入頁；登入後可回跳到原活動詳情並再次嘗試。"
            ]
          }
        },
        {
          "id": "c.feature_cancel_registration.invokes.page_login.s.feature_CancelRegistrationFeature_Unauthorized.to.page_LoginPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_cancel_registration",
            "stateId": "feature.CancelRegistrationFeature.Unauthorized"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Init"
          },
          "meta": {
            "reason": "goLogin | navigate /login",
            "action": "goLogin",
            "navigateTarget": "/login",
            "validations": [
              "導向登入；登入後回跳仍需重新檢查取消條件。"
            ]
          }
        },
        {
          "id": "c.feature_admin_upsert_activity.invokes.page_login.s.feature_AdminUpsertActivityFeature_Unauthorized.to.page_LoginPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_upsert_activity",
            "stateId": "feature.AdminUpsertActivityFeature.Unauthorized"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Init"
          },
          "meta": {
            "reason": "goLogin | navigate /login",
            "action": "goLogin",
            "navigateTarget": "/login",
            "validations": [
              "導向登入；登入後返回後台需再次通過 RBAC。"
            ]
          }
        },
        {
          "id": "c.feature_admin_publish_activity.invokes.page_login.s.feature_AdminPublishActivityFeature_Unauthorized.to.page_LoginPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_publish_activity",
            "stateId": "feature.AdminPublishActivityFeature.Unauthorized"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Init"
          },
          "meta": {
            "reason": "goLogin | navigate /login",
            "action": "goLogin",
            "navigateTarget": "/login",
            "validations": [
              "導向登入；登入後回後台需通過 RBAC。"
            ]
          }
        },
        {
          "id": "c.feature_admin_close_registration.invokes.page_login.s.feature_AdminCloseRegistrationFeature_Unauthorized.to.page_LoginPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_close_registration",
            "stateId": "feature.AdminCloseRegistrationFeature.Unauthorized"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Init"
          },
          "meta": {
            "reason": "goLogin | navigate /login",
            "action": "goLogin",
            "navigateTarget": "/login",
            "validations": [
              "導向登入；登入後回後台需通過 RBAC。"
            ]
          }
        },
        {
          "id": "c.feature_admin_archive_activity.invokes.page_login.s.feature_AdminArchiveActivityFeature_Unauthorized.to.page_LoginPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_archive_activity",
            "stateId": "feature.AdminArchiveActivityFeature.Unauthorized"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Init"
          },
          "meta": {
            "reason": "goLogin | navigate /login",
            "action": "goLogin",
            "navigateTarget": "/login",
            "validations": [
              "導向登入。"
            ]
          }
        },
        {
          "id": "c.feature_export_registrations_csv.invokes.page_login.s.feature_ExportRegistrationsCsvFeature_Unauthorized.to.page_LoginPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_export_registrations_csv",
            "stateId": "feature.ExportRegistrationsCsvFeature.Unauthorized"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Init"
          },
          "meta": {
            "reason": "goLogin | navigate /login",
            "action": "goLogin",
            "navigateTarget": "/login",
            "validations": [
              "導向登入。"
            ]
          }
        },
        {
          "id": "c.page_entry.contains.page_login",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_login",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": "LoginPage",
        "featureName": null,
        "entryStateId": "page.LoginPage.Init"
      }
    },
    {
      "id": "page_register",
      "name": "Register",
      "level": "page",
      "parentDiagramId": "page_entry",
      "roles": [],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "⑤ Register Page",
        "order": 5
      },
      "groups": [],
      "states": [
        {
          "id": "page.RegisterPage.Init",
          "label": "Init",
          "type": "start",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_register",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "RegisterPage.Init"
            }
          }
        },
        {
          "id": "page.RegisterPage.Ready.Guest",
          "label": "Ready.Guest",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_register",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "RegisterPage.Ready.Guest"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.page_register.0001",
          "from": "page.RegisterPage.Init",
          "to": "page.RegisterPage.Init",
          "event": "enterPage",
          "roles": [],
          "validations": [
            "進入 `/register` 會落在 RegisterPage.Init；若已登入則不應停留在註冊表單。"
          ],
          "intent": {
            "category": "action",
            "summary": "enterPage"
          },
          "meta": {
            "diagramId": "page_register",
            "source": {
              "raw": "[*] --> RegisterPage.Init : enterPage"
            }
          }
        },
        {
          "id": "t.page_register.0002",
          "from": "page.RegisterPage.Init",
          "to": "page.RegisterPage.Ready.Guest",
          "event": "sessionGuest",
          "roles": [],
          "validations": [
            "判定未登入；顯示註冊表單（name/email/password）；表單欄位可見且可輸入。"
          ],
          "intent": {
            "category": "action",
            "summary": "sessionGuest"
          },
          "meta": {
            "diagramId": "page_register",
            "source": {
              "raw": "RegisterPage.Init --> RegisterPage.Ready.Guest : sessionGuest"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_activity_list.invokes.page_register.s.page_ActivityListPage_Ready_Guest.to.page_RegisterPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Ready.Guest"
          },
          "to": {
            "diagramId": "page_register",
            "stateId": "page.RegisterPage.Init"
          },
          "meta": {
            "reason": "clickRegister | navigate /register",
            "action": "clickRegister",
            "navigateTarget": "/register",
            "validations": [
              "點擊註冊導向 `/register`；RegisterPage.Init 可達；Guest 導覽規則仍正確。"
            ]
          }
        },
        {
          "id": "c.page_login.invokes.page_register.s.page_LoginPage_Ready_Guest.to.page_RegisterPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Ready.Guest"
          },
          "to": {
            "diagramId": "page_register",
            "stateId": "page.RegisterPage.Init"
          },
          "meta": {
            "reason": "goRegister | navigate /register",
            "action": "goRegister",
            "navigateTarget": "/register",
            "validations": [
              "可切換到註冊頁；Guest 規則不變。"
            ]
          }
        },
        {
          "id": "c.page_register.invokes.page_activity_list.s.page_RegisterPage_Init.to.page_ActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_register",
            "stateId": "page.RegisterPage.Init"
          },
          "to": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Init"
          },
          "meta": {
            "reason": "alreadyLoggedIn | navigate /activities",
            "action": "alreadyLoggedIn",
            "navigateTarget": "/activities",
            "validations": [
              "已登入時導向 `/activities`；避免重複註冊流程。"
            ]
          }
        },
        {
          "id": "c.page_register.invokes.feature_auth_register.s.page_RegisterPage_Ready_Guest.to.feature_AuthRegisterFeature_Idle",
          "type": "invokes",
          "from": {
            "diagramId": "page_register",
            "stateId": "page.RegisterPage.Ready.Guest"
          },
          "to": {
            "diagramId": "feature_auth_register",
            "stateId": "feature.AuthRegisterFeature.Idle"
          },
          "meta": {
            "reason": "submitRegister | navigate AuthRegisterFeature",
            "action": "submitRegister",
            "navigateTarget": "AuthRegisterFeature",
            "validations": [
              "送出註冊會進入註冊 Feature；按鈕 loading 並避免重複提交；前端會驗證必填欄位。"
            ]
          }
        },
        {
          "id": "c.page_register.invokes.page_login.s.page_RegisterPage_Ready_Guest.to.page_LoginPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_register",
            "stateId": "page.RegisterPage.Ready.Guest"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Init"
          },
          "meta": {
            "reason": "goLogin | navigate /login",
            "action": "goLogin",
            "navigateTarget": "/login",
            "validations": [
              "可切回登入頁；不丟失 Guest 規則。"
            ]
          }
        },
        {
          "id": "c.page_register.invokes.page_activity_list.s.page_RegisterPage_Ready_Guest.to.page_ActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_register",
            "stateId": "page.RegisterPage.Ready.Guest"
          },
          "to": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Init"
          },
          "meta": {
            "reason": "backToActivities | navigate /activities",
            "action": "backToActivities",
            "navigateTarget": "/activities",
            "validations": [
              "返回活動列表；不會殘留註冊表單錯誤訊息。"
            ]
          }
        },
        {
          "id": "c.page_register.invokes.page_error.s.page_RegisterPage_Ready_Guest.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_register",
            "stateId": "page.RegisterPage.Ready.Guest"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "不可恢復錯誤導向錯誤頁；可回到活動列表。"
            ]
          }
        },
        {
          "id": "c.feature_auth_register.invokes.page_register.s.feature_AuthRegisterFeature_Failed.to.page_RegisterPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_register",
            "stateId": "feature.AuthRegisterFeature.Failed"
          },
          "to": {
            "diagramId": "page_register",
            "stateId": "page.RegisterPage.Init"
          },
          "meta": {
            "reason": "showErrorReturn | navigate /register",
            "action": "showErrorReturn",
            "navigateTarget": "/register",
            "validations": [
              "返回註冊頁並顯示錯誤；不清除必要欄位提示；使用者可修正後再次送出。"
            ]
          }
        },
        {
          "id": "c.page_entry.contains.page_register",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_register",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": "RegisterPage",
        "featureName": null,
        "entryStateId": "page.RegisterPage.Init"
      }
    },
    {
      "id": "page_my_activities",
      "name": "My Activities",
      "level": "page",
      "parentDiagramId": "page_entry",
      "roles": [],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "⑥ My Activities Page",
        "order": 6
      },
      "groups": [],
      "states": [
        {
          "id": "page.MyActivitiesPage.Init",
          "label": "Init",
          "type": "start",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_my_activities",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "MyActivitiesPage.Init"
            }
          }
        },
        {
          "id": "page.MyActivitiesPage.CheckAuth",
          "label": "CheckAuth",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_my_activities",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "MyActivitiesPage.CheckAuth"
            }
          }
        },
        {
          "id": "page.MyActivitiesPage.Loading",
          "label": "Loading",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_my_activities",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "MyActivitiesPage.Loading"
            }
          }
        },
        {
          "id": "page.MyActivitiesPage.Ready.Member",
          "label": "Ready.Member",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_my_activities",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "MyActivitiesPage.Ready.Member"
            }
          }
        },
        {
          "id": "page.MyActivitiesPage.Ready.Admin",
          "label": "Ready.Admin",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_my_activities",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "MyActivitiesPage.Ready.Admin"
            }
          }
        },
        {
          "id": "page.MyActivitiesPage.Empty",
          "label": "Empty",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_my_activities",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "MyActivitiesPage.Empty"
            }
          }
        },
        {
          "id": "page.MyActivitiesPage.Error",
          "label": "Error",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_my_activities",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "MyActivitiesPage.Error"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.page_my_activities.0001",
          "from": "page.MyActivitiesPage.Init",
          "to": "page.MyActivitiesPage.Init",
          "event": "enterPage",
          "roles": [],
          "validations": [
            "進入 `/my-activities` 會落在 MyActivitiesPage.Init；此頁為受保護頁面，未登入不得看到內容。"
          ],
          "intent": {
            "category": "action",
            "summary": "enterPage"
          },
          "meta": {
            "diagramId": "page_my_activities",
            "source": {
              "raw": "[*] --> MyActivitiesPage.Init : enterPage"
            }
          }
        },
        {
          "id": "t.page_my_activities.0002",
          "from": "page.MyActivitiesPage.Init",
          "to": "page.MyActivitiesPage.CheckAuth",
          "event": "boot",
          "roles": [],
          "validations": [
            "進入頁面時會檢查 session/token；若缺失或失效需導向登入。"
          ],
          "intent": {
            "category": "action",
            "summary": "boot"
          },
          "meta": {
            "diagramId": "page_my_activities",
            "source": {
              "raw": "MyActivitiesPage.Init --> MyActivitiesPage.CheckAuth : boot"
            }
          }
        },
        {
          "id": "t.page_my_activities.0003",
          "from": "page.MyActivitiesPage.CheckAuth",
          "to": "page.MyActivitiesPage.Loading",
          "event": "sessionOk",
          "roles": [],
          "validations": [
            "session 有效時才載入我的活動 API；UI 顯示 Loading。"
          ],
          "intent": {
            "category": "action",
            "summary": "sessionOk"
          },
          "meta": {
            "diagramId": "page_my_activities",
            "source": {
              "raw": "MyActivitiesPage.CheckAuth --> MyActivitiesPage.Loading : sessionOk"
            }
          }
        },
        {
          "id": "t.page_my_activities.0004",
          "from": "page.MyActivitiesPage.Loading",
          "to": "page.MyActivitiesPage.Ready.Member",
          "event": "loadOk [member]",
          "roles": [],
          "validations": [
            "API 回 200；列表僅包含本人有效報名活動；依 date 排序；每筆有「即將開始/已結束」標籤。"
          ],
          "intent": {
            "category": "action",
            "summary": "loadOk [member]"
          },
          "meta": {
            "diagramId": "page_my_activities",
            "source": {
              "raw": "MyActivitiesPage.Loading --> MyActivitiesPage.Ready.Member : loadOk [member]"
            }
          }
        },
        {
          "id": "t.page_my_activities.0005",
          "from": "page.MyActivitiesPage.Loading",
          "to": "page.MyActivitiesPage.Ready.Admin",
          "event": "loadOk [admin]",
          "roles": [],
          "validations": [
            "Admin 也可載入自己的報名活動；資料隔離依 user_id；排序與標籤規則一致。"
          ],
          "intent": {
            "category": "action",
            "summary": "loadOk [admin]"
          },
          "meta": {
            "diagramId": "page_my_activities",
            "source": {
              "raw": "MyActivitiesPage.Loading --> MyActivitiesPage.Ready.Admin : loadOk [admin]"
            }
          }
        },
        {
          "id": "t.page_my_activities.0006",
          "from": "page.MyActivitiesPage.Loading",
          "to": "page.MyActivitiesPage.Empty",
          "event": "loadOkEmpty",
          "roles": [],
          "validations": [
            "API 回 200 且無任何已報名活動；顯示 Empty 狀態；提供前往活動列表的入口。"
          ],
          "intent": {
            "category": "action",
            "summary": "loadOkEmpty"
          },
          "meta": {
            "diagramId": "page_my_activities",
            "source": {
              "raw": "MyActivitiesPage.Loading --> MyActivitiesPage.Empty : loadOkEmpty"
            }
          }
        },
        {
          "id": "t.page_my_activities.0007",
          "from": "page.MyActivitiesPage.Loading",
          "to": "page.MyActivitiesPage.Error",
          "event": "loadFail",
          "roles": [],
          "validations": [
            "API 5xx 或網路錯誤顯示 Error；可重試；不顯示空白列表偽裝成功。"
          ],
          "intent": {
            "category": "action",
            "summary": "loadFail"
          },
          "meta": {
            "diagramId": "page_my_activities",
            "source": {
              "raw": "MyActivitiesPage.Loading --> MyActivitiesPage.Error : loadFail"
            }
          }
        },
        {
          "id": "t.page_my_activities.0008",
          "from": "page.MyActivitiesPage.Error",
          "to": "page.MyActivitiesPage.Loading",
          "event": "retry",
          "roles": [],
          "validations": [
            "Error 狀態重試會重新載入 API；成功後進入 Ready.* 或 Empty；失敗仍 Error。"
          ],
          "intent": {
            "category": "action",
            "summary": "retry"
          },
          "meta": {
            "diagramId": "page_my_activities",
            "source": {
              "raw": "MyActivitiesPage.Error --> MyActivitiesPage.Loading : retry"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_activity_list.invokes.page_my_activities.s.page_ActivityListPage_Ready_Member.to.page_MyActivitiesPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Ready.Member"
          },
          "to": {
            "diagramId": "page_my_activities",
            "stateId": "page.MyActivitiesPage.Init"
          },
          "meta": {
            "reason": "goMyActivities | navigate /my-activities",
            "action": "goMyActivities",
            "navigateTarget": "/my-activities",
            "validations": [
              "導向 `/my-activities`；若 token/session 有效可載入；若失效則 API 401 並導向 `/login`。"
            ]
          }
        },
        {
          "id": "c.page_activity_list.invokes.page_my_activities.s.page_ActivityListPage_Ready_Admin.to.page_MyActivitiesPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Ready.Admin"
          },
          "to": {
            "diagramId": "page_my_activities",
            "stateId": "page.MyActivitiesPage.Init"
          },
          "meta": {
            "reason": "goMyActivities | navigate /my-activities",
            "action": "goMyActivities",
            "navigateTarget": "/my-activities",
            "validations": [
              "Admin 也可進入我的活動；只顯示該 Admin 自己的有效報名活動；不會看到他人資料。"
            ]
          }
        },
        {
          "id": "c.page_my_activities.invokes.page_login.s.page_MyActivitiesPage_CheckAuth.to.page_LoginPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_my_activities",
            "stateId": "page.MyActivitiesPage.CheckAuth"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Init"
          },
          "meta": {
            "reason": "sessionMissing | navigate /login",
            "action": "sessionMissing",
            "navigateTarget": "/login",
            "validations": [
              "未登入時導向 `/login`；API 若被呼叫必回 401；不顯示我的活動資料。"
            ]
          }
        },
        {
          "id": "c.page_my_activities.invokes.page_activity_detail.s.page_MyActivitiesPage_Ready_Member.to.page_ActivityDetailPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_my_activities",
            "stateId": "page.MyActivitiesPage.Ready.Member"
          },
          "to": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Init"
          },
          "meta": {
            "reason": "openActivity | navigate /activities/:activityId",
            "action": "openActivity",
            "navigateTarget": "/activities/:activityId",
            "validations": [
              "點擊活動可回到對應公開詳情；詳情頁顯示本人「已報名」狀態；一致性與此頁一致。"
            ]
          }
        },
        {
          "id": "c.page_my_activities.invokes.page_activity_detail.s.page_MyActivitiesPage_Ready_Admin.to.page_ActivityDetailPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_my_activities",
            "stateId": "page.MyActivitiesPage.Ready.Admin"
          },
          "to": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Init"
          },
          "meta": {
            "reason": "openActivity | navigate /activities/:activityId",
            "action": "openActivity",
            "navigateTarget": "/activities/:activityId",
            "validations": [
              "Admin 點擊活動可進入公開詳情；狀態一致；不會跳到後台頁。"
            ]
          }
        },
        {
          "id": "c.page_my_activities.invokes.page_activity_list.s.page_MyActivitiesPage_Ready_Member.to.page_ActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_my_activities",
            "stateId": "page.MyActivitiesPage.Ready.Member"
          },
          "to": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Init"
          },
          "meta": {
            "reason": "backToActivities | navigate /activities",
            "action": "backToActivities",
            "navigateTarget": "/activities",
            "validations": [
              "返回活動列表；登入狀態仍維持；導覽列顯示符合角色。"
            ]
          }
        },
        {
          "id": "c.page_my_activities.invokes.page_activity_list.s.page_MyActivitiesPage_Ready_Admin.to.page_ActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_my_activities",
            "stateId": "page.MyActivitiesPage.Ready.Admin"
          },
          "to": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Init"
          },
          "meta": {
            "reason": "backToActivities | navigate /activities",
            "action": "backToActivities",
            "navigateTarget": "/activities",
            "validations": [
              "返回活動列表；Admin 可看到管理後台入口。"
            ]
          }
        },
        {
          "id": "c.page_my_activities.invokes.page_activity_list.s.page_MyActivitiesPage_Empty.to.page_ActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_my_activities",
            "stateId": "page.MyActivitiesPage.Empty"
          },
          "to": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Init"
          },
          "meta": {
            "reason": "goActivities | navigate /activities",
            "action": "goActivities",
            "navigateTarget": "/activities",
            "validations": [
              "Empty 狀態可前往活動列表；路由正確。"
            ]
          }
        },
        {
          "id": "c.page_my_activities.invokes.page_error.s.page_MyActivitiesPage_Ready_Member.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_my_activities",
            "stateId": "page.MyActivitiesPage.Ready.Member"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "不可恢復錯誤導向錯誤頁；錯誤頁可回到活動列表。"
            ]
          }
        },
        {
          "id": "c.page_my_activities.invokes.page_error.s.page_MyActivitiesPage_Ready_Admin.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_my_activities",
            "stateId": "page.MyActivitiesPage.Ready.Admin"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "Admin 不可恢復錯誤導向錯誤頁；回到活動列表後可重試。"
            ]
          }
        },
        {
          "id": "c.page_entry.contains.page_my_activities",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_my_activities",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": "MyActivitiesPage",
        "featureName": null,
        "entryStateId": "page.MyActivitiesPage.Init"
      }
    },
    {
      "id": "page_admin_activity_list",
      "name": "Admin Activity List",
      "level": "page",
      "parentDiagramId": "page_entry",
      "roles": [],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "⑦ Admin Activity List Page",
        "order": 7
      },
      "groups": [],
      "states": [
        {
          "id": "page.AdminActivityListPage.Init",
          "label": "Init",
          "type": "start",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_admin_activity_list",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminActivityListPage.Init"
            }
          }
        },
        {
          "id": "page.AdminActivityListPage.CheckAuth",
          "label": "CheckAuth",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_admin_activity_list",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminActivityListPage.CheckAuth"
            }
          }
        },
        {
          "id": "page.AdminActivityListPage.Loading",
          "label": "Loading",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_admin_activity_list",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminActivityListPage.Loading"
            }
          }
        },
        {
          "id": "page.AdminActivityListPage.Ready.Admin",
          "label": "Ready.Admin",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_admin_activity_list",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminActivityListPage.Ready.Admin"
            }
          }
        },
        {
          "id": "page.AdminActivityListPage.Empty",
          "label": "Empty",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_admin_activity_list",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminActivityListPage.Empty"
            }
          }
        },
        {
          "id": "page.AdminActivityListPage.Error",
          "label": "Error",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_admin_activity_list",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminActivityListPage.Error"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.page_admin_activity_list.0001",
          "from": "page.AdminActivityListPage.Init",
          "to": "page.AdminActivityListPage.Init",
          "event": "enterPage",
          "roles": [],
          "validations": [
            "進入 `/admin/activities` 會落在 AdminActivityListPage.Init；此頁受 RBAC 保護，非 Admin 不得進入。"
          ],
          "intent": {
            "category": "action",
            "summary": "enterPage"
          },
          "meta": {
            "diagramId": "page_admin_activity_list",
            "source": {
              "raw": "[*] --> AdminActivityListPage.Init : enterPage"
            }
          }
        },
        {
          "id": "t.page_admin_activity_list.0002",
          "from": "page.AdminActivityListPage.Init",
          "to": "page.AdminActivityListPage.CheckAuth",
          "event": "boot",
          "roles": [],
          "validations": [
            "進入頁面會檢查 session/token 與角色；不可只靠前端隱藏導覽。"
          ],
          "intent": {
            "category": "action",
            "summary": "boot"
          },
          "meta": {
            "diagramId": "page_admin_activity_list",
            "source": {
              "raw": "AdminActivityListPage.Init --> AdminActivityListPage.CheckAuth : boot"
            }
          }
        },
        {
          "id": "t.page_admin_activity_list.0003",
          "from": "page.AdminActivityListPage.CheckAuth",
          "to": "page.AdminActivityListPage.Loading",
          "event": "sessionOkAdmin",
          "roles": [],
          "validations": [
            "Admin 身分通過後才載入後台活動列表；UI 顯示 Loading。"
          ],
          "intent": {
            "category": "action",
            "summary": "sessionOkAdmin"
          },
          "meta": {
            "diagramId": "page_admin_activity_list",
            "source": {
              "raw": "AdminActivityListPage.CheckAuth --> AdminActivityListPage.Loading : sessionOkAdmin"
            }
          }
        },
        {
          "id": "t.page_admin_activity_list.0004",
          "from": "page.AdminActivityListPage.Loading",
          "to": "page.AdminActivityListPage.Ready.Admin",
          "event": "loadOk [admin]",
          "roles": [],
          "validations": [
            "API 回 200；後台可看到全部狀態活動（draft/published/full/closed/archived）；每筆顯示有效報名數與狀態。"
          ],
          "intent": {
            "category": "action",
            "summary": "loadOk [admin]"
          },
          "meta": {
            "diagramId": "page_admin_activity_list",
            "source": {
              "raw": "AdminActivityListPage.Loading --> AdminActivityListPage.Ready.Admin : loadOk [admin]"
            }
          }
        },
        {
          "id": "t.page_admin_activity_list.0005",
          "from": "page.AdminActivityListPage.Loading",
          "to": "page.AdminActivityListPage.Empty",
          "event": "loadOkEmpty",
          "roles": [],
          "validations": [
            "API 回 200 但無活動；顯示 Empty；提供建立活動入口。"
          ],
          "intent": {
            "category": "action",
            "summary": "loadOkEmpty"
          },
          "meta": {
            "diagramId": "page_admin_activity_list",
            "source": {
              "raw": "AdminActivityListPage.Loading --> AdminActivityListPage.Empty : loadOkEmpty"
            }
          }
        },
        {
          "id": "t.page_admin_activity_list.0006",
          "from": "page.AdminActivityListPage.Loading",
          "to": "page.AdminActivityListPage.Error",
          "event": "loadFail",
          "roles": [],
          "validations": [
            "API 5xx 或網路錯誤顯示 Error；可重試；不顯示空白偽裝成功。"
          ],
          "intent": {
            "category": "action",
            "summary": "loadFail"
          },
          "meta": {
            "diagramId": "page_admin_activity_list",
            "source": {
              "raw": "AdminActivityListPage.Loading --> AdminActivityListPage.Error : loadFail"
            }
          }
        },
        {
          "id": "t.page_admin_activity_list.0007",
          "from": "page.AdminActivityListPage.Error",
          "to": "page.AdminActivityListPage.Loading",
          "event": "retry",
          "roles": [],
          "validations": [
            "Error 重試會重新載入後台列表；成功進入 Ready.Admin 或 Empty；失敗仍 Error。"
          ],
          "intent": {
            "category": "action",
            "summary": "retry"
          },
          "meta": {
            "diagramId": "page_admin_activity_list",
            "source": {
              "raw": "AdminActivityListPage.Error --> AdminActivityListPage.Loading : retry"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_activity_list.invokes.page_admin_activity_list.s.page_ActivityListPage_Ready_Admin.to.page_AdminActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Ready.Admin"
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Init"
          },
          "meta": {
            "reason": "goAdminPanel | navigate /admin/activities",
            "action": "goAdminPanel",
            "navigateTarget": "/admin/activities",
            "validations": [
              "導向 `/admin/activities`；僅 Admin 可進入；Member 進入會 403；Guest 進入會導向登入或 API 401。"
            ]
          }
        },
        {
          "id": "c.page_admin_activity_list.invokes.page_login.s.page_AdminActivityListPage_CheckAuth.to.page_LoginPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.CheckAuth"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Init"
          },
          "meta": {
            "reason": "sessionMissing | navigate /login",
            "action": "sessionMissing",
            "navigateTarget": "/login",
            "validations": [
              "未登入導向 `/login`；後端 API 若被呼叫必回 401；不顯示任何後台資料。"
            ]
          }
        },
        {
          "id": "c.page_admin_activity_list.invokes.page_forbidden.s.page_AdminActivityListPage_CheckAuth.to.page_ForbiddenPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.CheckAuth"
          },
          "to": {
            "diagramId": "page_forbidden",
            "stateId": "page.ForbiddenPage.Init"
          },
          "meta": {
            "reason": "roleNotAdmin | navigate /403",
            "action": "roleNotAdmin",
            "navigateTarget": "/403",
            "validations": [
              "Member 進入後台導向 `/403` 或 API 403；不得載入後台資料；UI 顯示權限不足。"
            ]
          }
        },
        {
          "id": "c.page_admin_activity_list.invokes.feature_admin_upsert_activity.s.page_AdminActivityListPage_Ready_Admin.to.feature_AdminUpsertActivityFeature_Idle",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Ready.Admin"
          },
          "to": {
            "diagramId": "feature_admin_upsert_activity",
            "stateId": "feature.AdminUpsertActivityFeature.Idle"
          },
          "meta": {
            "reason": "clickCreateActivity | navigate AdminUpsertActivityFeature",
            "action": "clickCreateActivity",
            "navigateTarget": "AdminUpsertActivityFeature",
            "validations": [
              "點擊建立活動會進入建立/編輯 Feature；預設狀態為 draft；表單包含 title/description/date/location/deadline/capacity。"
            ]
          }
        },
        {
          "id": "c.page_admin_activity_list.invokes.feature_admin_publish_activity.s.page_AdminActivityListPage_Ready_Admin.to.feature_AdminPublishActivityFeature_Idle",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Ready.Admin"
          },
          "to": {
            "diagramId": "feature_admin_publish_activity",
            "stateId": "feature.AdminPublishActivityFeature.Idle"
          },
          "meta": {
            "reason": "clickPublish | navigate AdminPublishActivityFeature",
            "action": "clickPublish",
            "navigateTarget": "AdminPublishActivityFeature",
            "validations": [
              "僅 draft 可發佈；不符合時 UI 需阻擋或後端回 400；成功後狀態變為 published。"
            ]
          }
        },
        {
          "id": "c.page_admin_activity_list.invokes.feature_admin_close_registration.s.page_AdminActivityListPage_Ready_Admin.to.feature_AdminCloseRegistrationFeature_Idle",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Ready.Admin"
          },
          "to": {
            "diagramId": "feature_admin_close_registration",
            "stateId": "feature.AdminCloseRegistrationFeature.Idle"
          },
          "meta": {
            "reason": "clickCloseRegistration | navigate AdminCloseRegistrationFeature",
            "action": "clickCloseRegistration",
            "navigateTarget": "AdminCloseRegistrationFeature",
            "validations": [
              "僅 published/full 可關閉報名；成功後狀態變為 closed；公開詳情不可再報名。"
            ]
          }
        },
        {
          "id": "c.page_admin_activity_list.invokes.feature_admin_archive_activity.s.page_AdminActivityListPage_Ready_Admin.to.feature_AdminArchiveActivityFeature_Idle",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Ready.Admin"
          },
          "to": {
            "diagramId": "feature_admin_archive_activity",
            "stateId": "feature.AdminArchiveActivityFeature.Idle"
          },
          "meta": {
            "reason": "clickArchive | navigate AdminArchiveActivityFeature",
            "action": "clickArchive",
            "navigateTarget": "AdminArchiveActivityFeature",
            "validations": [
              "僅 draft/closed 可下架；成功後狀態變為 archived；公開列表/詳情不可再見。"
            ]
          }
        },
        {
          "id": "c.page_admin_activity_list.invokes.page_admin_registrations.s.page_AdminActivityListPage_Ready_Admin.to.page_AdminRegistrationsPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Ready.Admin"
          },
          "to": {
            "diagramId": "page_admin_registrations",
            "stateId": "page.AdminRegistrationsPage.Init"
          },
          "meta": {
            "reason": "openRegistrations | navigate /admin/activities/:activityId/registrations",
            "action": "openRegistrations",
            "navigateTarget": "/admin/activities/:activityId/registrations",
            "validations": [
              "進入名單頁；僅 Admin 可進入；名單只包含有效報名（canceled_at 為 null）。"
            ]
          }
        },
        {
          "id": "c.page_admin_activity_list.invokes.page_activity_list.s.page_AdminActivityListPage_Ready_Admin.to.page_ActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Ready.Admin"
          },
          "to": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Init"
          },
          "meta": {
            "reason": "goPublicActivities | navigate /activities",
            "action": "goPublicActivities",
            "navigateTarget": "/activities",
            "validations": [
              "可回到公開活動列表；公開列表不會顯示 draft/closed/archived。"
            ]
          }
        },
        {
          "id": "c.page_admin_activity_list.invokes.feature_admin_upsert_activity.s.page_AdminActivityListPage_Empty.to.feature_AdminUpsertActivityFeature_Idle",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Empty"
          },
          "to": {
            "diagramId": "feature_admin_upsert_activity",
            "stateId": "feature.AdminUpsertActivityFeature.Idle"
          },
          "meta": {
            "reason": "clickCreateFromEmpty | navigate AdminUpsertActivityFeature",
            "action": "clickCreateFromEmpty",
            "navigateTarget": "AdminUpsertActivityFeature",
            "validations": [
              "Empty 狀態建立活動入口可用；進入 Feature 後可提交建立。"
            ]
          }
        },
        {
          "id": "c.page_admin_activity_list.invokes.page_error.s.page_AdminActivityListPage_Ready_Admin.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Ready.Admin"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "不可恢復錯誤導向錯誤頁；不洩漏後台敏感資訊。"
            ]
          }
        },
        {
          "id": "c.page_admin_registrations.invokes.page_admin_activity_list.s.page_AdminRegistrationsPage_Ready_Admin.to.page_AdminActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_registrations",
            "stateId": "page.AdminRegistrationsPage.Ready.Admin"
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Init"
          },
          "meta": {
            "reason": "backToAdminActivities | navigate /admin/activities",
            "action": "backToAdminActivities",
            "navigateTarget": "/admin/activities",
            "validations": [
              "返回後台活動列表；該活動狀態與有效報名數顯示更新。"
            ]
          }
        },
        {
          "id": "c.page_admin_registrations.invokes.page_admin_activity_list.s.page_AdminRegistrationsPage_Empty.to.page_AdminActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_registrations",
            "stateId": "page.AdminRegistrationsPage.Empty"
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Init"
          },
          "meta": {
            "reason": "backToAdminActivities | navigate /admin/activities",
            "action": "backToAdminActivities",
            "navigateTarget": "/admin/activities",
            "validations": [
              "Empty 狀態可返回後台列表；路由正確。"
            ]
          }
        },
        {
          "id": "c.feature_admin_upsert_activity.invokes.page_admin_activity_list.s.feature_AdminUpsertActivityFeature_Succeeded.to.page_AdminActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_upsert_activity",
            "stateId": "feature.AdminUpsertActivityFeature.Succeeded"
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Init"
          },
          "meta": {
            "reason": "refreshAdminList | navigate /admin/activities",
            "action": "refreshAdminList",
            "navigateTarget": "/admin/activities",
            "validations": [
              "返回後台列表並重新載入；可看到新/更新活動；列表狀態與資料一致。"
            ]
          }
        },
        {
          "id": "c.feature_admin_upsert_activity.invokes.page_admin_activity_list.s.feature_AdminUpsertActivityFeature_Failed.to.page_AdminActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_upsert_activity",
            "stateId": "feature.AdminUpsertActivityFeature.Failed"
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Init"
          },
          "meta": {
            "reason": "showErrorReturn | navigate /admin/activities",
            "action": "showErrorReturn",
            "navigateTarget": "/admin/activities",
            "validations": [
              "返回後台列表（或停留表單）需顯示錯誤；不得誤顯示成功；資料不變。"
            ]
          }
        },
        {
          "id": "c.feature_admin_publish_activity.invokes.page_admin_activity_list.s.feature_AdminPublishActivityFeature_Succeeded.to.page_AdminActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_publish_activity",
            "stateId": "feature.AdminPublishActivityFeature.Succeeded"
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Init"
          },
          "meta": {
            "reason": "refreshAdminList | navigate /admin/activities",
            "action": "refreshAdminList",
            "navigateTarget": "/admin/activities",
            "validations": [
              "返回後台列表並刷新；該活動顯示 published；有效報名數顯示一致。"
            ]
          }
        },
        {
          "id": "c.feature_admin_publish_activity.invokes.page_admin_activity_list.s.feature_AdminPublishActivityFeature_Failed.to.page_AdminActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_publish_activity",
            "stateId": "feature.AdminPublishActivityFeature.Failed"
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Init"
          },
          "meta": {
            "reason": "showReasonReturn | navigate /admin/activities",
            "action": "showReasonReturn",
            "navigateTarget": "/admin/activities",
            "validations": [
              "返回後台列表（或留在原處）需顯示原因；不得誤顯示發佈成功。"
            ]
          }
        },
        {
          "id": "c.feature_admin_close_registration.invokes.page_admin_activity_list.s.feature_AdminCloseRegistrationFeature_Succeeded.to.page_AdminActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_close_registration",
            "stateId": "feature.AdminCloseRegistrationFeature.Succeeded"
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Init"
          },
          "meta": {
            "reason": "refreshAdminList | navigate /admin/activities",
            "action": "refreshAdminList",
            "navigateTarget": "/admin/activities",
            "validations": [
              "返回後台列表並刷新；該活動顯示 closed；公開列表/詳情不可見或不可報名。"
            ]
          }
        },
        {
          "id": "c.feature_admin_close_registration.invokes.page_admin_activity_list.s.feature_AdminCloseRegistrationFeature_Failed.to.page_AdminActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_close_registration",
            "stateId": "feature.AdminCloseRegistrationFeature.Failed"
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Init"
          },
          "meta": {
            "reason": "showReasonReturn | navigate /admin/activities",
            "action": "showReasonReturn",
            "navigateTarget": "/admin/activities",
            "validations": [
              "顯示失敗原因；不得誤顯示成功。"
            ]
          }
        },
        {
          "id": "c.feature_admin_archive_activity.invokes.page_admin_activity_list.s.feature_AdminArchiveActivityFeature_Succeeded.to.page_AdminActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_archive_activity",
            "stateId": "feature.AdminArchiveActivityFeature.Succeeded"
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Init"
          },
          "meta": {
            "reason": "refreshAdminList | navigate /admin/activities",
            "action": "refreshAdminList",
            "navigateTarget": "/admin/activities",
            "validations": [
              "返回後台列表並刷新；該活動顯示 archived；公開列表不顯示。"
            ]
          }
        },
        {
          "id": "c.feature_admin_archive_activity.invokes.page_admin_activity_list.s.feature_AdminArchiveActivityFeature_Failed.to.page_AdminActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_archive_activity",
            "stateId": "feature.AdminArchiveActivityFeature.Failed"
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Init"
          },
          "meta": {
            "reason": "showReasonReturn | navigate /admin/activities",
            "action": "showReasonReturn",
            "navigateTarget": "/admin/activities",
            "validations": [
              "顯示失敗原因；不得誤顯示成功。"
            ]
          }
        },
        {
          "id": "c.page_entry.contains.page_admin_activity_list",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": "AdminActivityListPage",
        "featureName": null,
        "entryStateId": "page.AdminActivityListPage.Init"
      }
    },
    {
      "id": "page_admin_registrations",
      "name": "Admin Registrations",
      "level": "page",
      "parentDiagramId": "page_entry",
      "roles": [],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "⑧ Admin Registrations Page",
        "order": 8
      },
      "groups": [],
      "states": [
        {
          "id": "page.AdminRegistrationsPage.Init",
          "label": "Init",
          "type": "start",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_admin_registrations",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminRegistrationsPage.Init"
            }
          }
        },
        {
          "id": "page.AdminRegistrationsPage.CheckAuth",
          "label": "CheckAuth",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_admin_registrations",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminRegistrationsPage.CheckAuth"
            }
          }
        },
        {
          "id": "page.AdminRegistrationsPage.Loading",
          "label": "Loading",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_admin_registrations",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminRegistrationsPage.Loading"
            }
          }
        },
        {
          "id": "page.AdminRegistrationsPage.Ready.Admin",
          "label": "Ready.Admin",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_admin_registrations",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminRegistrationsPage.Ready.Admin"
            }
          }
        },
        {
          "id": "page.AdminRegistrationsPage.Empty",
          "label": "Empty",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_admin_registrations",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminRegistrationsPage.Empty"
            }
          }
        },
        {
          "id": "page.AdminRegistrationsPage.NotFound",
          "label": "NotFound",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_admin_registrations",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminRegistrationsPage.NotFound"
            }
          }
        },
        {
          "id": "page.AdminRegistrationsPage.Error",
          "label": "Error",
          "type": "normal",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_admin_registrations",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminRegistrationsPage.Error"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.page_admin_registrations.0001",
          "from": "page.AdminRegistrationsPage.Init",
          "to": "page.AdminRegistrationsPage.Init",
          "event": "enterPage",
          "roles": [],
          "validations": [
            "進入名單頁會落在 AdminRegistrationsPage.Init；此頁受 RBAC 保護。"
          ],
          "intent": {
            "category": "action",
            "summary": "enterPage"
          },
          "meta": {
            "diagramId": "page_admin_registrations",
            "source": {
              "raw": "[*] --> AdminRegistrationsPage.Init : enterPage"
            }
          }
        },
        {
          "id": "t.page_admin_registrations.0002",
          "from": "page.AdminRegistrationsPage.Init",
          "to": "page.AdminRegistrationsPage.CheckAuth",
          "event": "boot",
          "roles": [],
          "validations": [
            "進入頁面會檢查 session 與角色；不可只靠前端隱藏。"
          ],
          "intent": {
            "category": "action",
            "summary": "boot"
          },
          "meta": {
            "diagramId": "page_admin_registrations",
            "source": {
              "raw": "AdminRegistrationsPage.Init --> AdminRegistrationsPage.CheckAuth : boot"
            }
          }
        },
        {
          "id": "t.page_admin_registrations.0003",
          "from": "page.AdminRegistrationsPage.CheckAuth",
          "to": "page.AdminRegistrationsPage.Loading",
          "event": "sessionOkAdmin",
          "roles": [],
          "validations": [
            "Admin 身分通過後才載入名單 API；UI 顯示 Loading。"
          ],
          "intent": {
            "category": "action",
            "summary": "sessionOkAdmin"
          },
          "meta": {
            "diagramId": "page_admin_registrations",
            "source": {
              "raw": "AdminRegistrationsPage.CheckAuth --> AdminRegistrationsPage.Loading : sessionOkAdmin"
            }
          }
        },
        {
          "id": "t.page_admin_registrations.0004",
          "from": "page.AdminRegistrationsPage.Loading",
          "to": "page.AdminRegistrationsPage.Ready.Admin",
          "event": "loadOk [admin]",
          "roles": [],
          "validations": [
            "API 回 200；名單欄位包含 姓名/Email/報名時間；只包含有效報名；筆數與後台活動有效報名數一致。"
          ],
          "intent": {
            "category": "action",
            "summary": "loadOk [admin]"
          },
          "meta": {
            "diagramId": "page_admin_registrations",
            "source": {
              "raw": "AdminRegistrationsPage.Loading --> AdminRegistrationsPage.Ready.Admin : loadOk [admin]"
            }
          }
        },
        {
          "id": "t.page_admin_registrations.0005",
          "from": "page.AdminRegistrationsPage.Loading",
          "to": "page.AdminRegistrationsPage.Empty",
          "event": "loadOkEmpty",
          "roles": [],
          "validations": [
            "API 回 200 但名單為空；顯示 Empty；仍可返回後台活動列表。"
          ],
          "intent": {
            "category": "action",
            "summary": "loadOkEmpty"
          },
          "meta": {
            "diagramId": "page_admin_registrations",
            "source": {
              "raw": "AdminRegistrationsPage.Loading --> AdminRegistrationsPage.Empty : loadOkEmpty"
            }
          }
        },
        {
          "id": "t.page_admin_registrations.0006",
          "from": "page.AdminRegistrationsPage.Loading",
          "to": "page.AdminRegistrationsPage.NotFound",
          "event": "activityNotFound",
          "roles": [],
          "validations": [
            "若活動不存在回 404；前端顯示 NotFound。"
          ],
          "intent": {
            "category": "action",
            "summary": "activityNotFound"
          },
          "meta": {
            "diagramId": "page_admin_registrations",
            "source": {
              "raw": "AdminRegistrationsPage.Loading --> AdminRegistrationsPage.NotFound : activityNotFound"
            }
          }
        },
        {
          "id": "t.page_admin_registrations.0007",
          "from": "page.AdminRegistrationsPage.Loading",
          "to": "page.AdminRegistrationsPage.Error",
          "event": "loadFail",
          "roles": [],
          "validations": [
            "5xx 或網路錯誤顯示 Error；可重試；不顯示空白偽裝成功。"
          ],
          "intent": {
            "category": "action",
            "summary": "loadFail"
          },
          "meta": {
            "diagramId": "page_admin_registrations",
            "source": {
              "raw": "AdminRegistrationsPage.Loading --> AdminRegistrationsPage.Error : loadFail"
            }
          }
        },
        {
          "id": "t.page_admin_registrations.0008",
          "from": "page.AdminRegistrationsPage.Error",
          "to": "page.AdminRegistrationsPage.Loading",
          "event": "retry",
          "roles": [],
          "validations": [
            "Error 重試會重新載入名單；成功後進入 Ready.Admin 或 Empty；失敗仍 Error。"
          ],
          "intent": {
            "category": "action",
            "summary": "retry"
          },
          "meta": {
            "diagramId": "page_admin_registrations",
            "source": {
              "raw": "AdminRegistrationsPage.Error --> AdminRegistrationsPage.Loading : retry"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_admin_activity_list.invokes.page_admin_registrations.s.page_AdminActivityListPage_Ready_Admin.to.page_AdminRegistrationsPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Ready.Admin"
          },
          "to": {
            "diagramId": "page_admin_registrations",
            "stateId": "page.AdminRegistrationsPage.Init"
          },
          "meta": {
            "reason": "openRegistrations | navigate /admin/activities/:activityId/registrations",
            "action": "openRegistrations",
            "navigateTarget": "/admin/activities/:activityId/registrations",
            "validations": [
              "進入名單頁；僅 Admin 可進入；名單只包含有效報名（canceled_at 為 null）。"
            ]
          }
        },
        {
          "id": "c.page_admin_registrations.invokes.page_login.s.page_AdminRegistrationsPage_CheckAuth.to.page_LoginPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_registrations",
            "stateId": "page.AdminRegistrationsPage.CheckAuth"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Init"
          },
          "meta": {
            "reason": "sessionMissing | navigate /login",
            "action": "sessionMissing",
            "navigateTarget": "/login",
            "validations": [
              "未登入導向 `/login`；API 若被呼叫必回 401；不顯示名單。"
            ]
          }
        },
        {
          "id": "c.page_admin_registrations.invokes.page_forbidden.s.page_AdminRegistrationsPage_CheckAuth.to.page_ForbiddenPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_registrations",
            "stateId": "page.AdminRegistrationsPage.CheckAuth"
          },
          "to": {
            "diagramId": "page_forbidden",
            "stateId": "page.ForbiddenPage.Init"
          },
          "meta": {
            "reason": "roleNotAdmin | navigate /403",
            "action": "roleNotAdmin",
            "navigateTarget": "/403",
            "validations": [
              "Member 進入導向 403；API 回 403；不顯示名單。"
            ]
          }
        },
        {
          "id": "c.page_admin_registrations.invokes.feature_export_registrations_csv.s.page_AdminRegistrationsPage_Ready_Admin.to.feature_ExportRegistrationsCsvFeature_Idle",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_registrations",
            "stateId": "page.AdminRegistrationsPage.Ready.Admin"
          },
          "to": {
            "diagramId": "feature_export_registrations_csv",
            "stateId": "feature.ExportRegistrationsCsvFeature.Idle"
          },
          "meta": {
            "reason": "clickExportCsv | navigate ExportRegistrationsCsvFeature",
            "action": "clickExportCsv",
            "navigateTarget": "ExportRegistrationsCsvFeature",
            "validations": [
              "點擊匯出會進入匯出 Feature；成功後會下載 CSV；下載集合與畫面名單一致。"
            ]
          }
        },
        {
          "id": "c.page_admin_registrations.invokes.feature_admin_close_registration.s.page_AdminRegistrationsPage_Ready_Admin.to.feature_AdminCloseRegistrationFeature_Idle",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_registrations",
            "stateId": "page.AdminRegistrationsPage.Ready.Admin"
          },
          "to": {
            "diagramId": "feature_admin_close_registration",
            "stateId": "feature.AdminCloseRegistrationFeature.Idle"
          },
          "meta": {
            "reason": "clickCloseRegistration | navigate AdminCloseRegistrationFeature",
            "action": "clickCloseRegistration",
            "navigateTarget": "AdminCloseRegistrationFeature",
            "validations": [
              "可在名單頁手動關閉報名；成功後活動狀態變 closed；公開詳情不可再報名。"
            ]
          }
        },
        {
          "id": "c.page_admin_registrations.invokes.page_admin_activity_list.s.page_AdminRegistrationsPage_Ready_Admin.to.page_AdminActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_registrations",
            "stateId": "page.AdminRegistrationsPage.Ready.Admin"
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Init"
          },
          "meta": {
            "reason": "backToAdminActivities | navigate /admin/activities",
            "action": "backToAdminActivities",
            "navigateTarget": "/admin/activities",
            "validations": [
              "返回後台活動列表；該活動狀態與有效報名數顯示更新。"
            ]
          }
        },
        {
          "id": "c.page_admin_registrations.invokes.page_admin_activity_list.s.page_AdminRegistrationsPage_Empty.to.page_AdminActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_registrations",
            "stateId": "page.AdminRegistrationsPage.Empty"
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Init"
          },
          "meta": {
            "reason": "backToAdminActivities | navigate /admin/activities",
            "action": "backToAdminActivities",
            "navigateTarget": "/admin/activities",
            "validations": [
              "Empty 狀態可返回後台列表；路由正確。"
            ]
          }
        },
        {
          "id": "c.page_admin_registrations.invokes.page_not_found.s.page_AdminRegistrationsPage_NotFound.to.page_NotFoundPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_registrations",
            "stateId": "page.AdminRegistrationsPage.NotFound"
          },
          "to": {
            "diagramId": "page_not_found",
            "stateId": "page.NotFoundPage.Init"
          },
          "meta": {
            "reason": "showNotFound | navigate /404",
            "action": "showNotFound",
            "navigateTarget": "/404",
            "validations": [
              "顯示 404 頁；不洩漏活動是否為非公開狀態；提供回到活動列表入口。"
            ]
          }
        },
        {
          "id": "c.page_admin_registrations.invokes.page_error.s.page_AdminRegistrationsPage_Ready_Admin.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_registrations",
            "stateId": "page.AdminRegistrationsPage.Ready.Admin"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "不可恢復錯誤導向錯誤頁；不洩漏名單敏感資訊。"
            ]
          }
        },
        {
          "id": "c.feature_export_registrations_csv.invokes.page_admin_registrations.s.feature_ExportRegistrationsCsvFeature_Succeeded.to.page_AdminRegistrationsPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_export_registrations_csv",
            "stateId": "feature.ExportRegistrationsCsvFeature.Succeeded"
          },
          "to": {
            "diagramId": "page_admin_registrations",
            "stateId": "page.AdminRegistrationsPage.Init"
          },
          "meta": {
            "reason": "backToList | navigate /admin/activities/:activityId/registrations",
            "action": "backToList",
            "navigateTarget": "/admin/activities/:activityId/registrations",
            "validations": [
              "回到名單頁並重新載入（可選）；名單仍一致；不會跳到其他頁。"
            ]
          }
        },
        {
          "id": "c.page_entry.contains.page_admin_registrations",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_admin_registrations",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": "AdminRegistrationsPage",
        "featureName": null,
        "entryStateId": "page.AdminRegistrationsPage.Init"
      }
    },
    {
      "id": "page_forbidden",
      "name": "Forbidden",
      "level": "page",
      "parentDiagramId": "page_entry",
      "roles": [],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "⑨ Forbidden Page",
        "order": 9
      },
      "groups": [],
      "states": [
        {
          "id": "page.ForbiddenPage.Init",
          "label": "Init",
          "type": "start",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_forbidden",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ForbiddenPage.Init"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.page_forbidden.0001",
          "from": "page.ForbiddenPage.Init",
          "to": "page.ForbiddenPage.Init",
          "event": "enterPage",
          "roles": [],
          "validations": [
            "進入 `/403` 會落在 ForbiddenPage.Init；顯示權限不足訊息；不顯示後台資料。"
          ],
          "intent": {
            "category": "action",
            "summary": "enterPage"
          },
          "meta": {
            "diagramId": "page_forbidden",
            "source": {
              "raw": "[*] --> ForbiddenPage.Init : enterPage"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_admin_activity_list.invokes.page_forbidden.s.page_AdminActivityListPage_CheckAuth.to.page_ForbiddenPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.CheckAuth"
          },
          "to": {
            "diagramId": "page_forbidden",
            "stateId": "page.ForbiddenPage.Init"
          },
          "meta": {
            "reason": "roleNotAdmin | navigate /403",
            "action": "roleNotAdmin",
            "navigateTarget": "/403",
            "validations": [
              "Member 進入後台導向 `/403` 或 API 403；不得載入後台資料；UI 顯示權限不足。"
            ]
          }
        },
        {
          "id": "c.page_admin_registrations.invokes.page_forbidden.s.page_AdminRegistrationsPage_CheckAuth.to.page_ForbiddenPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_registrations",
            "stateId": "page.AdminRegistrationsPage.CheckAuth"
          },
          "to": {
            "diagramId": "page_forbidden",
            "stateId": "page.ForbiddenPage.Init"
          },
          "meta": {
            "reason": "roleNotAdmin | navigate /403",
            "action": "roleNotAdmin",
            "navigateTarget": "/403",
            "validations": [
              "Member 進入導向 403；API 回 403；不顯示名單。"
            ]
          }
        },
        {
          "id": "c.page_forbidden.invokes.page_activity_list.s.page_ForbiddenPage_Init.to.page_ActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_forbidden",
            "stateId": "page.ForbiddenPage.Init"
          },
          "to": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Init"
          },
          "meta": {
            "reason": "goActivities | navigate /activities",
            "action": "goActivities",
            "navigateTarget": "/activities",
            "validations": [
              "可回到公開活動列表；路由正確。"
            ]
          }
        },
        {
          "id": "c.page_forbidden.invokes.page_login.s.page_ForbiddenPage_Init.to.page_LoginPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_forbidden",
            "stateId": "page.ForbiddenPage.Init"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Init"
          },
          "meta": {
            "reason": "goLogin | navigate /login",
            "action": "goLogin",
            "navigateTarget": "/login",
            "validations": [
              "可前往登入頁；若已登入但非 Admin，仍不得因此取得後台存取。"
            ]
          }
        },
        {
          "id": "c.feature_register_for_activity.invokes.page_forbidden.s.feature_RegisterForActivityFeature_Forbidden.to.page_ForbiddenPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_register_for_activity",
            "stateId": "feature.RegisterForActivityFeature.Forbidden"
          },
          "to": {
            "diagramId": "page_forbidden",
            "stateId": "page.ForbiddenPage.Init"
          },
          "meta": {
            "reason": "showForbidden | navigate /403",
            "action": "showForbidden",
            "navigateTarget": "/403",
            "validations": [
              "顯示 403；不洩漏內部資訊。"
            ]
          }
        },
        {
          "id": "c.feature_cancel_registration.invokes.page_forbidden.s.feature_CancelRegistrationFeature_Forbidden.to.page_ForbiddenPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_cancel_registration",
            "stateId": "feature.CancelRegistrationFeature.Forbidden"
          },
          "to": {
            "diagramId": "page_forbidden",
            "stateId": "page.ForbiddenPage.Init"
          },
          "meta": {
            "reason": "showForbidden | navigate /403",
            "action": "showForbidden",
            "navigateTarget": "/403",
            "validations": [
              "顯示 403；不洩漏敏感資訊。"
            ]
          }
        },
        {
          "id": "c.feature_admin_upsert_activity.invokes.page_forbidden.s.feature_AdminUpsertActivityFeature_Forbidden.to.page_ForbiddenPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_upsert_activity",
            "stateId": "feature.AdminUpsertActivityFeature.Forbidden"
          },
          "to": {
            "diagramId": "page_forbidden",
            "stateId": "page.ForbiddenPage.Init"
          },
          "meta": {
            "reason": "showForbidden | navigate /403",
            "action": "showForbidden",
            "navigateTarget": "/403",
            "validations": [
              "顯示 403；後台資料不外洩。"
            ]
          }
        },
        {
          "id": "c.feature_admin_publish_activity.invokes.page_forbidden.s.feature_AdminPublishActivityFeature_Forbidden.to.page_ForbiddenPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_publish_activity",
            "stateId": "feature.AdminPublishActivityFeature.Forbidden"
          },
          "to": {
            "diagramId": "page_forbidden",
            "stateId": "page.ForbiddenPage.Init"
          },
          "meta": {
            "reason": "showForbidden | navigate /403",
            "action": "showForbidden",
            "navigateTarget": "/403",
            "validations": [
              "顯示 403。"
            ]
          }
        },
        {
          "id": "c.feature_admin_close_registration.invokes.page_forbidden.s.feature_AdminCloseRegistrationFeature_Forbidden.to.page_ForbiddenPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_close_registration",
            "stateId": "feature.AdminCloseRegistrationFeature.Forbidden"
          },
          "to": {
            "diagramId": "page_forbidden",
            "stateId": "page.ForbiddenPage.Init"
          },
          "meta": {
            "reason": "showForbidden | navigate /403",
            "action": "showForbidden",
            "navigateTarget": "/403",
            "validations": [
              "顯示 403。"
            ]
          }
        },
        {
          "id": "c.feature_admin_archive_activity.invokes.page_forbidden.s.feature_AdminArchiveActivityFeature_Forbidden.to.page_ForbiddenPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_archive_activity",
            "stateId": "feature.AdminArchiveActivityFeature.Forbidden"
          },
          "to": {
            "diagramId": "page_forbidden",
            "stateId": "page.ForbiddenPage.Init"
          },
          "meta": {
            "reason": "showForbidden | navigate /403",
            "action": "showForbidden",
            "navigateTarget": "/403",
            "validations": [
              "顯示 403。"
            ]
          }
        },
        {
          "id": "c.feature_export_registrations_csv.invokes.page_forbidden.s.feature_ExportRegistrationsCsvFeature_Forbidden.to.page_ForbiddenPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_export_registrations_csv",
            "stateId": "feature.ExportRegistrationsCsvFeature.Forbidden"
          },
          "to": {
            "diagramId": "page_forbidden",
            "stateId": "page.ForbiddenPage.Init"
          },
          "meta": {
            "reason": "showForbidden | navigate /403",
            "action": "showForbidden",
            "navigateTarget": "/403",
            "validations": [
              "顯示 403。"
            ]
          }
        },
        {
          "id": "c.page_entry.contains.page_forbidden",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_forbidden",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": "ForbiddenPage",
        "featureName": null,
        "entryStateId": "page.ForbiddenPage.Init"
      }
    },
    {
      "id": "page_not_found",
      "name": "Not Found",
      "level": "page",
      "parentDiagramId": "page_entry",
      "roles": [],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "⑩ Not Found Page",
        "order": 10
      },
      "groups": [],
      "states": [
        {
          "id": "page.NotFoundPage.Init",
          "label": "Init",
          "type": "start",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_not_found",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "NotFoundPage.Init"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.page_not_found.0001",
          "from": "page.NotFoundPage.Init",
          "to": "page.NotFoundPage.Init",
          "event": "enterPage",
          "roles": [],
          "validations": [
            "進入 `/404` 會落在 NotFoundPage.Init；顯示查無頁面/資源訊息；不洩漏敏感資訊。"
          ],
          "intent": {
            "category": "action",
            "summary": "enterPage"
          },
          "meta": {
            "diagramId": "page_not_found",
            "source": {
              "raw": "[*] --> NotFoundPage.Init : enterPage"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_activity_detail.invokes.page_not_found.s.page_ActivityDetailPage_NotFound.to.page_NotFoundPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.NotFound"
          },
          "to": {
            "diagramId": "page_not_found",
            "stateId": "page.NotFoundPage.Init"
          },
          "meta": {
            "reason": "showNotFound | navigate /404",
            "action": "showNotFound",
            "navigateTarget": "/404",
            "validations": [
              "顯示 404 頁；不洩漏活動是否存在於非公開狀態；提供回到活動列表的入口。"
            ]
          }
        },
        {
          "id": "c.page_admin_registrations.invokes.page_not_found.s.page_AdminRegistrationsPage_NotFound.to.page_NotFoundPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_registrations",
            "stateId": "page.AdminRegistrationsPage.NotFound"
          },
          "to": {
            "diagramId": "page_not_found",
            "stateId": "page.NotFoundPage.Init"
          },
          "meta": {
            "reason": "showNotFound | navigate /404",
            "action": "showNotFound",
            "navigateTarget": "/404",
            "validations": [
              "顯示 404 頁；不洩漏活動是否為非公開狀態；提供回到活動列表入口。"
            ]
          }
        },
        {
          "id": "c.page_not_found.invokes.page_activity_list.s.page_NotFoundPage_Init.to.page_ActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_not_found",
            "stateId": "page.NotFoundPage.Init"
          },
          "to": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Init"
          },
          "meta": {
            "reason": "goActivities | navigate /activities",
            "action": "goActivities",
            "navigateTarget": "/activities",
            "validations": [
              "可回到活動列表；路由正確。"
            ]
          }
        },
        {
          "id": "c.feature_register_for_activity.invokes.page_not_found.s.feature_RegisterForActivityFeature_NotFound.to.page_NotFoundPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_register_for_activity",
            "stateId": "feature.RegisterForActivityFeature.NotFound"
          },
          "to": {
            "diagramId": "page_not_found",
            "stateId": "page.NotFoundPage.Init"
          },
          "meta": {
            "reason": "showNotFound | navigate /404",
            "action": "showNotFound",
            "navigateTarget": "/404",
            "validations": [
              "顯示 404；不洩漏活動非公開狀態。"
            ]
          }
        },
        {
          "id": "c.feature_cancel_registration.invokes.page_not_found.s.feature_CancelRegistrationFeature_NotFound.to.page_NotFoundPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_cancel_registration",
            "stateId": "feature.CancelRegistrationFeature.NotFound"
          },
          "to": {
            "diagramId": "page_not_found",
            "stateId": "page.NotFoundPage.Init"
          },
          "meta": {
            "reason": "showNotFound | navigate /404",
            "action": "showNotFound",
            "navigateTarget": "/404",
            "validations": [
              "顯示 404；不洩漏活動是否為非公開狀態。"
            ]
          }
        },
        {
          "id": "c.feature_admin_publish_activity.invokes.page_not_found.s.feature_AdminPublishActivityFeature_NotFound.to.page_NotFoundPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_publish_activity",
            "stateId": "feature.AdminPublishActivityFeature.NotFound"
          },
          "to": {
            "diagramId": "page_not_found",
            "stateId": "page.NotFoundPage.Init"
          },
          "meta": {
            "reason": "showNotFound | navigate /404",
            "action": "showNotFound",
            "navigateTarget": "/404",
            "validations": [
              "顯示 404。"
            ]
          }
        },
        {
          "id": "c.feature_admin_close_registration.invokes.page_not_found.s.feature_AdminCloseRegistrationFeature_NotFound.to.page_NotFoundPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_close_registration",
            "stateId": "feature.AdminCloseRegistrationFeature.NotFound"
          },
          "to": {
            "diagramId": "page_not_found",
            "stateId": "page.NotFoundPage.Init"
          },
          "meta": {
            "reason": "showNotFound | navigate /404",
            "action": "showNotFound",
            "navigateTarget": "/404",
            "validations": [
              "顯示 404。"
            ]
          }
        },
        {
          "id": "c.feature_admin_archive_activity.invokes.page_not_found.s.feature_AdminArchiveActivityFeature_NotFound.to.page_NotFoundPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_archive_activity",
            "stateId": "feature.AdminArchiveActivityFeature.NotFound"
          },
          "to": {
            "diagramId": "page_not_found",
            "stateId": "page.NotFoundPage.Init"
          },
          "meta": {
            "reason": "showNotFound | navigate /404",
            "action": "showNotFound",
            "navigateTarget": "/404",
            "validations": [
              "顯示 404。"
            ]
          }
        },
        {
          "id": "c.feature_export_registrations_csv.invokes.page_not_found.s.feature_ExportRegistrationsCsvFeature_NotFound.to.page_NotFoundPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_export_registrations_csv",
            "stateId": "feature.ExportRegistrationsCsvFeature.NotFound"
          },
          "to": {
            "diagramId": "page_not_found",
            "stateId": "page.NotFoundPage.Init"
          },
          "meta": {
            "reason": "showNotFound | navigate /404",
            "action": "showNotFound",
            "navigateTarget": "/404",
            "validations": [
              "顯示 404。"
            ]
          }
        },
        {
          "id": "c.page_entry.contains.page_not_found",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_not_found",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": "NotFoundPage",
        "featureName": null,
        "entryStateId": "page.NotFoundPage.Init"
      }
    },
    {
      "id": "page_error",
      "name": "Error",
      "level": "page",
      "parentDiagramId": "page_entry",
      "roles": [],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "⑪ Error Page",
        "order": 11
      },
      "groups": [],
      "states": [
        {
          "id": "page.ErrorPage.Init",
          "label": "Init",
          "type": "start",
          "groupId": null,
          "tags": [
            "page"
          ],
          "meta": {
            "diagramId": "page_error",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ErrorPage.Init"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.page_error.0001",
          "from": "page.ErrorPage.Init",
          "to": "page.ErrorPage.Init",
          "event": "enterPage",
          "roles": [],
          "validations": [
            "進入 `/error` 會落在 ErrorPage.Init；顯示服務錯誤訊息與可回到活動列表的入口；不顯示敏感堆疊。"
          ],
          "intent": {
            "category": "action",
            "summary": "enterPage"
          },
          "meta": {
            "diagramId": "page_error",
            "source": {
              "raw": "[*] --> ErrorPage.Init : enterPage"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_entry.invokes.page_error.s.page_Entry_RouteError.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_entry",
            "stateId": "page.Entry.RouteError"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "showError | navigate /error",
            "action": "showError",
            "navigateTarget": "/error",
            "validations": [
              "路由變更到 `/error` 成功；錯誤頁顯示可回到活動列表的入口；不顯示敏感錯誤堆疊。"
            ]
          }
        },
        {
          "id": "c.page_activity_list.invokes.page_error.s.page_ActivityListPage_Ready_Guest.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Ready.Guest"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "發生不可恢復錯誤時導向 `/error`；錯誤頁不顯示敏感資訊；仍可回到 `/activities`。"
            ]
          }
        },
        {
          "id": "c.page_activity_list.invokes.page_error.s.page_ActivityListPage_Ready_Member.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Ready.Member"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "已登入狀態遇到 5xx 時同樣導向錯誤頁；回到活動列表後可重試載入。"
            ]
          }
        },
        {
          "id": "c.page_activity_list.invokes.page_error.s.page_ActivityListPage_Ready_Admin.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Ready.Admin"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "Admin 遇到 5xx 導向錯誤頁；不會誤導到 403/404。"
            ]
          }
        },
        {
          "id": "c.page_activity_detail.invokes.page_error.s.page_ActivityDetailPage_Ready_Guest.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Ready.Guest"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "不可恢復錯誤導向錯誤頁；錯誤頁可回到活動列表。"
            ]
          }
        },
        {
          "id": "c.page_activity_detail.invokes.page_error.s.page_ActivityDetailPage_Ready_Member.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Ready.Member"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "5xx 時導向錯誤頁；重回詳情需重新載入，不顯示過期資料。"
            ]
          }
        },
        {
          "id": "c.page_activity_detail.invokes.page_error.s.page_ActivityDetailPage_Ready_Admin.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Ready.Admin"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "Admin 5xx 時導向錯誤頁；不會誤導到 403/404。"
            ]
          }
        },
        {
          "id": "c.page_login.invokes.page_error.s.page_LoginPage_Ready_Guest.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Ready.Guest"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "遇到不可恢復錯誤導向錯誤頁；錯誤頁可回到活動列表。"
            ]
          }
        },
        {
          "id": "c.page_register.invokes.page_error.s.page_RegisterPage_Ready_Guest.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_register",
            "stateId": "page.RegisterPage.Ready.Guest"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "不可恢復錯誤導向錯誤頁；可回到活動列表。"
            ]
          }
        },
        {
          "id": "c.page_my_activities.invokes.page_error.s.page_MyActivitiesPage_Ready_Member.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_my_activities",
            "stateId": "page.MyActivitiesPage.Ready.Member"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "不可恢復錯誤導向錯誤頁；錯誤頁可回到活動列表。"
            ]
          }
        },
        {
          "id": "c.page_my_activities.invokes.page_error.s.page_MyActivitiesPage_Ready_Admin.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_my_activities",
            "stateId": "page.MyActivitiesPage.Ready.Admin"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "Admin 不可恢復錯誤導向錯誤頁；回到活動列表後可重試。"
            ]
          }
        },
        {
          "id": "c.page_admin_activity_list.invokes.page_error.s.page_AdminActivityListPage_Ready_Admin.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Ready.Admin"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "不可恢復錯誤導向錯誤頁；不洩漏後台敏感資訊。"
            ]
          }
        },
        {
          "id": "c.page_admin_registrations.invokes.page_error.s.page_AdminRegistrationsPage_Ready_Admin.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_registrations",
            "stateId": "page.AdminRegistrationsPage.Ready.Admin"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "不可恢復錯誤導向錯誤頁；不洩漏名單敏感資訊。"
            ]
          }
        },
        {
          "id": "c.page_error.invokes.page_activity_list.s.page_ErrorPage_Init.to.page_ActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "to": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Init"
          },
          "meta": {
            "reason": "goActivities | navigate /activities",
            "action": "goActivities",
            "navigateTarget": "/activities",
            "validations": [
              "可回到活動列表；回到後會重新載入列表資料；不會使用過期快取偽裝成功。"
            ]
          }
        },
        {
          "id": "c.feature_auth_login.invokes.page_error.s.feature_AuthLoginFeature_Error.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_login",
            "stateId": "feature.AuthLoginFeature.Error"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "不可恢復錯誤導向錯誤頁；可回到活動列表。"
            ]
          }
        },
        {
          "id": "c.feature_auth_register.invokes.page_error.s.feature_AuthRegisterFeature_Error.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_register",
            "stateId": "feature.AuthRegisterFeature.Error"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "不可恢復錯誤導向錯誤頁；可回到活動列表。"
            ]
          }
        },
        {
          "id": "c.feature_register_for_activity.invokes.page_error.s.feature_RegisterForActivityFeature_Error.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_register_for_activity",
            "stateId": "feature.RegisterForActivityFeature.Error"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "不可恢復錯誤導向錯誤頁；可回到活動列表。"
            ]
          }
        },
        {
          "id": "c.feature_cancel_registration.invokes.page_error.s.feature_CancelRegistrationFeature_Error.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_cancel_registration",
            "stateId": "feature.CancelRegistrationFeature.Error"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "不可恢復錯誤導向錯誤頁。"
            ]
          }
        },
        {
          "id": "c.feature_admin_upsert_activity.invokes.page_error.s.feature_AdminUpsertActivityFeature_Error.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_upsert_activity",
            "stateId": "feature.AdminUpsertActivityFeature.Error"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "不可恢復錯誤導向錯誤頁。"
            ]
          }
        },
        {
          "id": "c.feature_admin_publish_activity.invokes.page_error.s.feature_AdminPublishActivityFeature_Error.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_publish_activity",
            "stateId": "feature.AdminPublishActivityFeature.Error"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "不可恢復錯誤導向錯誤頁。"
            ]
          }
        },
        {
          "id": "c.feature_admin_close_registration.invokes.page_error.s.feature_AdminCloseRegistrationFeature_Error.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_close_registration",
            "stateId": "feature.AdminCloseRegistrationFeature.Error"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "不可恢復錯誤導向錯誤頁。"
            ]
          }
        },
        {
          "id": "c.feature_admin_archive_activity.invokes.page_error.s.feature_AdminArchiveActivityFeature_Error.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_archive_activity",
            "stateId": "feature.AdminArchiveActivityFeature.Error"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "不可恢復錯誤導向錯誤頁。"
            ]
          }
        },
        {
          "id": "c.feature_export_registrations_csv.invokes.page_error.s.feature_ExportRegistrationsCsvFeature_Error.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_export_registrations_csv",
            "stateId": "feature.ExportRegistrationsCsvFeature.Error"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "不可恢復錯誤導向錯誤頁。"
            ]
          }
        },
        {
          "id": "c.page_entry.contains.page_error",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "page_error",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": "ErrorPage",
        "featureName": null,
        "entryStateId": "page.ErrorPage.Init"
      }
    },
    {
      "id": "feature_auth_login",
      "name": "AuthLoginFeature",
      "level": "feature",
      "parentDiagramId": "page_entry",
      "roles": [],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "⑫ AuthLoginFeature（登入送出）",
        "order": 12
      },
      "groups": [],
      "states": [
        {
          "id": "feature.AuthLoginFeature.Idle",
          "label": "Idle",
          "type": "start",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_auth_login",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AuthLoginFeature.Idle"
            }
          }
        },
        {
          "id": "feature.AuthLoginFeature.Validating",
          "label": "Validating",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_auth_login",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AuthLoginFeature.Validating"
            }
          }
        },
        {
          "id": "feature.AuthLoginFeature.Submitting",
          "label": "Submitting",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_auth_login",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AuthLoginFeature.Submitting"
            }
          }
        },
        {
          "id": "feature.AuthLoginFeature.Succeeded",
          "label": "Succeeded",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_auth_login",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AuthLoginFeature.Succeeded"
            }
          }
        },
        {
          "id": "feature.AuthLoginFeature.Failed",
          "label": "Failed",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_auth_login",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AuthLoginFeature.Failed"
            }
          }
        },
        {
          "id": "feature.AuthLoginFeature.Error",
          "label": "Error",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_auth_login",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AuthLoginFeature.Error"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.feature_auth_login.0001",
          "from": "feature.AuthLoginFeature.Idle",
          "to": "feature.AuthLoginFeature.Idle",
          "event": "enterFeature",
          "roles": [],
          "validations": [
            "進入登入 Feature 的 Entry State；UI 進入表單提交流程；未觸發 API 前不應改變登入狀態。"
          ],
          "intent": {
            "category": "action",
            "summary": "enterFeature"
          },
          "meta": {
            "diagramId": "feature_auth_login",
            "source": {
              "raw": "[*] --> AuthLoginFeature.Idle : enterFeature"
            }
          }
        },
        {
          "id": "t.feature_auth_login.0002",
          "from": "feature.AuthLoginFeature.Idle",
          "to": "feature.AuthLoginFeature.Validating",
          "event": "validate",
          "roles": [],
          "validations": [
            "前端驗證 email/password 必填與基本格式；驗證失敗不送出 API，UI 顯示欄位錯誤。"
          ],
          "intent": {
            "category": "action",
            "summary": "validate"
          },
          "meta": {
            "diagramId": "feature_auth_login",
            "source": {
              "raw": "AuthLoginFeature.Idle --> AuthLoginFeature.Validating : validate"
            }
          }
        },
        {
          "id": "t.feature_auth_login.0003",
          "from": "feature.AuthLoginFeature.Validating",
          "to": "feature.AuthLoginFeature.Submitting",
          "event": "submit",
          "roles": [],
          "validations": [
            "驗證通過後才送出登入 API；提交期間按鈕 disabled 且顯示 loading；避免重複提交。"
          ],
          "intent": {
            "category": "action",
            "summary": "submit"
          },
          "meta": {
            "diagramId": "feature_auth_login",
            "source": {
              "raw": "AuthLoginFeature.Validating --> AuthLoginFeature.Submitting : submit"
            }
          }
        },
        {
          "id": "t.feature_auth_login.0004",
          "from": "feature.AuthLoginFeature.Submitting",
          "to": "feature.AuthLoginFeature.Succeeded",
          "event": "api200",
          "roles": [],
          "validations": [
            "API 回 200 並建立 session/token；前端保存身分；Header 依角色切換（Member/ Admin 不顯示登入/註冊）。"
          ],
          "intent": {
            "category": "action",
            "summary": "api200"
          },
          "meta": {
            "diagramId": "feature_auth_login",
            "source": {
              "raw": "AuthLoginFeature.Submitting --> AuthLoginFeature.Succeeded : api200"
            }
          }
        },
        {
          "id": "t.feature_auth_login.0005",
          "from": "feature.AuthLoginFeature.Submitting",
          "to": "feature.AuthLoginFeature.Failed",
          "event": "api401or400",
          "roles": [],
          "validations": [
            "API 回 401/400；不建立 session；錯誤訊息不洩漏 email 是否存在；UI 顯示可理解的錯誤。"
          ],
          "intent": {
            "category": "action",
            "summary": "api401or400"
          },
          "meta": {
            "diagramId": "feature_auth_login",
            "source": {
              "raw": "AuthLoginFeature.Submitting --> AuthLoginFeature.Failed : api401or400"
            }
          }
        },
        {
          "id": "t.feature_auth_login.0006",
          "from": "feature.AuthLoginFeature.Submitting",
          "to": "feature.AuthLoginFeature.Error",
          "event": "api5xx",
          "roles": [],
          "validations": [
            "API 回 5xx 或網路錯誤；UI 顯示錯誤並可重試；不誤判成登入成功。"
          ],
          "intent": {
            "category": "action",
            "summary": "api5xx"
          },
          "meta": {
            "diagramId": "feature_auth_login",
            "source": {
              "raw": "AuthLoginFeature.Submitting --> AuthLoginFeature.Error : api5xx"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_login.invokes.feature_auth_login.s.page_LoginPage_Ready_Guest.to.feature_AuthLoginFeature_Idle",
          "type": "invokes",
          "from": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Ready.Guest"
          },
          "to": {
            "diagramId": "feature_auth_login",
            "stateId": "feature.AuthLoginFeature.Idle"
          },
          "meta": {
            "reason": "submitLogin | navigate AuthLoginFeature",
            "action": "submitLogin",
            "navigateTarget": "AuthLoginFeature",
            "validations": [
              "送出登入會進入登入 Feature；按鈕進入 loading 並避免重複提交；輸入驗證在送出前完成。"
            ]
          }
        },
        {
          "id": "c.feature_auth_login.invokes.page_activity_list.s.feature_AuthLoginFeature_Succeeded.to.page_ActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_login",
            "stateId": "feature.AuthLoginFeature.Succeeded"
          },
          "to": {
            "diagramId": "page_activity_list",
            "stateId": "page.ActivityListPage.Init"
          },
          "meta": {
            "reason": "loginDone | navigate /activities",
            "action": "loginDone",
            "navigateTarget": "/activities",
            "validations": [
              "登入成功導向 `/activities`；列表顯示依登入角色；受保護頁可進入。"
            ]
          }
        },
        {
          "id": "c.feature_auth_login.invokes.page_login.s.feature_AuthLoginFeature_Failed.to.page_LoginPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_login",
            "stateId": "feature.AuthLoginFeature.Failed"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Init"
          },
          "meta": {
            "reason": "showErrorReturn | navigate /login",
            "action": "showErrorReturn",
            "navigateTarget": "/login",
            "validations": [
              "返回登入頁；保留輸入或清空依 UI 設計但需一致；錯誤訊息清楚可見。"
            ]
          }
        },
        {
          "id": "c.feature_auth_login.invokes.page_error.s.feature_AuthLoginFeature_Error.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_login",
            "stateId": "feature.AuthLoginFeature.Error"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "不可恢復錯誤導向錯誤頁；可回到活動列表。"
            ]
          }
        },
        {
          "id": "c.page_entry.contains.feature_auth_login",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "feature_auth_login",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": null,
        "featureName": "AuthLoginFeature",
        "entryStateId": "feature.AuthLoginFeature.Idle"
      }
    },
    {
      "id": "feature_auth_register",
      "name": "AuthRegisterFeature",
      "level": "feature",
      "parentDiagramId": "page_entry",
      "roles": [],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "⑬ AuthRegisterFeature（註冊送出）",
        "order": 13
      },
      "groups": [],
      "states": [
        {
          "id": "feature.AuthRegisterFeature.Idle",
          "label": "Idle",
          "type": "start",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_auth_register",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AuthRegisterFeature.Idle"
            }
          }
        },
        {
          "id": "feature.AuthRegisterFeature.Validating",
          "label": "Validating",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_auth_register",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AuthRegisterFeature.Validating"
            }
          }
        },
        {
          "id": "feature.AuthRegisterFeature.Submitting",
          "label": "Submitting",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_auth_register",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AuthRegisterFeature.Submitting"
            }
          }
        },
        {
          "id": "feature.AuthRegisterFeature.Succeeded",
          "label": "Succeeded",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_auth_register",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AuthRegisterFeature.Succeeded"
            }
          }
        },
        {
          "id": "feature.AuthRegisterFeature.Failed",
          "label": "Failed",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_auth_register",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AuthRegisterFeature.Failed"
            }
          }
        },
        {
          "id": "feature.AuthRegisterFeature.Error",
          "label": "Error",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_auth_register",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AuthRegisterFeature.Error"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.feature_auth_register.0001",
          "from": "feature.AuthRegisterFeature.Idle",
          "to": "feature.AuthRegisterFeature.Idle",
          "event": "enterFeature",
          "roles": [],
          "validations": [
            "進入註冊 Feature Entry State；尚未建立帳號。"
          ],
          "intent": {
            "category": "action",
            "summary": "enterFeature"
          },
          "meta": {
            "diagramId": "feature_auth_register",
            "source": {
              "raw": "[*] --> AuthRegisterFeature.Idle : enterFeature"
            }
          }
        },
        {
          "id": "t.feature_auth_register.0002",
          "from": "feature.AuthRegisterFeature.Idle",
          "to": "feature.AuthRegisterFeature.Validating",
          "event": "validate",
          "roles": [],
          "validations": [
            "前端驗證 name/email/password 必填；email 格式與密碼長度下限；驗證失敗不送 API。"
          ],
          "intent": {
            "category": "action",
            "summary": "validate"
          },
          "meta": {
            "diagramId": "feature_auth_register",
            "source": {
              "raw": "AuthRegisterFeature.Idle --> AuthRegisterFeature.Validating : validate"
            }
          }
        },
        {
          "id": "t.feature_auth_register.0003",
          "from": "feature.AuthRegisterFeature.Validating",
          "to": "feature.AuthRegisterFeature.Submitting",
          "event": "submit",
          "roles": [],
          "validations": [
            "驗證通過後送出註冊 API；提交期間按鈕 disabled 並顯示 loading；避免重複送出。"
          ],
          "intent": {
            "category": "action",
            "summary": "submit"
          },
          "meta": {
            "diagramId": "feature_auth_register",
            "source": {
              "raw": "AuthRegisterFeature.Validating --> AuthRegisterFeature.Submitting : submit"
            }
          }
        },
        {
          "id": "t.feature_auth_register.0004",
          "from": "feature.AuthRegisterFeature.Submitting",
          "to": "feature.AuthRegisterFeature.Succeeded",
          "event": "api201",
          "roles": [],
          "validations": [
            "API 回 201 建立使用者；email 唯一性成立；資料庫僅存 password_hash（不存明文）。"
          ],
          "intent": {
            "category": "action",
            "summary": "api201"
          },
          "meta": {
            "diagramId": "feature_auth_register",
            "source": {
              "raw": "AuthRegisterFeature.Submitting --> AuthRegisterFeature.Succeeded : api201"
            }
          }
        },
        {
          "id": "t.feature_auth_register.0005",
          "from": "feature.AuthRegisterFeature.Submitting",
          "to": "feature.AuthRegisterFeature.Failed",
          "event": "api400or409",
          "roles": [],
          "validations": [
            "API 回 400（欄位錯誤）或 409（email 重複）；不建立重複帳號；UI 顯示對應錯誤。"
          ],
          "intent": {
            "category": "action",
            "summary": "api400or409"
          },
          "meta": {
            "diagramId": "feature_auth_register",
            "source": {
              "raw": "AuthRegisterFeature.Submitting --> AuthRegisterFeature.Failed : api400or409"
            }
          }
        },
        {
          "id": "t.feature_auth_register.0006",
          "from": "feature.AuthRegisterFeature.Submitting",
          "to": "feature.AuthRegisterFeature.Error",
          "event": "api5xx",
          "roles": [],
          "validations": [
            "5xx 或網路錯誤；UI 顯示可重試；不誤判為註冊成功。"
          ],
          "intent": {
            "category": "action",
            "summary": "api5xx"
          },
          "meta": {
            "diagramId": "feature_auth_register",
            "source": {
              "raw": "AuthRegisterFeature.Submitting --> AuthRegisterFeature.Error : api5xx"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_register.invokes.feature_auth_register.s.page_RegisterPage_Ready_Guest.to.feature_AuthRegisterFeature_Idle",
          "type": "invokes",
          "from": {
            "diagramId": "page_register",
            "stateId": "page.RegisterPage.Ready.Guest"
          },
          "to": {
            "diagramId": "feature_auth_register",
            "stateId": "feature.AuthRegisterFeature.Idle"
          },
          "meta": {
            "reason": "submitRegister | navigate AuthRegisterFeature",
            "action": "submitRegister",
            "navigateTarget": "AuthRegisterFeature",
            "validations": [
              "送出註冊會進入註冊 Feature；按鈕 loading 並避免重複提交；前端會驗證必填欄位。"
            ]
          }
        },
        {
          "id": "c.feature_auth_register.invokes.page_login.s.feature_AuthRegisterFeature_Succeeded.to.page_LoginPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_register",
            "stateId": "feature.AuthRegisterFeature.Succeeded"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Init"
          },
          "meta": {
            "reason": "registerDoneGoLogin | navigate /login",
            "action": "registerDoneGoLogin",
            "navigateTarget": "/login",
            "validations": [
              "註冊成功導向登入頁；可用同 email 登入；不自動給錯誤角色。"
            ]
          }
        },
        {
          "id": "c.feature_auth_register.invokes.page_register.s.feature_AuthRegisterFeature_Failed.to.page_RegisterPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_register",
            "stateId": "feature.AuthRegisterFeature.Failed"
          },
          "to": {
            "diagramId": "page_register",
            "stateId": "page.RegisterPage.Init"
          },
          "meta": {
            "reason": "showErrorReturn | navigate /register",
            "action": "showErrorReturn",
            "navigateTarget": "/register",
            "validations": [
              "返回註冊頁並顯示錯誤；不清除必要欄位提示；使用者可修正後再次送出。"
            ]
          }
        },
        {
          "id": "c.feature_auth_register.invokes.page_error.s.feature_AuthRegisterFeature_Error.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_auth_register",
            "stateId": "feature.AuthRegisterFeature.Error"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "不可恢復錯誤導向錯誤頁；可回到活動列表。"
            ]
          }
        },
        {
          "id": "c.page_entry.contains.feature_auth_register",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "feature_auth_register",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": null,
        "featureName": "AuthRegisterFeature",
        "entryStateId": "feature.AuthRegisterFeature.Idle"
      }
    },
    {
      "id": "feature_register_for_activity",
      "name": "RegisterForActivityFeature",
      "level": "feature",
      "parentDiagramId": "page_entry",
      "roles": [],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "⑭ RegisterForActivityFeature（活動報名）",
        "order": 14
      },
      "groups": [],
      "states": [
        {
          "id": "feature.RegisterForActivityFeature.Idle",
          "label": "Idle",
          "type": "start",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_register_for_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "RegisterForActivityFeature.Idle"
            }
          }
        },
        {
          "id": "feature.RegisterForActivityFeature.Precheck",
          "label": "Precheck",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_register_for_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "RegisterForActivityFeature.Precheck"
            }
          }
        },
        {
          "id": "feature.RegisterForActivityFeature.Submitting",
          "label": "Submitting",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_register_for_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "RegisterForActivityFeature.Submitting"
            }
          }
        },
        {
          "id": "feature.RegisterForActivityFeature.Succeeded",
          "label": "Succeeded",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_register_for_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "RegisterForActivityFeature.Succeeded"
            }
          }
        },
        {
          "id": "feature.RegisterForActivityFeature.Failed",
          "label": "Failed",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_register_for_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "RegisterForActivityFeature.Failed"
            }
          }
        },
        {
          "id": "feature.RegisterForActivityFeature.Unauthorized",
          "label": "Unauthorized",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_register_for_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "RegisterForActivityFeature.Unauthorized"
            }
          }
        },
        {
          "id": "feature.RegisterForActivityFeature.Forbidden",
          "label": "Forbidden",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_register_for_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "RegisterForActivityFeature.Forbidden"
            }
          }
        },
        {
          "id": "feature.RegisterForActivityFeature.NotFound",
          "label": "NotFound",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_register_for_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "RegisterForActivityFeature.NotFound"
            }
          }
        },
        {
          "id": "feature.RegisterForActivityFeature.Error",
          "label": "Error",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_register_for_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "RegisterForActivityFeature.Error"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.feature_register_for_activity.0001",
          "from": "feature.RegisterForActivityFeature.Idle",
          "to": "feature.RegisterForActivityFeature.Idle",
          "event": "enterFeature",
          "roles": [],
          "validations": [
            "進入報名 Feature Entry State；尚未送出 API；頁面應顯示提交中的 UI（例如 modal 或 inline loading）。"
          ],
          "intent": {
            "category": "action",
            "summary": "enterFeature"
          },
          "meta": {
            "diagramId": "feature_register_for_activity",
            "source": {
              "raw": "[*] --> RegisterForActivityFeature.Idle : enterFeature"
            }
          }
        },
        {
          "id": "t.feature_register_for_activity.0002",
          "from": "feature.RegisterForActivityFeature.Idle",
          "to": "feature.RegisterForActivityFeature.Precheck",
          "event": "precheck",
          "roles": [],
          "validations": [
            "前置檢查包含：活動狀態=published、now < deadline、now < date、未額滿、本人未有效報名；任一不符則不可送出。"
          ],
          "intent": {
            "category": "action",
            "summary": "precheck"
          },
          "meta": {
            "diagramId": "feature_register_for_activity",
            "source": {
              "raw": "RegisterForActivityFeature.Idle --> RegisterForActivityFeature.Precheck : precheck"
            }
          }
        },
        {
          "id": "t.feature_register_for_activity.0003",
          "from": "feature.RegisterForActivityFeature.Precheck",
          "to": "feature.RegisterForActivityFeature.Submitting",
          "event": "submit",
          "roles": [],
          "validations": [
            "前置檢查通過才送出報名 API；提交期間按鈕 disabled、防重送；可攜帶 idempotency 資訊以避免重複提交造成重複報名。"
          ],
          "intent": {
            "category": "action",
            "summary": "submit"
          },
          "meta": {
            "diagramId": "feature_register_for_activity",
            "source": {
              "raw": "RegisterForActivityFeature.Precheck --> RegisterForActivityFeature.Submitting : submit"
            }
          }
        },
        {
          "id": "t.feature_register_for_activity.0004",
          "from": "feature.RegisterForActivityFeature.Submitting",
          "to": "feature.RegisterForActivityFeature.Succeeded",
          "event": "api200or201",
          "roles": [],
          "validations": [
            "API 回 200/201；建立或確認 1 筆有效報名；有效報名數不超過 capacity；若達上限活動狀態切到 full。"
          ],
          "intent": {
            "category": "action",
            "summary": "api200or201"
          },
          "meta": {
            "diagramId": "feature_register_for_activity",
            "source": {
              "raw": "RegisterForActivityFeature.Submitting --> RegisterForActivityFeature.Succeeded : api200or201"
            }
          }
        },
        {
          "id": "t.feature_register_for_activity.0005",
          "from": "feature.RegisterForActivityFeature.Submitting",
          "to": "feature.RegisterForActivityFeature.Failed",
          "event": "api400or409",
          "roles": [],
          "validations": [
            "API 回 400（違反狀態/截止/已開始/額滿等）或 409（重複報名）；不建立第二筆有效報名；UI 顯示具體原因。"
          ],
          "intent": {
            "category": "action",
            "summary": "api400or409"
          },
          "meta": {
            "diagramId": "feature_register_for_activity",
            "source": {
              "raw": "RegisterForActivityFeature.Submitting --> RegisterForActivityFeature.Failed : api400or409"
            }
          }
        },
        {
          "id": "t.feature_register_for_activity.0006",
          "from": "feature.RegisterForActivityFeature.Submitting",
          "to": "feature.RegisterForActivityFeature.Unauthorized",
          "event": "api401",
          "roles": [],
          "validations": [
            "API 回 401；不建立報名；前端導向登入並保留 redirect 回此活動詳情。"
          ],
          "intent": {
            "category": "action",
            "summary": "api401"
          },
          "meta": {
            "diagramId": "feature_register_for_activity",
            "source": {
              "raw": "RegisterForActivityFeature.Submitting --> RegisterForActivityFeature.Unauthorized : api401"
            }
          }
        },
        {
          "id": "t.feature_register_for_activity.0007",
          "from": "feature.RegisterForActivityFeature.Submitting",
          "to": "feature.RegisterForActivityFeature.Forbidden",
          "event": "api403",
          "roles": [],
          "validations": [
            "API 回 403（角色不允許或其他權限限制）；不建立報名；導向 403 頁。"
          ],
          "intent": {
            "category": "action",
            "summary": "api403"
          },
          "meta": {
            "diagramId": "feature_register_for_activity",
            "source": {
              "raw": "RegisterForActivityFeature.Submitting --> RegisterForActivityFeature.Forbidden : api403"
            }
          }
        },
        {
          "id": "t.feature_register_for_activity.0008",
          "from": "feature.RegisterForActivityFeature.Submitting",
          "to": "feature.RegisterForActivityFeature.NotFound",
          "event": "api404",
          "roles": [],
          "validations": [
            "API 回 404（活動不存在或不可公開）；不建立報名；導向 404 頁。"
          ],
          "intent": {
            "category": "action",
            "summary": "api404"
          },
          "meta": {
            "diagramId": "feature_register_for_activity",
            "source": {
              "raw": "RegisterForActivityFeature.Submitting --> RegisterForActivityFeature.NotFound : api404"
            }
          }
        },
        {
          "id": "t.feature_register_for_activity.0009",
          "from": "feature.RegisterForActivityFeature.Submitting",
          "to": "feature.RegisterForActivityFeature.Error",
          "event": "api5xx",
          "roles": [],
          "validations": [
            "API 回 5xx/網路錯誤；不建立報名（或若後端已建立需以回傳結果為準並可重新整理確認）；UI 顯示可重試。"
          ],
          "intent": {
            "category": "action",
            "summary": "api5xx"
          },
          "meta": {
            "diagramId": "feature_register_for_activity",
            "source": {
              "raw": "RegisterForActivityFeature.Submitting --> RegisterForActivityFeature.Error : api5xx"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_activity_detail.invokes.feature_register_for_activity.s.page_ActivityDetailPage_Ready_Member.to.feature_RegisterForActivityFeature_Idle",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Ready.Member"
          },
          "to": {
            "diagramId": "feature_register_for_activity",
            "stateId": "feature.RegisterForActivityFeature.Idle"
          },
          "meta": {
            "reason": "clickSignup | navigate RegisterForActivityFeature",
            "action": "clickSignup",
            "navigateTarget": "RegisterForActivityFeature",
            "validations": [
              "進入報名 Feature；提交前會做前置檢查（狀態=published、未截止、未開始/未結束、未額滿、未重複）。"
            ]
          }
        },
        {
          "id": "c.page_activity_detail.invokes.feature_register_for_activity.s.page_ActivityDetailPage_Ready_Admin.to.feature_RegisterForActivityFeature_Idle",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Ready.Admin"
          },
          "to": {
            "diagramId": "feature_register_for_activity",
            "stateId": "feature.RegisterForActivityFeature.Idle"
          },
          "meta": {
            "reason": "clickSignup | navigate RegisterForActivityFeature",
            "action": "clickSignup",
            "navigateTarget": "RegisterForActivityFeature",
            "validations": [
              "Admin 可進入報名 Feature；規則同 Member；不得繞過容量/截止/狀態限制。"
            ]
          }
        },
        {
          "id": "c.feature_register_for_activity.invokes.page_activity_detail.s.feature_RegisterForActivityFeature_Succeeded.to.page_ActivityDetailPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_register_for_activity",
            "stateId": "feature.RegisterForActivityFeature.Succeeded"
          },
          "to": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Init"
          },
          "meta": {
            "reason": "refreshDetail | navigate /activities/:activityId",
            "action": "refreshDetail",
            "navigateTarget": "/activities/:activityId",
            "validations": [
              "成功後回到活動詳情並重新載入；詳情顯示「已報名」；有效報名數 +1；列表/我的活動/後台一致。"
            ]
          }
        },
        {
          "id": "c.feature_register_for_activity.invokes.page_activity_detail.s.feature_RegisterForActivityFeature_Failed.to.page_ActivityDetailPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_register_for_activity",
            "stateId": "feature.RegisterForActivityFeature.Failed"
          },
          "to": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Init"
          },
          "meta": {
            "reason": "showReasonReturn | navigate /activities/:activityId",
            "action": "showReasonReturn",
            "navigateTarget": "/activities/:activityId",
            "validations": [
              "失敗後回到詳情並顯示原因（額滿/已截止/已開始/狀態非 published 等）；不得顯示成成功狀態。"
            ]
          }
        },
        {
          "id": "c.feature_register_for_activity.invokes.page_login.s.feature_RegisterForActivityFeature_Unauthorized.to.page_LoginPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_register_for_activity",
            "stateId": "feature.RegisterForActivityFeature.Unauthorized"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Init"
          },
          "meta": {
            "reason": "goLogin | navigate /login",
            "action": "goLogin",
            "navigateTarget": "/login",
            "validations": [
              "導向登入頁；登入後可回跳到原活動詳情並再次嘗試。"
            ]
          }
        },
        {
          "id": "c.feature_register_for_activity.invokes.page_forbidden.s.feature_RegisterForActivityFeature_Forbidden.to.page_ForbiddenPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_register_for_activity",
            "stateId": "feature.RegisterForActivityFeature.Forbidden"
          },
          "to": {
            "diagramId": "page_forbidden",
            "stateId": "page.ForbiddenPage.Init"
          },
          "meta": {
            "reason": "showForbidden | navigate /403",
            "action": "showForbidden",
            "navigateTarget": "/403",
            "validations": [
              "顯示 403；不洩漏內部資訊。"
            ]
          }
        },
        {
          "id": "c.feature_register_for_activity.invokes.page_not_found.s.feature_RegisterForActivityFeature_NotFound.to.page_NotFoundPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_register_for_activity",
            "stateId": "feature.RegisterForActivityFeature.NotFound"
          },
          "to": {
            "diagramId": "page_not_found",
            "stateId": "page.NotFoundPage.Init"
          },
          "meta": {
            "reason": "showNotFound | navigate /404",
            "action": "showNotFound",
            "navigateTarget": "/404",
            "validations": [
              "顯示 404；不洩漏活動非公開狀態。"
            ]
          }
        },
        {
          "id": "c.feature_register_for_activity.invokes.page_error.s.feature_RegisterForActivityFeature_Error.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_register_for_activity",
            "stateId": "feature.RegisterForActivityFeature.Error"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "不可恢復錯誤導向錯誤頁；可回到活動列表。"
            ]
          }
        },
        {
          "id": "c.page_entry.contains.feature_register_for_activity",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "feature_register_for_activity",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": null,
        "featureName": "RegisterForActivityFeature",
        "entryStateId": "feature.RegisterForActivityFeature.Idle"
      }
    },
    {
      "id": "feature_cancel_registration",
      "name": "CancelRegistrationFeature",
      "level": "feature",
      "parentDiagramId": "page_entry",
      "roles": [],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "⑮ CancelRegistrationFeature（取消報名）",
        "order": 15
      },
      "groups": [],
      "states": [
        {
          "id": "feature.CancelRegistrationFeature.Idle",
          "label": "Idle",
          "type": "start",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_cancel_registration",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "CancelRegistrationFeature.Idle"
            }
          }
        },
        {
          "id": "feature.CancelRegistrationFeature.Precheck",
          "label": "Precheck",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_cancel_registration",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "CancelRegistrationFeature.Precheck"
            }
          }
        },
        {
          "id": "feature.CancelRegistrationFeature.Submitting",
          "label": "Submitting",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_cancel_registration",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "CancelRegistrationFeature.Submitting"
            }
          }
        },
        {
          "id": "feature.CancelRegistrationFeature.Succeeded",
          "label": "Succeeded",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_cancel_registration",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "CancelRegistrationFeature.Succeeded"
            }
          }
        },
        {
          "id": "feature.CancelRegistrationFeature.Failed",
          "label": "Failed",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_cancel_registration",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "CancelRegistrationFeature.Failed"
            }
          }
        },
        {
          "id": "feature.CancelRegistrationFeature.Unauthorized",
          "label": "Unauthorized",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_cancel_registration",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "CancelRegistrationFeature.Unauthorized"
            }
          }
        },
        {
          "id": "feature.CancelRegistrationFeature.Forbidden",
          "label": "Forbidden",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_cancel_registration",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "CancelRegistrationFeature.Forbidden"
            }
          }
        },
        {
          "id": "feature.CancelRegistrationFeature.NotFound",
          "label": "NotFound",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_cancel_registration",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "CancelRegistrationFeature.NotFound"
            }
          }
        },
        {
          "id": "feature.CancelRegistrationFeature.Error",
          "label": "Error",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_cancel_registration",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "CancelRegistrationFeature.Error"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.feature_cancel_registration.0001",
          "from": "feature.CancelRegistrationFeature.Idle",
          "to": "feature.CancelRegistrationFeature.Idle",
          "event": "enterFeature",
          "roles": [],
          "validations": [
            "進入取消 Feature Entry State；尚未送出 API；UI 顯示提交流程。"
          ],
          "intent": {
            "category": "action",
            "summary": "enterFeature"
          },
          "meta": {
            "diagramId": "feature_cancel_registration",
            "source": {
              "raw": "[*] --> CancelRegistrationFeature.Idle : enterFeature"
            }
          }
        },
        {
          "id": "t.feature_cancel_registration.0002",
          "from": "feature.CancelRegistrationFeature.Idle",
          "to": "feature.CancelRegistrationFeature.Precheck",
          "event": "precheck",
          "roles": [],
          "validations": [
            "前置檢查包含：本人有有效報名、now < deadline、now < date；任一不符則不可送出取消。"
          ],
          "intent": {
            "category": "action",
            "summary": "precheck"
          },
          "meta": {
            "diagramId": "feature_cancel_registration",
            "source": {
              "raw": "CancelRegistrationFeature.Idle --> CancelRegistrationFeature.Precheck : precheck"
            }
          }
        },
        {
          "id": "t.feature_cancel_registration.0003",
          "from": "feature.CancelRegistrationFeature.Precheck",
          "to": "feature.CancelRegistrationFeature.Submitting",
          "event": "submit",
          "roles": [],
          "validations": [
            "前置檢查通過才送取消 API；提交期間按鈕 disabled、防重送；重複取消需保持冪等。"
          ],
          "intent": {
            "category": "action",
            "summary": "submit"
          },
          "meta": {
            "diagramId": "feature_cancel_registration",
            "source": {
              "raw": "CancelRegistrationFeature.Precheck --> CancelRegistrationFeature.Submitting : submit"
            }
          }
        },
        {
          "id": "t.feature_cancel_registration.0004",
          "from": "feature.CancelRegistrationFeature.Submitting",
          "to": "feature.CancelRegistrationFeature.Succeeded",
          "event": "api200",
          "roles": [],
          "validations": [
            "API 回 200；有效報名變為取消（canceled_at 設定）；有效報名數 -1；若原本 full 且未 closed 且仍可報名，狀態可回 published。"
          ],
          "intent": {
            "category": "action",
            "summary": "api200"
          },
          "meta": {
            "diagramId": "feature_cancel_registration",
            "source": {
              "raw": "CancelRegistrationFeature.Submitting --> CancelRegistrationFeature.Succeeded : api200"
            }
          }
        },
        {
          "id": "t.feature_cancel_registration.0005",
          "from": "feature.CancelRegistrationFeature.Submitting",
          "to": "feature.CancelRegistrationFeature.Failed",
          "event": "api400",
          "roles": [],
          "validations": [
            "API 回 400（已截止/已開始/無有效報名等）；不變更資料；UI 顯示具體原因。"
          ],
          "intent": {
            "category": "action",
            "summary": "api400"
          },
          "meta": {
            "diagramId": "feature_cancel_registration",
            "source": {
              "raw": "CancelRegistrationFeature.Submitting --> CancelRegistrationFeature.Failed : api400"
            }
          }
        },
        {
          "id": "t.feature_cancel_registration.0006",
          "from": "feature.CancelRegistrationFeature.Submitting",
          "to": "feature.CancelRegistrationFeature.Unauthorized",
          "event": "api401",
          "roles": [],
          "validations": [
            "API 回 401；不變更資料；導向登入並保留 redirect。"
          ],
          "intent": {
            "category": "action",
            "summary": "api401"
          },
          "meta": {
            "diagramId": "feature_cancel_registration",
            "source": {
              "raw": "CancelRegistrationFeature.Submitting --> CancelRegistrationFeature.Unauthorized : api401"
            }
          }
        },
        {
          "id": "t.feature_cancel_registration.0007",
          "from": "feature.CancelRegistrationFeature.Submitting",
          "to": "feature.CancelRegistrationFeature.Forbidden",
          "event": "api403",
          "roles": [],
          "validations": [
            "API 回 403；不變更資料；導向 403。"
          ],
          "intent": {
            "category": "action",
            "summary": "api403"
          },
          "meta": {
            "diagramId": "feature_cancel_registration",
            "source": {
              "raw": "CancelRegistrationFeature.Submitting --> CancelRegistrationFeature.Forbidden : api403"
            }
          }
        },
        {
          "id": "t.feature_cancel_registration.0008",
          "from": "feature.CancelRegistrationFeature.Submitting",
          "to": "feature.CancelRegistrationFeature.NotFound",
          "event": "api404",
          "roles": [],
          "validations": [
            "API 回 404（活動不存在或報名不存在）；不變更資料；導向 404。"
          ],
          "intent": {
            "category": "action",
            "summary": "api404"
          },
          "meta": {
            "diagramId": "feature_cancel_registration",
            "source": {
              "raw": "CancelRegistrationFeature.Submitting --> CancelRegistrationFeature.NotFound : api404"
            }
          }
        },
        {
          "id": "t.feature_cancel_registration.0009",
          "from": "feature.CancelRegistrationFeature.Submitting",
          "to": "feature.CancelRegistrationFeature.Error",
          "event": "api5xx",
          "roles": [],
          "validations": [
            "API 回 5xx/網路錯誤；UI 顯示可重試；資料一致性需以重新載入確認。"
          ],
          "intent": {
            "category": "action",
            "summary": "api5xx"
          },
          "meta": {
            "diagramId": "feature_cancel_registration",
            "source": {
              "raw": "CancelRegistrationFeature.Submitting --> CancelRegistrationFeature.Error : api5xx"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_activity_detail.invokes.feature_cancel_registration.s.page_ActivityDetailPage_Ready_Member.to.feature_CancelRegistrationFeature_Idle",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Ready.Member"
          },
          "to": {
            "diagramId": "feature_cancel_registration",
            "stateId": "feature.CancelRegistrationFeature.Idle"
          },
          "meta": {
            "reason": "clickCancelSignup | navigate CancelRegistrationFeature",
            "action": "clickCancelSignup",
            "navigateTarget": "CancelRegistrationFeature",
            "validations": [
              "僅在本人已報名且符合取消規則時 UI 顯示此入口；不符合時必隱藏或 disabled 並顯示原因。"
            ]
          }
        },
        {
          "id": "c.page_activity_detail.invokes.feature_cancel_registration.s.page_ActivityDetailPage_Ready_Admin.to.feature_CancelRegistrationFeature_Idle",
          "type": "invokes",
          "from": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Ready.Admin"
          },
          "to": {
            "diagramId": "feature_cancel_registration",
            "stateId": "feature.CancelRegistrationFeature.Idle"
          },
          "meta": {
            "reason": "clickCancelSignup | navigate CancelRegistrationFeature",
            "action": "clickCancelSignup",
            "navigateTarget": "CancelRegistrationFeature",
            "validations": [
              "Admin 的取消規則同 Member；僅能取消自己報名（非管理員代取消功能，除非 Spec 另定）。"
            ]
          }
        },
        {
          "id": "c.feature_cancel_registration.invokes.page_activity_detail.s.feature_CancelRegistrationFeature_Succeeded.to.page_ActivityDetailPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_cancel_registration",
            "stateId": "feature.CancelRegistrationFeature.Succeeded"
          },
          "to": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Init"
          },
          "meta": {
            "reason": "refreshDetail | navigate /activities/:activityId",
            "action": "refreshDetail",
            "navigateTarget": "/activities/:activityId",
            "validations": [
              "回到詳情並重新載入；詳情不再顯示「已報名」；我的活動移除該活動；後台名單與匯出一致更新。"
            ]
          }
        },
        {
          "id": "c.feature_cancel_registration.invokes.page_activity_detail.s.feature_CancelRegistrationFeature_Failed.to.page_ActivityDetailPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_cancel_registration",
            "stateId": "feature.CancelRegistrationFeature.Failed"
          },
          "to": {
            "diagramId": "page_activity_detail",
            "stateId": "page.ActivityDetailPage.Init"
          },
          "meta": {
            "reason": "showReasonReturn | navigate /activities/:activityId",
            "action": "showReasonReturn",
            "navigateTarget": "/activities/:activityId",
            "validations": [
              "回到詳情並顯示原因；不得誤顯示取消成功。"
            ]
          }
        },
        {
          "id": "c.feature_cancel_registration.invokes.page_login.s.feature_CancelRegistrationFeature_Unauthorized.to.page_LoginPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_cancel_registration",
            "stateId": "feature.CancelRegistrationFeature.Unauthorized"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Init"
          },
          "meta": {
            "reason": "goLogin | navigate /login",
            "action": "goLogin",
            "navigateTarget": "/login",
            "validations": [
              "導向登入；登入後回跳仍需重新檢查取消條件。"
            ]
          }
        },
        {
          "id": "c.feature_cancel_registration.invokes.page_forbidden.s.feature_CancelRegistrationFeature_Forbidden.to.page_ForbiddenPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_cancel_registration",
            "stateId": "feature.CancelRegistrationFeature.Forbidden"
          },
          "to": {
            "diagramId": "page_forbidden",
            "stateId": "page.ForbiddenPage.Init"
          },
          "meta": {
            "reason": "showForbidden | navigate /403",
            "action": "showForbidden",
            "navigateTarget": "/403",
            "validations": [
              "顯示 403；不洩漏敏感資訊。"
            ]
          }
        },
        {
          "id": "c.feature_cancel_registration.invokes.page_not_found.s.feature_CancelRegistrationFeature_NotFound.to.page_NotFoundPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_cancel_registration",
            "stateId": "feature.CancelRegistrationFeature.NotFound"
          },
          "to": {
            "diagramId": "page_not_found",
            "stateId": "page.NotFoundPage.Init"
          },
          "meta": {
            "reason": "showNotFound | navigate /404",
            "action": "showNotFound",
            "navigateTarget": "/404",
            "validations": [
              "顯示 404；不洩漏活動是否為非公開狀態。"
            ]
          }
        },
        {
          "id": "c.feature_cancel_registration.invokes.page_error.s.feature_CancelRegistrationFeature_Error.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_cancel_registration",
            "stateId": "feature.CancelRegistrationFeature.Error"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "不可恢復錯誤導向錯誤頁。"
            ]
          }
        },
        {
          "id": "c.page_entry.contains.feature_cancel_registration",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "feature_cancel_registration",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": null,
        "featureName": "CancelRegistrationFeature",
        "entryStateId": "feature.CancelRegistrationFeature.Idle"
      }
    },
    {
      "id": "feature_admin_upsert_activity",
      "name": "AdminUpsertActivityFeature",
      "level": "feature",
      "parentDiagramId": "page_entry",
      "roles": [],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "⑯ AdminUpsertActivityFeature（建立/編輯活動）",
        "order": 16
      },
      "groups": [],
      "states": [
        {
          "id": "feature.AdminUpsertActivityFeature.Idle",
          "label": "Idle",
          "type": "start",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_upsert_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminUpsertActivityFeature.Idle"
            }
          }
        },
        {
          "id": "feature.AdminUpsertActivityFeature.Editing",
          "label": "Editing",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_upsert_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminUpsertActivityFeature.Editing"
            }
          }
        },
        {
          "id": "feature.AdminUpsertActivityFeature.Validating",
          "label": "Validating",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_upsert_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminUpsertActivityFeature.Validating"
            }
          }
        },
        {
          "id": "feature.AdminUpsertActivityFeature.Saving",
          "label": "Saving",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_upsert_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminUpsertActivityFeature.Saving"
            }
          }
        },
        {
          "id": "feature.AdminUpsertActivityFeature.Succeeded",
          "label": "Succeeded",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_upsert_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminUpsertActivityFeature.Succeeded"
            }
          }
        },
        {
          "id": "feature.AdminUpsertActivityFeature.Failed",
          "label": "Failed",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_upsert_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminUpsertActivityFeature.Failed"
            }
          }
        },
        {
          "id": "feature.AdminUpsertActivityFeature.Unauthorized",
          "label": "Unauthorized",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_upsert_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminUpsertActivityFeature.Unauthorized"
            }
          }
        },
        {
          "id": "feature.AdminUpsertActivityFeature.Forbidden",
          "label": "Forbidden",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_upsert_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminUpsertActivityFeature.Forbidden"
            }
          }
        },
        {
          "id": "feature.AdminUpsertActivityFeature.Error",
          "label": "Error",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_upsert_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminUpsertActivityFeature.Error"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.feature_admin_upsert_activity.0001",
          "from": "feature.AdminUpsertActivityFeature.Idle",
          "to": "feature.AdminUpsertActivityFeature.Idle",
          "event": "enterFeature",
          "roles": [],
          "validations": [
            "進入建立/編輯 Feature Entry State；僅 Admin 可到達；非 Admin 在路由/後端都必須被阻擋。"
          ],
          "intent": {
            "category": "action",
            "summary": "enterFeature"
          },
          "meta": {
            "diagramId": "feature_admin_upsert_activity",
            "source": {
              "raw": "[*] --> AdminUpsertActivityFeature.Idle : enterFeature"
            }
          }
        },
        {
          "id": "t.feature_admin_upsert_activity.0002",
          "from": "feature.AdminUpsertActivityFeature.Idle",
          "to": "feature.AdminUpsertActivityFeature.Editing",
          "event": "openForm",
          "roles": [],
          "validations": [
            "打開表單；欄位包含 title/description/date/location/deadline/capacity；若為編輯需載入既有資料。"
          ],
          "intent": {
            "category": "action",
            "summary": "openForm"
          },
          "meta": {
            "diagramId": "feature_admin_upsert_activity",
            "source": {
              "raw": "AdminUpsertActivityFeature.Idle --> AdminUpsertActivityFeature.Editing : openForm"
            }
          }
        },
        {
          "id": "t.feature_admin_upsert_activity.0003",
          "from": "feature.AdminUpsertActivityFeature.Editing",
          "to": "feature.AdminUpsertActivityFeature.Validating",
          "event": "validate",
          "roles": [],
          "validations": [
            "前端驗證必填與格式；包含 date > deadline、capacity 為正整數；驗證失敗不送 API。"
          ],
          "intent": {
            "category": "action",
            "summary": "validate"
          },
          "meta": {
            "diagramId": "feature_admin_upsert_activity",
            "source": {
              "raw": "AdminUpsertActivityFeature.Editing --> AdminUpsertActivityFeature.Validating : validate"
            }
          }
        },
        {
          "id": "t.feature_admin_upsert_activity.0004",
          "from": "feature.AdminUpsertActivityFeature.Validating",
          "to": "feature.AdminUpsertActivityFeature.Saving",
          "event": "submit",
          "roles": [],
          "validations": [
            "驗證通過才送出建立/更新 API；提交期間按鈕 disabled；避免重複提交。"
          ],
          "intent": {
            "category": "action",
            "summary": "submit"
          },
          "meta": {
            "diagramId": "feature_admin_upsert_activity",
            "source": {
              "raw": "AdminUpsertActivityFeature.Validating --> AdminUpsertActivityFeature.Saving : submit"
            }
          }
        },
        {
          "id": "t.feature_admin_upsert_activity.0005",
          "from": "feature.AdminUpsertActivityFeature.Saving",
          "to": "feature.AdminUpsertActivityFeature.Succeeded",
          "event": "api200or201",
          "roles": [],
          "validations": [
            "API 回 200（更新）或 201（建立）；活動狀態預設為 draft（建立時）；updated_at 更新（更新時）；寫入稽核紀錄。"
          ],
          "intent": {
            "category": "action",
            "summary": "api200or201"
          },
          "meta": {
            "diagramId": "feature_admin_upsert_activity",
            "source": {
              "raw": "AdminUpsertActivityFeature.Saving --> AdminUpsertActivityFeature.Succeeded : api200or201"
            }
          }
        },
        {
          "id": "t.feature_admin_upsert_activity.0006",
          "from": "feature.AdminUpsertActivityFeature.Saving",
          "to": "feature.AdminUpsertActivityFeature.Failed",
          "event": "api400",
          "roles": [],
          "validations": [
            "API 回 400（驗證失敗）；不寫入資料；UI 顯示欄位/規則錯誤。"
          ],
          "intent": {
            "category": "action",
            "summary": "api400"
          },
          "meta": {
            "diagramId": "feature_admin_upsert_activity",
            "source": {
              "raw": "AdminUpsertActivityFeature.Saving --> AdminUpsertActivityFeature.Failed : api400"
            }
          }
        },
        {
          "id": "t.feature_admin_upsert_activity.0007",
          "from": "feature.AdminUpsertActivityFeature.Saving",
          "to": "feature.AdminUpsertActivityFeature.Unauthorized",
          "event": "api401",
          "roles": [],
          "validations": [
            "API 回 401；不寫入；導向登入並保留 redirect 回後台。"
          ],
          "intent": {
            "category": "action",
            "summary": "api401"
          },
          "meta": {
            "diagramId": "feature_admin_upsert_activity",
            "source": {
              "raw": "AdminUpsertActivityFeature.Saving --> AdminUpsertActivityFeature.Unauthorized : api401"
            }
          }
        },
        {
          "id": "t.feature_admin_upsert_activity.0008",
          "from": "feature.AdminUpsertActivityFeature.Saving",
          "to": "feature.AdminUpsertActivityFeature.Forbidden",
          "event": "api403",
          "roles": [],
          "validations": [
            "API 回 403；不寫入；顯示 403。"
          ],
          "intent": {
            "category": "action",
            "summary": "api403"
          },
          "meta": {
            "diagramId": "feature_admin_upsert_activity",
            "source": {
              "raw": "AdminUpsertActivityFeature.Saving --> AdminUpsertActivityFeature.Forbidden : api403"
            }
          }
        },
        {
          "id": "t.feature_admin_upsert_activity.0009",
          "from": "feature.AdminUpsertActivityFeature.Saving",
          "to": "feature.AdminUpsertActivityFeature.Error",
          "event": "api5xx",
          "roles": [],
          "validations": [
            "API 回 5xx/網路錯誤；不寫入（或需以重新載入確認）；UI 顯示可重試。"
          ],
          "intent": {
            "category": "action",
            "summary": "api5xx"
          },
          "meta": {
            "diagramId": "feature_admin_upsert_activity",
            "source": {
              "raw": "AdminUpsertActivityFeature.Saving --> AdminUpsertActivityFeature.Error : api5xx"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_admin_activity_list.invokes.feature_admin_upsert_activity.s.page_AdminActivityListPage_Ready_Admin.to.feature_AdminUpsertActivityFeature_Idle",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Ready.Admin"
          },
          "to": {
            "diagramId": "feature_admin_upsert_activity",
            "stateId": "feature.AdminUpsertActivityFeature.Idle"
          },
          "meta": {
            "reason": "clickCreateActivity | navigate AdminUpsertActivityFeature",
            "action": "clickCreateActivity",
            "navigateTarget": "AdminUpsertActivityFeature",
            "validations": [
              "點擊建立活動會進入建立/編輯 Feature；預設狀態為 draft；表單包含 title/description/date/location/deadline/capacity。"
            ]
          }
        },
        {
          "id": "c.page_admin_activity_list.invokes.feature_admin_upsert_activity.s.page_AdminActivityListPage_Empty.to.feature_AdminUpsertActivityFeature_Idle",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Empty"
          },
          "to": {
            "diagramId": "feature_admin_upsert_activity",
            "stateId": "feature.AdminUpsertActivityFeature.Idle"
          },
          "meta": {
            "reason": "clickCreateFromEmpty | navigate AdminUpsertActivityFeature",
            "action": "clickCreateFromEmpty",
            "navigateTarget": "AdminUpsertActivityFeature",
            "validations": [
              "Empty 狀態建立活動入口可用；進入 Feature 後可提交建立。"
            ]
          }
        },
        {
          "id": "c.feature_admin_upsert_activity.invokes.page_admin_activity_list.s.feature_AdminUpsertActivityFeature_Succeeded.to.page_AdminActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_upsert_activity",
            "stateId": "feature.AdminUpsertActivityFeature.Succeeded"
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Init"
          },
          "meta": {
            "reason": "refreshAdminList | navigate /admin/activities",
            "action": "refreshAdminList",
            "navigateTarget": "/admin/activities",
            "validations": [
              "返回後台列表並重新載入；可看到新/更新活動；列表狀態與資料一致。"
            ]
          }
        },
        {
          "id": "c.feature_admin_upsert_activity.invokes.page_admin_activity_list.s.feature_AdminUpsertActivityFeature_Failed.to.page_AdminActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_upsert_activity",
            "stateId": "feature.AdminUpsertActivityFeature.Failed"
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Init"
          },
          "meta": {
            "reason": "showErrorReturn | navigate /admin/activities",
            "action": "showErrorReturn",
            "navigateTarget": "/admin/activities",
            "validations": [
              "返回後台列表（或停留表單）需顯示錯誤；不得誤顯示成功；資料不變。"
            ]
          }
        },
        {
          "id": "c.feature_admin_upsert_activity.invokes.page_login.s.feature_AdminUpsertActivityFeature_Unauthorized.to.page_LoginPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_upsert_activity",
            "stateId": "feature.AdminUpsertActivityFeature.Unauthorized"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Init"
          },
          "meta": {
            "reason": "goLogin | navigate /login",
            "action": "goLogin",
            "navigateTarget": "/login",
            "validations": [
              "導向登入；登入後返回後台需再次通過 RBAC。"
            ]
          }
        },
        {
          "id": "c.feature_admin_upsert_activity.invokes.page_forbidden.s.feature_AdminUpsertActivityFeature_Forbidden.to.page_ForbiddenPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_upsert_activity",
            "stateId": "feature.AdminUpsertActivityFeature.Forbidden"
          },
          "to": {
            "diagramId": "page_forbidden",
            "stateId": "page.ForbiddenPage.Init"
          },
          "meta": {
            "reason": "showForbidden | navigate /403",
            "action": "showForbidden",
            "navigateTarget": "/403",
            "validations": [
              "顯示 403；後台資料不外洩。"
            ]
          }
        },
        {
          "id": "c.feature_admin_upsert_activity.invokes.page_error.s.feature_AdminUpsertActivityFeature_Error.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_upsert_activity",
            "stateId": "feature.AdminUpsertActivityFeature.Error"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "不可恢復錯誤導向錯誤頁。"
            ]
          }
        },
        {
          "id": "c.page_entry.contains.feature_admin_upsert_activity",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "feature_admin_upsert_activity",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": null,
        "featureName": "AdminUpsertActivityFeature",
        "entryStateId": "feature.AdminUpsertActivityFeature.Idle"
      }
    },
    {
      "id": "feature_admin_publish_activity",
      "name": "AdminPublishActivityFeature",
      "level": "feature",
      "parentDiagramId": "page_entry",
      "roles": [],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "⑰ AdminPublishActivityFeature（發佈活動）",
        "order": 17
      },
      "groups": [],
      "states": [
        {
          "id": "feature.AdminPublishActivityFeature.Idle",
          "label": "Idle",
          "type": "start",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_publish_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminPublishActivityFeature.Idle"
            }
          }
        },
        {
          "id": "feature.AdminPublishActivityFeature.Submitting",
          "label": "Submitting",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_publish_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminPublishActivityFeature.Submitting"
            }
          }
        },
        {
          "id": "feature.AdminPublishActivityFeature.Succeeded",
          "label": "Succeeded",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_publish_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminPublishActivityFeature.Succeeded"
            }
          }
        },
        {
          "id": "feature.AdminPublishActivityFeature.Failed",
          "label": "Failed",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_publish_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminPublishActivityFeature.Failed"
            }
          }
        },
        {
          "id": "feature.AdminPublishActivityFeature.Unauthorized",
          "label": "Unauthorized",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_publish_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminPublishActivityFeature.Unauthorized"
            }
          }
        },
        {
          "id": "feature.AdminPublishActivityFeature.Forbidden",
          "label": "Forbidden",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_publish_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminPublishActivityFeature.Forbidden"
            }
          }
        },
        {
          "id": "feature.AdminPublishActivityFeature.NotFound",
          "label": "NotFound",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_publish_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminPublishActivityFeature.NotFound"
            }
          }
        },
        {
          "id": "feature.AdminPublishActivityFeature.Error",
          "label": "Error",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_publish_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminPublishActivityFeature.Error"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.feature_admin_publish_activity.0001",
          "from": "feature.AdminPublishActivityFeature.Idle",
          "to": "feature.AdminPublishActivityFeature.Idle",
          "event": "enterFeature",
          "roles": [],
          "validations": [
            "進入發佈 Feature Entry State；僅 Admin 可到達。"
          ],
          "intent": {
            "category": "action",
            "summary": "enterFeature"
          },
          "meta": {
            "diagramId": "feature_admin_publish_activity",
            "source": {
              "raw": "[*] --> AdminPublishActivityFeature.Idle : enterFeature"
            }
          }
        },
        {
          "id": "t.feature_admin_publish_activity.0002",
          "from": "feature.AdminPublishActivityFeature.Idle",
          "to": "feature.AdminPublishActivityFeature.Submitting",
          "event": "submit",
          "roles": [],
          "validations": [
            "送出發佈 API；提交期間按鈕 disabled；僅允許 draft → published。"
          ],
          "intent": {
            "category": "action",
            "summary": "submit"
          },
          "meta": {
            "diagramId": "feature_admin_publish_activity",
            "source": {
              "raw": "AdminPublishActivityFeature.Idle --> AdminPublishActivityFeature.Submitting : submit"
            }
          }
        },
        {
          "id": "t.feature_admin_publish_activity.0003",
          "from": "feature.AdminPublishActivityFeature.Submitting",
          "to": "feature.AdminPublishActivityFeature.Succeeded",
          "event": "api200",
          "roles": [],
          "validations": [
            "API 回 200；活動狀態變為 published；寫入稽核紀錄；公開列表/公開詳情可見。"
          ],
          "intent": {
            "category": "action",
            "summary": "api200"
          },
          "meta": {
            "diagramId": "feature_admin_publish_activity",
            "source": {
              "raw": "AdminPublishActivityFeature.Submitting --> AdminPublishActivityFeature.Succeeded : api200"
            }
          }
        },
        {
          "id": "t.feature_admin_publish_activity.0004",
          "from": "feature.AdminPublishActivityFeature.Submitting",
          "to": "feature.AdminPublishActivityFeature.Failed",
          "event": "api400",
          "roles": [],
          "validations": [
            "API 回 400（不合法轉換或資料不完整）；狀態不變；UI 顯示原因。"
          ],
          "intent": {
            "category": "action",
            "summary": "api400"
          },
          "meta": {
            "diagramId": "feature_admin_publish_activity",
            "source": {
              "raw": "AdminPublishActivityFeature.Submitting --> AdminPublishActivityFeature.Failed : api400"
            }
          }
        },
        {
          "id": "t.feature_admin_publish_activity.0005",
          "from": "feature.AdminPublishActivityFeature.Submitting",
          "to": "feature.AdminPublishActivityFeature.Unauthorized",
          "event": "api401",
          "roles": [],
          "validations": [
            "API 回 401；不變更；導向登入。"
          ],
          "intent": {
            "category": "action",
            "summary": "api401"
          },
          "meta": {
            "diagramId": "feature_admin_publish_activity",
            "source": {
              "raw": "AdminPublishActivityFeature.Submitting --> AdminPublishActivityFeature.Unauthorized : api401"
            }
          }
        },
        {
          "id": "t.feature_admin_publish_activity.0006",
          "from": "feature.AdminPublishActivityFeature.Submitting",
          "to": "feature.AdminPublishActivityFeature.Forbidden",
          "event": "api403",
          "roles": [],
          "validations": [
            "API 回 403；不變更；顯示 403。"
          ],
          "intent": {
            "category": "action",
            "summary": "api403"
          },
          "meta": {
            "diagramId": "feature_admin_publish_activity",
            "source": {
              "raw": "AdminPublishActivityFeature.Submitting --> AdminPublishActivityFeature.Forbidden : api403"
            }
          }
        },
        {
          "id": "t.feature_admin_publish_activity.0007",
          "from": "feature.AdminPublishActivityFeature.Submitting",
          "to": "feature.AdminPublishActivityFeature.NotFound",
          "event": "api404",
          "roles": [],
          "validations": [
            "API 回 404（活動不存在）；顯示 404；不變更。"
          ],
          "intent": {
            "category": "action",
            "summary": "api404"
          },
          "meta": {
            "diagramId": "feature_admin_publish_activity",
            "source": {
              "raw": "AdminPublishActivityFeature.Submitting --> AdminPublishActivityFeature.NotFound : api404"
            }
          }
        },
        {
          "id": "t.feature_admin_publish_activity.0008",
          "from": "feature.AdminPublishActivityFeature.Submitting",
          "to": "feature.AdminPublishActivityFeature.Error",
          "event": "api5xx",
          "roles": [],
          "validations": [
            "5xx/網路錯誤；UI 顯示可重試；狀態是否改變需以重新載入確認。"
          ],
          "intent": {
            "category": "action",
            "summary": "api5xx"
          },
          "meta": {
            "diagramId": "feature_admin_publish_activity",
            "source": {
              "raw": "AdminPublishActivityFeature.Submitting --> AdminPublishActivityFeature.Error : api5xx"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_admin_activity_list.invokes.feature_admin_publish_activity.s.page_AdminActivityListPage_Ready_Admin.to.feature_AdminPublishActivityFeature_Idle",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Ready.Admin"
          },
          "to": {
            "diagramId": "feature_admin_publish_activity",
            "stateId": "feature.AdminPublishActivityFeature.Idle"
          },
          "meta": {
            "reason": "clickPublish | navigate AdminPublishActivityFeature",
            "action": "clickPublish",
            "navigateTarget": "AdminPublishActivityFeature",
            "validations": [
              "僅 draft 可發佈；不符合時 UI 需阻擋或後端回 400；成功後狀態變為 published。"
            ]
          }
        },
        {
          "id": "c.feature_admin_publish_activity.invokes.page_admin_activity_list.s.feature_AdminPublishActivityFeature_Succeeded.to.page_AdminActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_publish_activity",
            "stateId": "feature.AdminPublishActivityFeature.Succeeded"
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Init"
          },
          "meta": {
            "reason": "refreshAdminList | navigate /admin/activities",
            "action": "refreshAdminList",
            "navigateTarget": "/admin/activities",
            "validations": [
              "返回後台列表並刷新；該活動顯示 published；有效報名數顯示一致。"
            ]
          }
        },
        {
          "id": "c.feature_admin_publish_activity.invokes.page_admin_activity_list.s.feature_AdminPublishActivityFeature_Failed.to.page_AdminActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_publish_activity",
            "stateId": "feature.AdminPublishActivityFeature.Failed"
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Init"
          },
          "meta": {
            "reason": "showReasonReturn | navigate /admin/activities",
            "action": "showReasonReturn",
            "navigateTarget": "/admin/activities",
            "validations": [
              "返回後台列表（或留在原處）需顯示原因；不得誤顯示發佈成功。"
            ]
          }
        },
        {
          "id": "c.feature_admin_publish_activity.invokes.page_login.s.feature_AdminPublishActivityFeature_Unauthorized.to.page_LoginPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_publish_activity",
            "stateId": "feature.AdminPublishActivityFeature.Unauthorized"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Init"
          },
          "meta": {
            "reason": "goLogin | navigate /login",
            "action": "goLogin",
            "navigateTarget": "/login",
            "validations": [
              "導向登入；登入後回後台需通過 RBAC。"
            ]
          }
        },
        {
          "id": "c.feature_admin_publish_activity.invokes.page_forbidden.s.feature_AdminPublishActivityFeature_Forbidden.to.page_ForbiddenPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_publish_activity",
            "stateId": "feature.AdminPublishActivityFeature.Forbidden"
          },
          "to": {
            "diagramId": "page_forbidden",
            "stateId": "page.ForbiddenPage.Init"
          },
          "meta": {
            "reason": "showForbidden | navigate /403",
            "action": "showForbidden",
            "navigateTarget": "/403",
            "validations": [
              "顯示 403。"
            ]
          }
        },
        {
          "id": "c.feature_admin_publish_activity.invokes.page_not_found.s.feature_AdminPublishActivityFeature_NotFound.to.page_NotFoundPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_publish_activity",
            "stateId": "feature.AdminPublishActivityFeature.NotFound"
          },
          "to": {
            "diagramId": "page_not_found",
            "stateId": "page.NotFoundPage.Init"
          },
          "meta": {
            "reason": "showNotFound | navigate /404",
            "action": "showNotFound",
            "navigateTarget": "/404",
            "validations": [
              "顯示 404。"
            ]
          }
        },
        {
          "id": "c.feature_admin_publish_activity.invokes.page_error.s.feature_AdminPublishActivityFeature_Error.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_publish_activity",
            "stateId": "feature.AdminPublishActivityFeature.Error"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "不可恢復錯誤導向錯誤頁。"
            ]
          }
        },
        {
          "id": "c.page_entry.contains.feature_admin_publish_activity",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "feature_admin_publish_activity",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": null,
        "featureName": "AdminPublishActivityFeature",
        "entryStateId": "feature.AdminPublishActivityFeature.Idle"
      }
    },
    {
      "id": "feature_admin_close_registration",
      "name": "AdminCloseRegistrationFeature",
      "level": "feature",
      "parentDiagramId": "page_entry",
      "roles": [],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "⑱ AdminCloseRegistrationFeature（手動關閉報名）",
        "order": 18
      },
      "groups": [],
      "states": [
        {
          "id": "feature.AdminCloseRegistrationFeature.Idle",
          "label": "Idle",
          "type": "start",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_close_registration",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminCloseRegistrationFeature.Idle"
            }
          }
        },
        {
          "id": "feature.AdminCloseRegistrationFeature.Submitting",
          "label": "Submitting",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_close_registration",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminCloseRegistrationFeature.Submitting"
            }
          }
        },
        {
          "id": "feature.AdminCloseRegistrationFeature.Succeeded",
          "label": "Succeeded",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_close_registration",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminCloseRegistrationFeature.Succeeded"
            }
          }
        },
        {
          "id": "feature.AdminCloseRegistrationFeature.Failed",
          "label": "Failed",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_close_registration",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminCloseRegistrationFeature.Failed"
            }
          }
        },
        {
          "id": "feature.AdminCloseRegistrationFeature.Unauthorized",
          "label": "Unauthorized",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_close_registration",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminCloseRegistrationFeature.Unauthorized"
            }
          }
        },
        {
          "id": "feature.AdminCloseRegistrationFeature.Forbidden",
          "label": "Forbidden",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_close_registration",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminCloseRegistrationFeature.Forbidden"
            }
          }
        },
        {
          "id": "feature.AdminCloseRegistrationFeature.NotFound",
          "label": "NotFound",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_close_registration",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminCloseRegistrationFeature.NotFound"
            }
          }
        },
        {
          "id": "feature.AdminCloseRegistrationFeature.Error",
          "label": "Error",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_close_registration",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminCloseRegistrationFeature.Error"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.feature_admin_close_registration.0001",
          "from": "feature.AdminCloseRegistrationFeature.Idle",
          "to": "feature.AdminCloseRegistrationFeature.Idle",
          "event": "enterFeature",
          "roles": [],
          "validations": [
            "進入關閉報名 Feature Entry State；僅 Admin 可到達。"
          ],
          "intent": {
            "category": "action",
            "summary": "enterFeature"
          },
          "meta": {
            "diagramId": "feature_admin_close_registration",
            "source": {
              "raw": "[*] --> AdminCloseRegistrationFeature.Idle : enterFeature"
            }
          }
        },
        {
          "id": "t.feature_admin_close_registration.0002",
          "from": "feature.AdminCloseRegistrationFeature.Idle",
          "to": "feature.AdminCloseRegistrationFeature.Submitting",
          "event": "submit",
          "roles": [],
          "validations": [
            "送出關閉報名 API；僅允許 published/full → closed；提交期間 disabled。"
          ],
          "intent": {
            "category": "action",
            "summary": "submit"
          },
          "meta": {
            "diagramId": "feature_admin_close_registration",
            "source": {
              "raw": "AdminCloseRegistrationFeature.Idle --> AdminCloseRegistrationFeature.Submitting : submit"
            }
          }
        },
        {
          "id": "t.feature_admin_close_registration.0003",
          "from": "feature.AdminCloseRegistrationFeature.Submitting",
          "to": "feature.AdminCloseRegistrationFeature.Succeeded",
          "event": "api200",
          "roles": [],
          "validations": [
            "API 回 200；活動狀態變為 closed；公開詳情不可再報名；寫入稽核紀錄。"
          ],
          "intent": {
            "category": "action",
            "summary": "api200"
          },
          "meta": {
            "diagramId": "feature_admin_close_registration",
            "source": {
              "raw": "AdminCloseRegistrationFeature.Submitting --> AdminCloseRegistrationFeature.Succeeded : api200"
            }
          }
        },
        {
          "id": "t.feature_admin_close_registration.0004",
          "from": "feature.AdminCloseRegistrationFeature.Submitting",
          "to": "feature.AdminCloseRegistrationFeature.Failed",
          "event": "api400",
          "roles": [],
          "validations": [
            "API 回 400（不合法轉換）；狀態不變；UI 顯示原因。"
          ],
          "intent": {
            "category": "action",
            "summary": "api400"
          },
          "meta": {
            "diagramId": "feature_admin_close_registration",
            "source": {
              "raw": "AdminCloseRegistrationFeature.Submitting --> AdminCloseRegistrationFeature.Failed : api400"
            }
          }
        },
        {
          "id": "t.feature_admin_close_registration.0005",
          "from": "feature.AdminCloseRegistrationFeature.Submitting",
          "to": "feature.AdminCloseRegistrationFeature.Unauthorized",
          "event": "api401",
          "roles": [],
          "validations": [
            "API 回 401；不變更；導向登入。"
          ],
          "intent": {
            "category": "action",
            "summary": "api401"
          },
          "meta": {
            "diagramId": "feature_admin_close_registration",
            "source": {
              "raw": "AdminCloseRegistrationFeature.Submitting --> AdminCloseRegistrationFeature.Unauthorized : api401"
            }
          }
        },
        {
          "id": "t.feature_admin_close_registration.0006",
          "from": "feature.AdminCloseRegistrationFeature.Submitting",
          "to": "feature.AdminCloseRegistrationFeature.Forbidden",
          "event": "api403",
          "roles": [],
          "validations": [
            "API 回 403；不變更；顯示 403。"
          ],
          "intent": {
            "category": "action",
            "summary": "api403"
          },
          "meta": {
            "diagramId": "feature_admin_close_registration",
            "source": {
              "raw": "AdminCloseRegistrationFeature.Submitting --> AdminCloseRegistrationFeature.Forbidden : api403"
            }
          }
        },
        {
          "id": "t.feature_admin_close_registration.0007",
          "from": "feature.AdminCloseRegistrationFeature.Submitting",
          "to": "feature.AdminCloseRegistrationFeature.NotFound",
          "event": "api404",
          "roles": [],
          "validations": [
            "API 回 404；不變更；顯示 404。"
          ],
          "intent": {
            "category": "action",
            "summary": "api404"
          },
          "meta": {
            "diagramId": "feature_admin_close_registration",
            "source": {
              "raw": "AdminCloseRegistrationFeature.Submitting --> AdminCloseRegistrationFeature.NotFound : api404"
            }
          }
        },
        {
          "id": "t.feature_admin_close_registration.0008",
          "from": "feature.AdminCloseRegistrationFeature.Submitting",
          "to": "feature.AdminCloseRegistrationFeature.Error",
          "event": "api5xx",
          "roles": [],
          "validations": [
            "5xx/網路錯誤；UI 顯示可重試；狀態需以刷新確認。"
          ],
          "intent": {
            "category": "action",
            "summary": "api5xx"
          },
          "meta": {
            "diagramId": "feature_admin_close_registration",
            "source": {
              "raw": "AdminCloseRegistrationFeature.Submitting --> AdminCloseRegistrationFeature.Error : api5xx"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_admin_activity_list.invokes.feature_admin_close_registration.s.page_AdminActivityListPage_Ready_Admin.to.feature_AdminCloseRegistrationFeature_Idle",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Ready.Admin"
          },
          "to": {
            "diagramId": "feature_admin_close_registration",
            "stateId": "feature.AdminCloseRegistrationFeature.Idle"
          },
          "meta": {
            "reason": "clickCloseRegistration | navigate AdminCloseRegistrationFeature",
            "action": "clickCloseRegistration",
            "navigateTarget": "AdminCloseRegistrationFeature",
            "validations": [
              "僅 published/full 可關閉報名；成功後狀態變為 closed；公開詳情不可再報名。"
            ]
          }
        },
        {
          "id": "c.page_admin_registrations.invokes.feature_admin_close_registration.s.page_AdminRegistrationsPage_Ready_Admin.to.feature_AdminCloseRegistrationFeature_Idle",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_registrations",
            "stateId": "page.AdminRegistrationsPage.Ready.Admin"
          },
          "to": {
            "diagramId": "feature_admin_close_registration",
            "stateId": "feature.AdminCloseRegistrationFeature.Idle"
          },
          "meta": {
            "reason": "clickCloseRegistration | navigate AdminCloseRegistrationFeature",
            "action": "clickCloseRegistration",
            "navigateTarget": "AdminCloseRegistrationFeature",
            "validations": [
              "可在名單頁手動關閉報名；成功後活動狀態變 closed；公開詳情不可再報名。"
            ]
          }
        },
        {
          "id": "c.feature_admin_close_registration.invokes.page_admin_activity_list.s.feature_AdminCloseRegistrationFeature_Succeeded.to.page_AdminActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_close_registration",
            "stateId": "feature.AdminCloseRegistrationFeature.Succeeded"
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Init"
          },
          "meta": {
            "reason": "refreshAdminList | navigate /admin/activities",
            "action": "refreshAdminList",
            "navigateTarget": "/admin/activities",
            "validations": [
              "返回後台列表並刷新；該活動顯示 closed；公開列表/詳情不可見或不可報名。"
            ]
          }
        },
        {
          "id": "c.feature_admin_close_registration.invokes.page_admin_activity_list.s.feature_AdminCloseRegistrationFeature_Failed.to.page_AdminActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_close_registration",
            "stateId": "feature.AdminCloseRegistrationFeature.Failed"
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Init"
          },
          "meta": {
            "reason": "showReasonReturn | navigate /admin/activities",
            "action": "showReasonReturn",
            "navigateTarget": "/admin/activities",
            "validations": [
              "顯示失敗原因；不得誤顯示成功。"
            ]
          }
        },
        {
          "id": "c.feature_admin_close_registration.invokes.page_login.s.feature_AdminCloseRegistrationFeature_Unauthorized.to.page_LoginPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_close_registration",
            "stateId": "feature.AdminCloseRegistrationFeature.Unauthorized"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Init"
          },
          "meta": {
            "reason": "goLogin | navigate /login",
            "action": "goLogin",
            "navigateTarget": "/login",
            "validations": [
              "導向登入；登入後回後台需通過 RBAC。"
            ]
          }
        },
        {
          "id": "c.feature_admin_close_registration.invokes.page_forbidden.s.feature_AdminCloseRegistrationFeature_Forbidden.to.page_ForbiddenPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_close_registration",
            "stateId": "feature.AdminCloseRegistrationFeature.Forbidden"
          },
          "to": {
            "diagramId": "page_forbidden",
            "stateId": "page.ForbiddenPage.Init"
          },
          "meta": {
            "reason": "showForbidden | navigate /403",
            "action": "showForbidden",
            "navigateTarget": "/403",
            "validations": [
              "顯示 403。"
            ]
          }
        },
        {
          "id": "c.feature_admin_close_registration.invokes.page_not_found.s.feature_AdminCloseRegistrationFeature_NotFound.to.page_NotFoundPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_close_registration",
            "stateId": "feature.AdminCloseRegistrationFeature.NotFound"
          },
          "to": {
            "diagramId": "page_not_found",
            "stateId": "page.NotFoundPage.Init"
          },
          "meta": {
            "reason": "showNotFound | navigate /404",
            "action": "showNotFound",
            "navigateTarget": "/404",
            "validations": [
              "顯示 404。"
            ]
          }
        },
        {
          "id": "c.feature_admin_close_registration.invokes.page_error.s.feature_AdminCloseRegistrationFeature_Error.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_close_registration",
            "stateId": "feature.AdminCloseRegistrationFeature.Error"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "不可恢復錯誤導向錯誤頁。"
            ]
          }
        },
        {
          "id": "c.page_entry.contains.feature_admin_close_registration",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "feature_admin_close_registration",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": null,
        "featureName": "AdminCloseRegistrationFeature",
        "entryStateId": "feature.AdminCloseRegistrationFeature.Idle"
      }
    },
    {
      "id": "feature_admin_archive_activity",
      "name": "AdminArchiveActivityFeature",
      "level": "feature",
      "parentDiagramId": "page_entry",
      "roles": [],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "⑲ AdminArchiveActivityFeature（下架活動）",
        "order": 19
      },
      "groups": [],
      "states": [
        {
          "id": "feature.AdminArchiveActivityFeature.Idle",
          "label": "Idle",
          "type": "start",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_archive_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminArchiveActivityFeature.Idle"
            }
          }
        },
        {
          "id": "feature.AdminArchiveActivityFeature.Submitting",
          "label": "Submitting",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_archive_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminArchiveActivityFeature.Submitting"
            }
          }
        },
        {
          "id": "feature.AdminArchiveActivityFeature.Succeeded",
          "label": "Succeeded",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_archive_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminArchiveActivityFeature.Succeeded"
            }
          }
        },
        {
          "id": "feature.AdminArchiveActivityFeature.Failed",
          "label": "Failed",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_archive_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminArchiveActivityFeature.Failed"
            }
          }
        },
        {
          "id": "feature.AdminArchiveActivityFeature.Unauthorized",
          "label": "Unauthorized",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_archive_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminArchiveActivityFeature.Unauthorized"
            }
          }
        },
        {
          "id": "feature.AdminArchiveActivityFeature.Forbidden",
          "label": "Forbidden",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_archive_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminArchiveActivityFeature.Forbidden"
            }
          }
        },
        {
          "id": "feature.AdminArchiveActivityFeature.NotFound",
          "label": "NotFound",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_archive_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminArchiveActivityFeature.NotFound"
            }
          }
        },
        {
          "id": "feature.AdminArchiveActivityFeature.Error",
          "label": "Error",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_admin_archive_activity",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "AdminArchiveActivityFeature.Error"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.feature_admin_archive_activity.0001",
          "from": "feature.AdminArchiveActivityFeature.Idle",
          "to": "feature.AdminArchiveActivityFeature.Idle",
          "event": "enterFeature",
          "roles": [],
          "validations": [
            "進入下架 Feature Entry State；僅 Admin 可到達。"
          ],
          "intent": {
            "category": "action",
            "summary": "enterFeature"
          },
          "meta": {
            "diagramId": "feature_admin_archive_activity",
            "source": {
              "raw": "[*] --> AdminArchiveActivityFeature.Idle : enterFeature"
            }
          }
        },
        {
          "id": "t.feature_admin_archive_activity.0002",
          "from": "feature.AdminArchiveActivityFeature.Idle",
          "to": "feature.AdminArchiveActivityFeature.Submitting",
          "event": "submit",
          "roles": [],
          "validations": [
            "送出下架 API；僅允許 draft/closed → archived；提交期間 disabled。"
          ],
          "intent": {
            "category": "action",
            "summary": "submit"
          },
          "meta": {
            "diagramId": "feature_admin_archive_activity",
            "source": {
              "raw": "AdminArchiveActivityFeature.Idle --> AdminArchiveActivityFeature.Submitting : submit"
            }
          }
        },
        {
          "id": "t.feature_admin_archive_activity.0003",
          "from": "feature.AdminArchiveActivityFeature.Submitting",
          "to": "feature.AdminArchiveActivityFeature.Succeeded",
          "event": "api200",
          "roles": [],
          "validations": [
            "API 回 200；活動狀態變為 archived（終態）；公開列表/詳情不可見；寫入稽核紀錄。"
          ],
          "intent": {
            "category": "action",
            "summary": "api200"
          },
          "meta": {
            "diagramId": "feature_admin_archive_activity",
            "source": {
              "raw": "AdminArchiveActivityFeature.Submitting --> AdminArchiveActivityFeature.Succeeded : api200"
            }
          }
        },
        {
          "id": "t.feature_admin_archive_activity.0004",
          "from": "feature.AdminArchiveActivityFeature.Submitting",
          "to": "feature.AdminArchiveActivityFeature.Failed",
          "event": "api400",
          "roles": [],
          "validations": [
            "API 回 400（不合法轉換）；狀態不變；UI 顯示原因。"
          ],
          "intent": {
            "category": "action",
            "summary": "api400"
          },
          "meta": {
            "diagramId": "feature_admin_archive_activity",
            "source": {
              "raw": "AdminArchiveActivityFeature.Submitting --> AdminArchiveActivityFeature.Failed : api400"
            }
          }
        },
        {
          "id": "t.feature_admin_archive_activity.0005",
          "from": "feature.AdminArchiveActivityFeature.Submitting",
          "to": "feature.AdminArchiveActivityFeature.Unauthorized",
          "event": "api401",
          "roles": [],
          "validations": [
            "API 回 401；不變更；導向登入。"
          ],
          "intent": {
            "category": "action",
            "summary": "api401"
          },
          "meta": {
            "diagramId": "feature_admin_archive_activity",
            "source": {
              "raw": "AdminArchiveActivityFeature.Submitting --> AdminArchiveActivityFeature.Unauthorized : api401"
            }
          }
        },
        {
          "id": "t.feature_admin_archive_activity.0006",
          "from": "feature.AdminArchiveActivityFeature.Submitting",
          "to": "feature.AdminArchiveActivityFeature.Forbidden",
          "event": "api403",
          "roles": [],
          "validations": [
            "API 回 403；不變更；顯示 403。"
          ],
          "intent": {
            "category": "action",
            "summary": "api403"
          },
          "meta": {
            "diagramId": "feature_admin_archive_activity",
            "source": {
              "raw": "AdminArchiveActivityFeature.Submitting --> AdminArchiveActivityFeature.Forbidden : api403"
            }
          }
        },
        {
          "id": "t.feature_admin_archive_activity.0007",
          "from": "feature.AdminArchiveActivityFeature.Submitting",
          "to": "feature.AdminArchiveActivityFeature.NotFound",
          "event": "api404",
          "roles": [],
          "validations": [
            "API 回 404；不變更；顯示 404。"
          ],
          "intent": {
            "category": "action",
            "summary": "api404"
          },
          "meta": {
            "diagramId": "feature_admin_archive_activity",
            "source": {
              "raw": "AdminArchiveActivityFeature.Submitting --> AdminArchiveActivityFeature.NotFound : api404"
            }
          }
        },
        {
          "id": "t.feature_admin_archive_activity.0008",
          "from": "feature.AdminArchiveActivityFeature.Submitting",
          "to": "feature.AdminArchiveActivityFeature.Error",
          "event": "api5xx",
          "roles": [],
          "validations": [
            "5xx/網路錯誤；UI 顯示可重試；狀態以刷新確認。"
          ],
          "intent": {
            "category": "action",
            "summary": "api5xx"
          },
          "meta": {
            "diagramId": "feature_admin_archive_activity",
            "source": {
              "raw": "AdminArchiveActivityFeature.Submitting --> AdminArchiveActivityFeature.Error : api5xx"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_admin_activity_list.invokes.feature_admin_archive_activity.s.page_AdminActivityListPage_Ready_Admin.to.feature_AdminArchiveActivityFeature_Idle",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Ready.Admin"
          },
          "to": {
            "diagramId": "feature_admin_archive_activity",
            "stateId": "feature.AdminArchiveActivityFeature.Idle"
          },
          "meta": {
            "reason": "clickArchive | navigate AdminArchiveActivityFeature",
            "action": "clickArchive",
            "navigateTarget": "AdminArchiveActivityFeature",
            "validations": [
              "僅 draft/closed 可下架；成功後狀態變為 archived；公開列表/詳情不可再見。"
            ]
          }
        },
        {
          "id": "c.feature_admin_archive_activity.invokes.page_admin_activity_list.s.feature_AdminArchiveActivityFeature_Succeeded.to.page_AdminActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_archive_activity",
            "stateId": "feature.AdminArchiveActivityFeature.Succeeded"
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Init"
          },
          "meta": {
            "reason": "refreshAdminList | navigate /admin/activities",
            "action": "refreshAdminList",
            "navigateTarget": "/admin/activities",
            "validations": [
              "返回後台列表並刷新；該活動顯示 archived；公開列表不顯示。"
            ]
          }
        },
        {
          "id": "c.feature_admin_archive_activity.invokes.page_admin_activity_list.s.feature_AdminArchiveActivityFeature_Failed.to.page_AdminActivityListPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_archive_activity",
            "stateId": "feature.AdminArchiveActivityFeature.Failed"
          },
          "to": {
            "diagramId": "page_admin_activity_list",
            "stateId": "page.AdminActivityListPage.Init"
          },
          "meta": {
            "reason": "showReasonReturn | navigate /admin/activities",
            "action": "showReasonReturn",
            "navigateTarget": "/admin/activities",
            "validations": [
              "顯示失敗原因；不得誤顯示成功。"
            ]
          }
        },
        {
          "id": "c.feature_admin_archive_activity.invokes.page_login.s.feature_AdminArchiveActivityFeature_Unauthorized.to.page_LoginPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_archive_activity",
            "stateId": "feature.AdminArchiveActivityFeature.Unauthorized"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Init"
          },
          "meta": {
            "reason": "goLogin | navigate /login",
            "action": "goLogin",
            "navigateTarget": "/login",
            "validations": [
              "導向登入。"
            ]
          }
        },
        {
          "id": "c.feature_admin_archive_activity.invokes.page_forbidden.s.feature_AdminArchiveActivityFeature_Forbidden.to.page_ForbiddenPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_archive_activity",
            "stateId": "feature.AdminArchiveActivityFeature.Forbidden"
          },
          "to": {
            "diagramId": "page_forbidden",
            "stateId": "page.ForbiddenPage.Init"
          },
          "meta": {
            "reason": "showForbidden | navigate /403",
            "action": "showForbidden",
            "navigateTarget": "/403",
            "validations": [
              "顯示 403。"
            ]
          }
        },
        {
          "id": "c.feature_admin_archive_activity.invokes.page_not_found.s.feature_AdminArchiveActivityFeature_NotFound.to.page_NotFoundPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_archive_activity",
            "stateId": "feature.AdminArchiveActivityFeature.NotFound"
          },
          "to": {
            "diagramId": "page_not_found",
            "stateId": "page.NotFoundPage.Init"
          },
          "meta": {
            "reason": "showNotFound | navigate /404",
            "action": "showNotFound",
            "navigateTarget": "/404",
            "validations": [
              "顯示 404。"
            ]
          }
        },
        {
          "id": "c.feature_admin_archive_activity.invokes.page_error.s.feature_AdminArchiveActivityFeature_Error.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_admin_archive_activity",
            "stateId": "feature.AdminArchiveActivityFeature.Error"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "不可恢復錯誤導向錯誤頁。"
            ]
          }
        },
        {
          "id": "c.page_entry.contains.feature_admin_archive_activity",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "feature_admin_archive_activity",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": null,
        "featureName": "AdminArchiveActivityFeature",
        "entryStateId": "feature.AdminArchiveActivityFeature.Idle"
      }
    },
    {
      "id": "feature_export_registrations_csv",
      "name": "ExportRegistrationsCsvFeature",
      "level": "feature",
      "parentDiagramId": "page_entry",
      "roles": [],
      "variant": {
        "kind": "standalone",
        "baseDiagramId": null,
        "deltaDiagramIdsByRole": {},
        "appliesToRoles": []
      },
      "source": {
        "type": "mermaid",
        "sectionTitle": "⑳ ExportRegistrationsCsvFeature（匯出名單 CSV）",
        "order": 20
      },
      "groups": [],
      "states": [
        {
          "id": "feature.ExportRegistrationsCsvFeature.Idle",
          "label": "Idle",
          "type": "start",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_export_registrations_csv",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ExportRegistrationsCsvFeature.Idle"
            }
          }
        },
        {
          "id": "feature.ExportRegistrationsCsvFeature.Submitting",
          "label": "Submitting",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_export_registrations_csv",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ExportRegistrationsCsvFeature.Submitting"
            }
          }
        },
        {
          "id": "feature.ExportRegistrationsCsvFeature.Succeeded",
          "label": "Succeeded",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_export_registrations_csv",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ExportRegistrationsCsvFeature.Succeeded"
            }
          }
        },
        {
          "id": "feature.ExportRegistrationsCsvFeature.Unauthorized",
          "label": "Unauthorized",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_export_registrations_csv",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ExportRegistrationsCsvFeature.Unauthorized"
            }
          }
        },
        {
          "id": "feature.ExportRegistrationsCsvFeature.Forbidden",
          "label": "Forbidden",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_export_registrations_csv",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ExportRegistrationsCsvFeature.Forbidden"
            }
          }
        },
        {
          "id": "feature.ExportRegistrationsCsvFeature.NotFound",
          "label": "NotFound",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_export_registrations_csv",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ExportRegistrationsCsvFeature.NotFound"
            }
          }
        },
        {
          "id": "feature.ExportRegistrationsCsvFeature.Error",
          "label": "Error",
          "type": "normal",
          "groupId": null,
          "tags": [
            "feature"
          ],
          "meta": {
            "diagramId": "feature_export_registrations_csv",
            "synthetic": false,
            "source": {
              "scope": "root",
              "raw": "ExportRegistrationsCsvFeature.Error"
            }
          }
        }
      ],
      "transitions": [
        {
          "id": "t.feature_export_registrations_csv.0001",
          "from": "feature.ExportRegistrationsCsvFeature.Idle",
          "to": "feature.ExportRegistrationsCsvFeature.Idle",
          "event": "enterFeature",
          "roles": [],
          "validations": [
            "進入匯出 Feature Entry State；僅 Admin 可到達；匯出範圍為該活動之有效報名名單。"
          ],
          "intent": {
            "category": "action",
            "summary": "enterFeature"
          },
          "meta": {
            "diagramId": "feature_export_registrations_csv",
            "source": {
              "raw": "[*] --> ExportRegistrationsCsvFeature.Idle : enterFeature"
            }
          }
        },
        {
          "id": "t.feature_export_registrations_csv.0002",
          "from": "feature.ExportRegistrationsCsvFeature.Idle",
          "to": "feature.ExportRegistrationsCsvFeature.Submitting",
          "event": "requestExport",
          "roles": [],
          "validations": [
            "送出匯出 API；提交期間顯示 loading；避免重複點擊產生多次下載。"
          ],
          "intent": {
            "category": "action",
            "summary": "requestExport"
          },
          "meta": {
            "diagramId": "feature_export_registrations_csv",
            "source": {
              "raw": "ExportRegistrationsCsvFeature.Idle --> ExportRegistrationsCsvFeature.Submitting : requestExport"
            }
          }
        },
        {
          "id": "t.feature_export_registrations_csv.0003",
          "from": "feature.ExportRegistrationsCsvFeature.Submitting",
          "to": "feature.ExportRegistrationsCsvFeature.Succeeded",
          "event": "fileReady",
          "roles": [],
          "validations": [
            "下載成功；檔案格式為 CSV；內容欄位包含 姓名/Email/報名時間；資料集合與畫面名單一致；寫入匯出稽核紀錄。"
          ],
          "intent": {
            "category": "action",
            "summary": "fileReady"
          },
          "meta": {
            "diagramId": "feature_export_registrations_csv",
            "source": {
              "raw": "ExportRegistrationsCsvFeature.Submitting --> ExportRegistrationsCsvFeature.Succeeded : fileReady"
            }
          }
        },
        {
          "id": "t.feature_export_registrations_csv.0004",
          "from": "feature.ExportRegistrationsCsvFeature.Submitting",
          "to": "feature.ExportRegistrationsCsvFeature.Unauthorized",
          "event": "api401",
          "roles": [],
          "validations": [
            "API 回 401；不下載；導向登入。"
          ],
          "intent": {
            "category": "action",
            "summary": "api401"
          },
          "meta": {
            "diagramId": "feature_export_registrations_csv",
            "source": {
              "raw": "ExportRegistrationsCsvFeature.Submitting --> ExportRegistrationsCsvFeature.Unauthorized : api401"
            }
          }
        },
        {
          "id": "t.feature_export_registrations_csv.0005",
          "from": "feature.ExportRegistrationsCsvFeature.Submitting",
          "to": "feature.ExportRegistrationsCsvFeature.Forbidden",
          "event": "api403",
          "roles": [],
          "validations": [
            "API 回 403；不下載；顯示 403。"
          ],
          "intent": {
            "category": "action",
            "summary": "api403"
          },
          "meta": {
            "diagramId": "feature_export_registrations_csv",
            "source": {
              "raw": "ExportRegistrationsCsvFeature.Submitting --> ExportRegistrationsCsvFeature.Forbidden : api403"
            }
          }
        },
        {
          "id": "t.feature_export_registrations_csv.0006",
          "from": "feature.ExportRegistrationsCsvFeature.Submitting",
          "to": "feature.ExportRegistrationsCsvFeature.NotFound",
          "event": "api404",
          "roles": [],
          "validations": [
            "API 回 404（活動不存在）；不下載；顯示 404。"
          ],
          "intent": {
            "category": "action",
            "summary": "api404"
          },
          "meta": {
            "diagramId": "feature_export_registrations_csv",
            "source": {
              "raw": "ExportRegistrationsCsvFeature.Submitting --> ExportRegistrationsCsvFeature.NotFound : api404"
            }
          }
        },
        {
          "id": "t.feature_export_registrations_csv.0007",
          "from": "feature.ExportRegistrationsCsvFeature.Submitting",
          "to": "feature.ExportRegistrationsCsvFeature.Error",
          "event": "api5xx",
          "roles": [],
          "validations": [
            "5xx/網路錯誤；不下載；顯示可重試。"
          ],
          "intent": {
            "category": "action",
            "summary": "api5xx"
          },
          "meta": {
            "diagramId": "feature_export_registrations_csv",
            "source": {
              "raw": "ExportRegistrationsCsvFeature.Submitting --> ExportRegistrationsCsvFeature.Error : api5xx"
            }
          }
        }
      ],
      "connectors": [
        {
          "id": "c.page_admin_registrations.invokes.feature_export_registrations_csv.s.page_AdminRegistrationsPage_Ready_Admin.to.feature_ExportRegistrationsCsvFeature_Idle",
          "type": "invokes",
          "from": {
            "diagramId": "page_admin_registrations",
            "stateId": "page.AdminRegistrationsPage.Ready.Admin"
          },
          "to": {
            "diagramId": "feature_export_registrations_csv",
            "stateId": "feature.ExportRegistrationsCsvFeature.Idle"
          },
          "meta": {
            "reason": "clickExportCsv | navigate ExportRegistrationsCsvFeature",
            "action": "clickExportCsv",
            "navigateTarget": "ExportRegistrationsCsvFeature",
            "validations": [
              "點擊匯出會進入匯出 Feature；成功後會下載 CSV；下載集合與畫面名單一致。"
            ]
          }
        },
        {
          "id": "c.feature_export_registrations_csv.invokes.page_admin_registrations.s.feature_ExportRegistrationsCsvFeature_Succeeded.to.page_AdminRegistrationsPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_export_registrations_csv",
            "stateId": "feature.ExportRegistrationsCsvFeature.Succeeded"
          },
          "to": {
            "diagramId": "page_admin_registrations",
            "stateId": "page.AdminRegistrationsPage.Init"
          },
          "meta": {
            "reason": "backToList | navigate /admin/activities/:activityId/registrations",
            "action": "backToList",
            "navigateTarget": "/admin/activities/:activityId/registrations",
            "validations": [
              "回到名單頁並重新載入（可選）；名單仍一致；不會跳到其他頁。"
            ]
          }
        },
        {
          "id": "c.feature_export_registrations_csv.invokes.page_login.s.feature_ExportRegistrationsCsvFeature_Unauthorized.to.page_LoginPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_export_registrations_csv",
            "stateId": "feature.ExportRegistrationsCsvFeature.Unauthorized"
          },
          "to": {
            "diagramId": "page_login",
            "stateId": "page.LoginPage.Init"
          },
          "meta": {
            "reason": "goLogin | navigate /login",
            "action": "goLogin",
            "navigateTarget": "/login",
            "validations": [
              "導向登入。"
            ]
          }
        },
        {
          "id": "c.feature_export_registrations_csv.invokes.page_forbidden.s.feature_ExportRegistrationsCsvFeature_Forbidden.to.page_ForbiddenPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_export_registrations_csv",
            "stateId": "feature.ExportRegistrationsCsvFeature.Forbidden"
          },
          "to": {
            "diagramId": "page_forbidden",
            "stateId": "page.ForbiddenPage.Init"
          },
          "meta": {
            "reason": "showForbidden | navigate /403",
            "action": "showForbidden",
            "navigateTarget": "/403",
            "validations": [
              "顯示 403。"
            ]
          }
        },
        {
          "id": "c.feature_export_registrations_csv.invokes.page_not_found.s.feature_ExportRegistrationsCsvFeature_NotFound.to.page_NotFoundPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_export_registrations_csv",
            "stateId": "feature.ExportRegistrationsCsvFeature.NotFound"
          },
          "to": {
            "diagramId": "page_not_found",
            "stateId": "page.NotFoundPage.Init"
          },
          "meta": {
            "reason": "showNotFound | navigate /404",
            "action": "showNotFound",
            "navigateTarget": "/404",
            "validations": [
              "顯示 404。"
            ]
          }
        },
        {
          "id": "c.feature_export_registrations_csv.invokes.page_error.s.feature_ExportRegistrationsCsvFeature_Error.to.page_ErrorPage_Init",
          "type": "invokes",
          "from": {
            "diagramId": "feature_export_registrations_csv",
            "stateId": "feature.ExportRegistrationsCsvFeature.Error"
          },
          "to": {
            "diagramId": "page_error",
            "stateId": "page.ErrorPage.Init"
          },
          "meta": {
            "reason": "serverError | navigate /error",
            "action": "serverError",
            "navigateTarget": "/error",
            "validations": [
              "不可恢復錯誤導向錯誤頁。"
            ]
          }
        },
        {
          "id": "c.page_entry.contains.feature_export_registrations_csv",
          "type": "contains",
          "from": {
            "diagramId": "page_entry",
            "stateId": null
          },
          "to": {
            "diagramId": "feature_export_registrations_csv",
            "stateId": null
          },
          "meta": {
            "reason": "derived from parentDiagramId"
          }
        }
      ],
      "meta": {
        "pageName": null,
        "featureName": "ExportRegistrationsCsvFeature",
        "entryStateId": "feature.ExportRegistrationsCsvFeature.Idle"
      }
    }
  ],
  "hierarchy": {
    "roots": [
      "page_entry"
    ],
    "childrenByDiagramId": {
      "page_entry": [
        "page_activity_list",
        "page_activity_detail",
        "page_login",
        "page_register",
        "page_my_activities",
        "page_admin_activity_list",
        "page_admin_registrations",
        "page_forbidden",
        "page_not_found",
        "page_error",
        "feature_auth_login",
        "feature_auth_register",
        "feature_register_for_activity",
        "feature_cancel_registration",
        "feature_admin_upsert_activity",
        "feature_admin_publish_activity",
        "feature_admin_close_registration",
        "feature_admin_archive_activity",
        "feature_export_registrations_csv"
      ]
    }
  },
  "meta": {
    "warnings": []
  }
}
